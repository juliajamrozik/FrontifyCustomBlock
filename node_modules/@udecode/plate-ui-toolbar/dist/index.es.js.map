{"version":3,"file":"index.es.js","sources":["../src/FloatingVerticalDivider.tsx","../src/styles.ts","../src/Toolbar/Toolbar.styles.ts","../src/BalloonToolbar/BalloonToolbar.styles.ts","../src/Toolbar/Toolbar.tsx","../src/BalloonToolbar/useFloatingToolbar.ts","../src/BalloonToolbar/BalloonToolbar.tsx","../src/ToolbarButton/ToolbarButton.styles.ts","../../../../node_modules/clsx/dist/clsx.m.js","../src/ToolbarButton/ToolbarButton.tsx","../src/BlockToolbarButton/BlockToolbarButton.tsx","../src/HeadingToolbar/HeadingToolbar.styles.ts","../src/HeadingToolbar/HeadingToolbar.tsx","../src/MarkToolbarButton/MarkToolbarButton.tsx","../src/ToolbarDropdown/useDropdownControls.ts","../src/ToolbarDropdown/ToolbarDropdown.tsx"],"sourcesContent":["import React from 'react';\n\nexport const FloatingVerticalDivider = () => (\n  <div tw=\"w-px h-5 bg-gray-200 mx-2\" />\n);\n","import { plateButtonCss } from '@udecode/plate-ui-button';\nimport styled, { css } from 'styled-components';\nimport tw from 'twin.macro';\n\nexport const floatingRootCss = css`\n  ${tw`bg-white !z-40 w-auto`};\n\n  border-radius: 4px;\n  box-shadow: rgb(15 15 15 / 5%) 0 0 0 1px, rgb(15 15 15 / 10%) 0 3px 6px,\n    rgb(15 15 15 / 20%) 0 9px 24px;\n`;\n\nexport const floatingRowCss = css`\n  ${tw`px-2 py-1 flex flex-row items-center`};\n`;\n\nexport const floatingButtonCss = [...plateButtonCss, tw`px-1`];\n\nexport const FloatingIconWrapper = styled.div`\n  ${tw`flex items-center px-2 text-gray-400`};\n`;\n\nexport const FloatingInputWrapper = styled.div`\n  ${tw`flex items-center py-1 pr-2`};\n`;\n\nexport const floatingInputCss = [\n  tw`border-none bg-transparent h-8 flex-grow p-0`,\n  tw`focus:outline-none`,\n  css`\n    line-height: 20px;\n  `,\n];\n","import { createStyles } from '@udecode/plate-styled-components';\nimport tw from 'twin.macro';\nimport { ToolbarProps } from './Toolbar.types';\n\nexport const getToolbarStyles = (props: ToolbarProps) =>\n  createStyles(\n    { prefixClassNames: 'Toolbar', ...props },\n    {\n      root: [\n        tw`flex items-center select-none box-content`,\n        tw`text-[rgb(68, 68, 68)] min-h-[40px]`,\n      ],\n    }\n  );\n","import { createStyles } from '@udecode/plate-styled-components';\nimport { css, CSSProp } from 'styled-components';\nimport tw from 'twin.macro';\nimport { getToolbarStyles } from '../Toolbar/Toolbar.styles';\nimport { BalloonToolbarStyleProps } from './BalloonToolbar.types';\n\nexport const getBalloonToolbarStyles = (props: BalloonToolbarStyleProps) => {\n  let color = 'rgb(157, 170, 182)';\n  let colorActive = 'white';\n  let background = 'rgb(36, 42, 49)';\n  let borderColor = 'transparent';\n\n  if (props.theme === 'light') {\n    color = 'rgba(0, 0, 0, 0.50)';\n    colorActive = 'black';\n    background = 'rgb(250, 250, 250)';\n    borderColor = 'rgb(196, 196, 196)';\n  }\n\n  const { placement = 'top' } = props;\n\n  const arrowStyle: CSSProp = [\n    props.arrow &&\n      css`\n        ::after {\n          left: 50%;\n          content: ' ';\n          position: absolute;\n          margin-top: -1px;\n          transform: translateX(-50%);\n          border-color: ${background} transparent;\n          border-style: solid;\n        }\n      `,\n\n    props.arrow &&\n      placement.includes('top') &&\n      css`\n        ::after {\n          top: 100%;\n          bottom: auto;\n          border-width: 8px 8px 0;\n        }\n      `,\n\n    props.arrow &&\n      !placement.includes('top') &&\n      css`\n        ::after {\n          top: auto;\n          bottom: 100%;\n          border-width: 0 8px 8px;\n        }\n      `,\n  ];\n\n  const arrowBorderStyle: CSSProp = [\n    props.arrow &&\n      placement.includes('top') &&\n      props.theme === 'light' &&\n      css`\n        ::before {\n          margin-top: 0;\n          border-width: 9px 9px 0;\n          border-color: ${borderColor} transparent;\n        }\n      `,\n    props.arrow &&\n      !placement.includes('top') &&\n      props.theme === 'light' &&\n      css`\n        ::before {\n          margin-top: 0;\n          border-width: 0 9px 9px;\n          border-color: ${borderColor} transparent;\n        }\n      `,\n  ];\n\n  return createStyles(\n    { prefixClassNames: 'BalloonToolbar', ...props },\n    {\n      root: [\n        ...getToolbarStyles(props).root.css,\n        tw`absolute whitespace-nowrap opacity-100 transition-[opacity .2s ease-in-out]`,\n        css`\n          color: ${color};\n          background: ${background};\n          z-index: 500;\n          border: 1px solid ${borderColor};\n          border-radius: 4px;\n\n          .slate-ToolbarButton-active,\n          .slate-ToolbarButton:hover {\n            color: ${colorActive};\n          }\n\n          ::before {\n            ${arrowBorderStyle}\n          }\n        `,\n        ...arrowStyle,\n        ...arrowBorderStyle,\n      ],\n    }\n  );\n};\n","import React from 'react';\nimport { getToolbarStyles } from './Toolbar.styles';\nimport { ToolbarProps } from './Toolbar.types';\n\nexport const ToolbarBase = React.forwardRef<HTMLDivElement, ToolbarProps>(\n  (props, ref) => {\n    return <div data-testid=\"Toolbar\" ref={ref} {...props} />;\n  }\n);\n\nexport const Toolbar = React.forwardRef<HTMLDivElement, ToolbarProps>(\n  (props: ToolbarProps, ref) => {\n    const { root } = getToolbarStyles(props);\n\n    return (\n      <ToolbarBase\n        {...props}\n        ref={ref}\n        css={root.css}\n        className={root.className}\n      />\n    );\n  }\n);\n","import { useEffect, useState } from 'react';\nimport {\n  getSelectionText,\n  isSelectionExpanded,\n  mergeProps,\n  useEventEditorSelectors,\n  usePlateEditorState,\n} from '@udecode/plate-common';\nimport {\n  flip,\n  getSelectionBoundingClientRect,\n  offset,\n  useVirtualFloating,\n  UseVirtualFloatingOptions,\n  UseVirtualFloatingReturn,\n} from '@udecode/plate-floating';\nimport { useFocused } from 'slate-react';\n\nexport const useFloatingToolbar = ({\n  floatingOptions,\n  ignoreReadOnly = false,\n  hideToolbar = false,\n}: {\n  floatingOptions?: UseVirtualFloatingOptions;\n  ignoreReadOnly?: boolean;\n  hideToolbar?: boolean;\n} = {}): UseVirtualFloatingReturn & {\n  open: boolean;\n} => {\n  const focusedEditorId = useEventEditorSelectors.focus();\n  const editor = usePlateEditorState();\n  const focused = useFocused();\n\n  const [waitForCollapsedSelection, setWaitForCollapsedSelection] = useState(\n    false\n  );\n\n  const [open, setOpen] = useState(false);\n\n  const selectionExpanded = editor && isSelectionExpanded(editor);\n  const selectionText = editor && getSelectionText(editor);\n\n  // On refocus, the editor keeps the previous selection,\n  // so we need to wait it's collapsed at the new position before displaying the floating toolbar.\n  useEffect(() => {\n    if (!focused || ignoreReadOnly) {\n      setWaitForCollapsedSelection(true);\n    }\n\n    if (!selectionExpanded) {\n      setWaitForCollapsedSelection(false);\n    }\n  }, [focused, ignoreReadOnly, selectionExpanded]);\n\n  useEffect(() => {\n    if (\n      !selectionExpanded ||\n      !selectionText ||\n      (!(editor.id === focusedEditorId || ignoreReadOnly) && hideToolbar)\n    ) {\n      setOpen(false);\n    } else if (\n      selectionText &&\n      selectionExpanded &&\n      !waitForCollapsedSelection\n    ) {\n      setOpen(true);\n    }\n  }, [\n    editor.id,\n    editor.selection,\n    focusedEditorId,\n    hideToolbar,\n    ignoreReadOnly,\n    selectionExpanded,\n    selectionText,\n    waitForCollapsedSelection,\n  ]);\n\n  const floatingResult = useVirtualFloating(\n    mergeProps(\n      {\n        middleware: [\n          offset(12),\n          flip({\n            padding: 96,\n          }),\n        ],\n        placement: 'top',\n        getBoundingClientRect: getSelectionBoundingClientRect,\n        open,\n        onOpenChange: setOpen,\n      },\n      floatingOptions\n    )\n  );\n\n  const { update } = floatingResult;\n\n  const selectionTextLength = selectionText?.length ?? 0;\n\n  useEffect(() => {\n    if (selectionTextLength > 0) {\n      update?.();\n    }\n  }, [selectionTextLength, update]);\n\n  return { ...floatingResult, open };\n};\n","import React from 'react';\nimport { PortalBody } from '@udecode/plate-styled-components';\nimport { ToolbarBase } from '../Toolbar/Toolbar';\nimport { getBalloonToolbarStyles } from './BalloonToolbar.styles';\nimport { BalloonToolbarProps } from './BalloonToolbar.types';\nimport { useFloatingToolbar } from './useFloatingToolbar';\n\nexport const BalloonToolbar = (props: BalloonToolbarProps) => {\n  const {\n    children,\n    theme = 'dark',\n    arrow = false,\n    portalElement,\n    floatingOptions,\n    ignoreReadOnly,\n    hideToolbar,\n  } = props;\n\n  const { refs, style, placement, open } = useFloatingToolbar({\n    floatingOptions,\n    ignoreReadOnly,\n    hideToolbar,\n  });\n\n  const styles = getBalloonToolbarStyles({\n    placement,\n    theme,\n    arrow,\n    ...props,\n  });\n\n  if (!open) return null;\n\n  return (\n    <PortalBody element={portalElement}>\n      <ToolbarBase\n        css={styles.root.css}\n        className={styles.root.className}\n        ref={refs.setFloating}\n        style={style}\n      >\n        {children}\n      </ToolbarBase>\n    </PortalBody>\n  );\n};\n","import { createStyles } from '@udecode/plate-styled-components';\nimport { css } from 'styled-components';\nimport tw from 'twin.macro';\nimport { ToolbarButtonProps } from './ToolbarButton.types';\n\nexport const getToolbarButtonStyles = (props: ToolbarButtonProps) =>\n  createStyles(\n    { prefixClassNames: 'ToolbarButton', ...props },\n    {\n      root: [\n        tw`flex justify-center items-center select-none cursor-pointer align-middle`,\n        tw`w-[32px] h-[32px]`,\n        tw`bg-transparent border-none outline-none hover:bg-transparent text-current`,\n        css`\n          > svg {\n            ${tw`block w-5 h-5`}\n          }\n        `,\n        props.active && props.styles?.active,\n      ],\n\n      ...(props.active && { active: {} }),\n    }\n  );\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","import React from 'react';\nimport Tippy, { TippyProps } from '@tippyjs/react';\nimport clsx from 'clsx';\nimport { getToolbarButtonStyles } from './ToolbarButton.styles';\nimport { ToolbarButtonProps } from './ToolbarButton.types';\n\nexport const ToolbarButton = (props: ToolbarButtonProps) => {\n  const {\n    id,\n    active: _active,\n    icon,\n    tooltip,\n    className,\n    actionHandler = 'onClick',\n    onClick,\n    ...buttonProps\n  } = props;\n\n  const tooltipProps: TippyProps = {\n    content: '',\n    offset: [0, 5],\n    arrow: false,\n    delay: 500,\n    duration: [200, 0],\n    hideOnClick: false,\n    ...tooltip,\n  };\n\n  const { root, active } = getToolbarButtonStyles(props);\n\n  // this can replace onClick by onMouseDown\n  buttonProps[actionHandler] = onClick;\n\n  const button = (\n    <button\n      data-testid=\"ToolbarButton\"\n      type=\"button\"\n      aria-label={tooltipProps.content as string}\n      css={root.css}\n      className={clsx(root.className, active?.className, className)}\n      {...buttonProps}\n    >\n      {icon}\n    </button>\n  );\n\n  return tooltip ? <Tippy {...tooltipProps}>{button}</Tippy> : button;\n};\n","import React from 'react';\nimport {\n  focusEditor,\n  someNode,\n  toggleNodeType,\n  useEventPlateId,\n  usePlateEditorState,\n} from '@udecode/plate-common';\nimport { ToolbarButton } from '../ToolbarButton';\nimport { BlockToolbarButtonProps } from './BlockToolbarButton.types';\n\n/**\n * Toolbar button to toggle the type of elements in selection.\n */\nexport const BlockToolbarButton = ({\n  id,\n  type,\n  inactiveType,\n  active: _active,\n  ...props\n}: BlockToolbarButtonProps) => {\n  const editor = usePlateEditorState(useEventPlateId(id));\n  const active =\n    _active ?? (!!editor?.selection && someNode(editor, { match: { type } }));\n\n  return (\n    <ToolbarButton\n      active={active}\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        toggleNodeType(editor, { activeType: type, inactiveType });\n        focusEditor(editor);\n      }}\n      {...props}\n    />\n  );\n};\n","import { createStyles, StyledProps } from '@udecode/plate-styled-components';\nimport { css } from 'styled-components';\nimport tw from 'twin.macro';\nimport { getToolbarStyles } from '../Toolbar/Toolbar.styles';\n\nexport const getHeadingToolbarStyles = (props: StyledProps) =>\n  createStyles({ prefixClassNames: 'HeadingToolbar', ...props }, [\n    {\n      root: [\n        ...getToolbarStyles(props).root.css,\n        tw`relative flex-wrap mt-0 mb-5 -mx-5`,\n        css`\n          padding: 1px 18px 17px;\n          border-bottom: 2px solid #eee;\n\n          .slate-ToolbarButton-active,\n          .slate-ToolbarButton:hover {\n            color: #06c;\n          }\n        `,\n      ],\n    },\n  ]);\n","import React from 'react';\nimport { ToolbarBase } from '../Toolbar/Toolbar';\nimport { ToolbarProps } from '../Toolbar/Toolbar.types';\nimport { getHeadingToolbarStyles } from './HeadingToolbar.styles';\n\nexport const HeadingToolbar = React.forwardRef<HTMLDivElement, ToolbarProps>(\n  (props: ToolbarProps, ref) => {\n    const styles = getHeadingToolbarStyles(props);\n\n    return (\n      <ToolbarBase\n        ref={ref}\n        className={styles.root.className}\n        css={styles.root.css}\n        {...props}\n      />\n    );\n  }\n);\n","import React from 'react';\nimport {\n  focusEditor,\n  isMarkActive,\n  toggleMark,\n  useEventPlateId,\n  usePlateEditorState,\n  Value,\n} from '@udecode/plate-common';\nimport { ToolbarButton } from '../ToolbarButton/ToolbarButton';\nimport { MarkToolbarButtonProps } from './MarkToolbarButton.types';\n\n/**\n * Toolbar button to toggle the mark of the leaves in selection.\n */\nexport const MarkToolbarButton = <V extends Value>({\n  id,\n  type,\n  clear,\n  ...props\n}: MarkToolbarButtonProps<V>) => {\n  const editor = usePlateEditorState(useEventPlateId(id));\n\n  return (\n    <ToolbarButton\n      active={!!editor?.selection && isMarkActive(editor, type!)}\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        toggleMark(editor, { key: type!, clear });\n        focusEditor(editor);\n      }}\n      {...props}\n    />\n  );\n};\n","import { useEffect } from 'react';\nimport { ExtendedRefs, flip, useFloating } from '@udecode/plate-floating';\n\ntype useDropdownControlsProps = {\n  open: boolean;\n  onClose?: (ev: MouseEvent) => void;\n};\n\nconst closeAllExceptSelectedOneListener = ({\n  open,\n  onClose,\n  refs,\n}: useDropdownControlsProps & { refs: ExtendedRefs<HTMLElement> }) => (\n  ev: MouseEvent\n) => {\n  if (open) {\n    const target = ev.target as HTMLElement;\n    // TS2339: Property 'contains' does not exist on type 'ReferenceType'\n    if ((refs.reference.current as any)?.contains(target)) {\n      return;\n    }\n    if (refs.floating.current?.contains(target)) {\n      return;\n    }\n\n    onClose?.(ev);\n  }\n};\n\nexport const useDropdownControls = ({\n  open,\n  onClose,\n}: useDropdownControlsProps) => {\n  const floatingResult = useFloating<HTMLElement>({\n    open,\n    strategy: 'fixed',\n    placement: 'bottom-start',\n    middleware: [flip()],\n  });\n  const { x, y, refs, strategy } = floatingResult;\n\n  useEffect(() => {\n    const listener = closeAllExceptSelectedOneListener({ open, onClose, refs });\n    document.body.addEventListener('mousedown', listener);\n    return () => {\n      document.body.removeEventListener('mousedown', listener);\n    };\n  }, [onClose, open, refs]);\n\n  return {\n    styles: {\n      position: strategy,\n      top: y ?? 0,\n      left: x ?? 0,\n      width: 'max-content',\n    },\n    ...floatingResult,\n  };\n};\n","import React, { ReactNode } from 'react';\nimport { floatingRootCss } from '../styles';\nimport { useDropdownControls } from './useDropdownControls';\n\ntype ToolbarDropdownProps = {\n  control: ReactNode;\n  open: boolean;\n  children: ReactNode;\n  onOpen?: () => void;\n  onClose?: (ev: MouseEvent) => void;\n};\n\nexport const ToolbarDropdown = ({\n  control,\n  children,\n  open,\n  onOpen,\n  onClose,\n}: ToolbarDropdownProps) => {\n  const { styles, refs } = useDropdownControls({\n    open,\n    onClose,\n  });\n\n  return (\n    <>\n      <div ref={refs.setReference} onMouseDown={onOpen}>\n        {control}\n      </div>\n\n      {open && (\n        <div ref={refs.setFloating} css={floatingRootCss} style={styles}>\n          {children}\n        </div>\n      )}\n    </>\n  );\n};\n"],"names":["FloatingVerticalDivider","_StyledDiv","floatingRootCss","css","floatingRowCss","floatingButtonCss","plateButtonCss","FloatingIconWrapper","styled","div","FloatingInputWrapper","floatingInputCss","getToolbarStyles","props","createStyles","prefixClassNames","root","getBalloonToolbarStyles","color","colorActive","background","borderColor","theme","placement","arrowStyle","arrow","includes","arrowBorderStyle","ToolbarBase","React","forwardRef","ref","Toolbar","className","useFloatingToolbar","floatingOptions","ignoreReadOnly","hideToolbar","focusedEditorId","useEventEditorSelectors","focus","editor","usePlateEditorState","focused","useFocused","waitForCollapsedSelection","setWaitForCollapsedSelection","useState","open","setOpen","selectionExpanded","isSelectionExpanded","selectionText","getSelectionText","useEffect","id","selection","floatingResult","useVirtualFloating","mergeProps","middleware","offset","flip","padding","getBoundingClientRect","getSelectionBoundingClientRect","onOpenChange","update","selectionTextLength","length","BalloonToolbar","children","portalElement","refs","style","styles","_StyledToolbarBase","setFloating","getToolbarButtonStyles","active","ToolbarButton","_active","icon","tooltip","actionHandler","onClick","buttonProps","tooltipProps","content","delay","duration","hideOnClick","button","clsx","BlockToolbarButton","type","inactiveType","useEventPlateId","someNode","match","e","preventDefault","stopPropagation","toggleNodeType","activeType","focusEditor","getHeadingToolbarStyles","HeadingToolbar","MarkToolbarButton","clear","isMarkActive","toggleMark","key","closeAllExceptSelectedOneListener","onClose","ev","target","reference","current","contains","floating","useDropdownControls","useFloating","strategy","x","y","listener","document","body","addEventListener","removeEventListener","position","top","left","width","ToolbarDropdown","control","onOpen","setReference"],"mappings":"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"}