{"version":3,"file":"submitFloatingButton.es.js","sources":["../../../../../../src/components/RichTextEditor/plugins/ButtonPlugin/transforms/submitFloatingButton.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { PlateEditor, Value, focusEditor, getPluginOptions } from '@udecode/plate';\nimport { floatingButtonActions, floatingButtonSelectors } from '../components/FloatingButton/floatingButtonStore';\nimport { ButtonPlugin, ELEMENT_BUTTON } from '../createButtonPlugin';\nimport { upsertButton } from '.';\n\nexport const submitFloatingButton = <V extends Value>(editor: PlateEditor<V>) => {\n    if (!editor.selection) {\n        return;\n    }\n\n    const { isUrl, forceSubmit } = getPluginOptions<ButtonPlugin, V>(editor, ELEMENT_BUTTON);\n    const url = floatingButtonSelectors.url();\n\n    const isValid = isUrl?.(url) || forceSubmit;\n    if (!isValid) {\n        return;\n    }\n\n    const text = floatingButtonSelectors.text();\n    const buttonStyle = floatingButtonSelectors.buttonStyle();\n    const target = floatingButtonSelectors.newTab() ? undefined : '_self';\n\n    floatingButtonActions.hide();\n\n    upsertButton(editor, {\n        url,\n        text,\n        buttonStyle,\n        target,\n        isUrl: (_url) => (forceSubmit || !isUrl ? true : isUrl(_url)),\n    });\n\n    setTimeout(() => {\n        focusEditor(editor, editor.selection ?? undefined);\n    }, 0);\n\n    return true;\n};\n"],"names":["submitFloatingButton","editor","isUrl","forceSubmit","getPluginOptions","ELEMENT_BUTTON","url","floatingButtonSelectors","text","buttonStyle","target","floatingButtonActions","upsertButton","_url","focusEditor"],"mappings":";;;;AAOa,MAAAA,IAAuB,CAAkBC,MAA2B;AACzE,MAAA,CAACA,EAAO;AACR;AAGJ,QAAM,EAAE,OAAAC,GAAO,aAAAC,EAAA,IAAgBC,EAAkCH,GAAQI,CAAc,GACjFC,IAAMC,EAAwB;AAGpC,MAAI,GADYL,KAAA,gBAAAA,EAAQI,OAAQH;AAE5B;AAGE,QAAAK,IAAOD,EAAwB,QAC/BE,IAAcF,EAAwB,eACtCG,IAASH,EAAwB,OAAO,IAAI,SAAY;AAE9D,SAAAI,EAAsB,KAAK,GAE3BC,EAAaX,GAAQ;AAAA,IACjB,KAAAK;AAAA,IACA,MAAAE;AAAA,IACA,aAAAC;AAAA,IACA,QAAAC;AAAA,IACA,OAAO,CAACG,MAAUV,KAAe,CAACD,IAAQ,KAAOA,EAAMW,CAAI;AAAA,EAAA,CAC9D,GAED,WAAW,MAAM;AACD,IAAAC,EAAAb,GAAQA,EAAO,aAAa,MAAS;AAAA,KAClD,CAAC,GAEG;AACX;"}