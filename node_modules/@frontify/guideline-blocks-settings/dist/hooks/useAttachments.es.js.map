{"version":3,"file":"useAttachments.es.js","sources":["../../src/hooks/useAttachments.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { AppBridgeBlock, Asset, useBlockAssets } from '@frontify/app-bridge';\n\nexport const useAttachments = (appBridge: AppBridgeBlock, assetId: string) => {\n    const { blockAssets, updateAssetIdsFromKey } = useBlockAssets(appBridge);\n    const attachments = blockAssets?.[assetId] || [];\n\n    const onAddAttachments = async (newAssets: Asset[]) => {\n        const newAssetIds = attachments.map((attachment) => attachment.id);\n        for (const asset of newAssets) {\n            newAssetIds.push(asset.id);\n        }\n        await updateAssetIdsFromKey(assetId, newAssetIds);\n    };\n\n    const onAttachmentDelete = async (assetToDelete: Asset) => {\n        const newAssetIds = attachments\n            .filter((attachment) => attachment.id !== assetToDelete.id)\n            .map((attachment) => attachment.id);\n\n        await updateAssetIdsFromKey(assetId, newAssetIds);\n    };\n\n    const onAttachmentReplace = async (attachmentToReplace: Asset, newAsset: Asset) => {\n        const newAssetIds = attachments.map((attachment) =>\n            attachment.id === attachmentToReplace.id ? newAsset.id : attachment.id,\n        );\n\n        await updateAssetIdsFromKey(assetId, newAssetIds);\n    };\n\n    const onAttachmentsSorted = async (assets: Asset[]) => {\n        const newAssetIds = assets.map((asset) => asset.id);\n\n        await updateAssetIdsFromKey(assetId, newAssetIds);\n    };\n\n    return {\n        onAddAttachments,\n        onAttachmentDelete,\n        onAttachmentReplace,\n        onAttachmentsSorted,\n        attachments,\n    };\n};\n"],"names":["useAttachments","appBridge","assetId","blockAssets","updateAssetIdsFromKey","useBlockAssets","attachments","newAssets","newAssetIds","attachment","asset","assetToDelete","attachmentToReplace","newAsset","assets"],"mappings":";AAIa,MAAAA,IAAiB,CAACC,GAA2BC,MAAoB;AAC1E,QAAM,EAAE,aAAAC,GAAa,uBAAAC,EAAsB,IAAIC,EAAeJ,CAAS,GACjEK,KAAcH,KAAA,gBAAAA,EAAcD,OAAY,CAAA;AAgCvC,SAAA;AAAA,IACH,kBA/BqB,OAAOK,MAAuB;AACnD,YAAMC,IAAcF,EAAY,IAAI,CAACG,MAAeA,EAAW,EAAE;AACjE,iBAAWC,KAASH;AACJ,QAAAC,EAAA,KAAKE,EAAM,EAAE;AAEvB,YAAAN,EAAsBF,GAASM,CAAW;AAAA,IAAA;AAAA,IA2BhD,oBAxBuB,OAAOG,MAAyB;AACvD,YAAMH,IAAcF,EACf,OAAO,CAACG,MAAeA,EAAW,OAAOE,EAAc,EAAE,EACzD,IAAI,CAACF,MAAeA,EAAW,EAAE;AAEhC,YAAAL,EAAsBF,GAASM,CAAW;AAAA,IAAA;AAAA,IAoBhD,qBAjBwB,OAAOI,GAA4BC,MAAoB;AAC/E,YAAML,IAAcF,EAAY;AAAA,QAAI,CAACG,MACjCA,EAAW,OAAOG,EAAoB,KAAKC,EAAS,KAAKJ,EAAW;AAAA,MAAA;AAGlE,YAAAL,EAAsBF,GAASM,CAAW;AAAA,IAAA;AAAA,IAahD,qBAVwB,OAAOM,MAAoB;AACnD,YAAMN,IAAcM,EAAO,IAAI,CAACJ,MAAUA,EAAM,EAAE;AAE5C,YAAAN,EAAsBF,GAASM,CAAW;AAAA,IAAA;AAAA,IAQhD,aAAAF;AAAA,EAAA;AAER;"}