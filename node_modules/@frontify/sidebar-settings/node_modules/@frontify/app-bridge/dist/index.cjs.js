"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const k=require("immer"),f=require("react"),dn=require("mitt"),u=require("sinon");var nt=(e=>(e.External="EXTERNAL",e.Internal="INTERNAL",e))(nt||{}),mn=(e=>(e.TextAndIcon="ICON_TEXT",e.IconOnly="ICON",e.TextOnly="TEXT",e))(mn||{}),pn=(e=>(e.Right="RIGHT",e.Left="LEFT",e))(pn||{}),rt=(e=>(e.Everyone="EVERYONE",e.Editor="EDITOR",e))(rt||{}),o=(e=>(e.Aac="aac",e.Ac3="ac3",e.Ai="ai",e.Aif="aif",e.Aifc="aifc",e.Aiff="aiff",e.Artboard="artboard",e.Asc="asc",e.Atom="atom",e.Au="au",e.Avi="avi",e.Bcpio="bcpio",e.Bin="bin",e.Bmp="bmp",e.Cdf="cdf",e.Cgm="cgm",e.Class="class",e.Cpio="cpio",e.Cpt="cpt",e.Csh="csh",e.Css="css",e.Dcr="dcr",e.Dif="dif",e.Dir="dir",e.Djv="djv",e.Djvu="djvu",e.Dll="dll",e.Dmg="dmg",e.Dms="dms",e.Dng="dng",e.Doc="doc",e.Docx="docx",e.Dotx="dotx",e.Docm="docm",e.Dotm="dotm",e.Dtd="dtd",e.Dv="dv",e.Dvi="dvi",e.Dxr="dxr",e.Eps="eps",e.Etx="etx",e.Exe="exe",e.Ez="ez",e.Flac="flac",e.Flv="flv",e.Gif="gif",e.Gram="gram",e.Grxml="grxml",e.Gtar="gtar",e.Hdf="hdf",e.Heif="heif",e.Hqx="hqx",e.Htm="htm",e.Html="html",e.Ice="ice",e.Ico="ico",e.Ics="ics",e.Idml="idml",e.Ief="ief",e.Ifb="ifb",e.Iges="iges",e.Igs="igs",e.Indd="indd",e.Indt="indt",e.Jnlp="jnlp",e.Jp2="jp2",e.Jpe="jpe",e.Jpeg="jpeg",e.Jpg="jpg",e.Js="js",e.Kar="kar",e.Latex="latex",e.Lha="lha",e.Lzh="lzh",e.M3u="m3u",e.M4a="m4a",e.M4b="m4b",e.M4p="m4p",e.M4r="m4r",e.M4u="m4u",e.M4v="m4v",e.Mac="mac",e.Man="man",e.Mathml="mathml",e.Me="me",e.Mesh="mesh",e.Mid="mid",e.Midi="midi",e.Mif="mif",e.Mkv="mkv",e.Mov="mov",e.Movie="movie",e.Mp2="mp2",e.Mp3="mp3",e.Mp4="mp4",e.Mpe="mpe",e.Mpeg="mpeg",e.Mpg="mpg",e.Mpga="mpga",e.Ms="ms",e.Msh="msh",e.Mts="mts",e.Mxu="mxu",e.Nc="nc",e.Oda="oda",e.Ogg="ogg",e.Pbm="pbm",e.Pct="pct",e.Pdb="pdb",e.Pdf="pdf",e.Pgm="pgm",e.Pgn="pgn",e.Pic="pic",e.Pict="pict",e.Png="png",e.Pnm="pnm",e.Pnt="pnt",e.Pntg="pntg",e.Ppm="ppm",e.Ppt="ppt",e.Pptx="pptx",e.Potx="potx",e.Ppsx="ppsx",e.Ppam="ppam",e.Pptm="pptm",e.Potm="potm",e.Ppsm="ppsm",e.Ps="ps",e.Psd="psd",e.Qt="qt",e.Qti="qti",e.Qtif="qtif",e.Ra="ra",e.Ram="ram",e.Ras="ras",e.Rdf="rdf",e.Rgb="rgb",e.Rm="rm",e.Roff="roff",e.Rtf="rtf",e.Rtx="rtx",e.Sgm="sgm",e.Sgml="sgml",e.Sh="sh",e.Shar="shar",e.Silo="silo",e.Sit="sit",e.Skd="skd",e.Sketch="sketch",e.Skm="skm",e.Skp="skp",e.Skt="skt",e.Smi="smi",e.Smil="smil",e.Snd="snd",e.So="so",e.Spl="spl",e.Src="src",e.Sv4cpio="sv4cpio",e.Sv4crc="sv4crc",e.Svg="svg",e.Swf="swf",e.T="t",e.Tar="tar",e.Tcl="tcl",e.Tex="tex",e.Texi="texi",e.Texinfo="texinfo",e.Tif="tif",e.Tiff="tiff",e.Tr="tr",e.Tsv="tsv",e.Txt="txt",e.Ustar="ustar",e.Vcd="vcd",e.Vrml="vrml",e.Vxml="vxml",e.Wav="wav",e.Wbmp="wbmp",e.Wbmxl="wbmxl",e.Webm="webm",e.Webp="webp",e.Wml="wml",e.Wmlc="wmlc",e.Wmls="wmls",e.Wmlsc="wmlsc",e.Wmv="wmv",e.Wrl="wrl",e.Xbm="xbm",e.Xht="xht",e.Xhtml="xhtml",e.Xls="xls",e.Xml="xml",e.Xpm="xpm",e.Xsl="xsl",e.Xlsx="xlsx",e.Xltx="xltx",e.Xlsm="xlsm",e.Xltm="xltm",e.Xlam="xlam",e.Xlsb="xlsb",e.Xslt="xslt",e.Xul="xul",e.Xwd="xwd",e.Xyz="xyz",e.Zip="zip",e.Tpl="tpl",e))(o||{});const xr={Audio:[o.Aac,o.Ac3,o.Aif,o.Aifc,o.Aiff,o.Flac,o.M4a,o.M4r,o.Mp3,o.Ogg,o.Wav],Documents:[o.Doc,o.Docx,o.Dotx,o.Pdf,o.Potx,o.Ppt,o.Pptx,o.Xls,o.Xlsx,o.Xltx],Images:[o.Ai,o.Bmp,o.Dng,o.Eps,o.Gif,o.Heif,o.Ico,o.Jpeg,o.Jpg,o.Png,o.Psd,o.Svg,o.Tif,o.Tiff,o.Webp],Videos:[o.Avi,o.Flv,o.M4v,o.Mkv,o.Mov,o.Mp4,o.Mpg,o.Mts,o.Webm,o.Wmv],Templates:[o.Artboard,o.Idml,o.Indd,o.Indt,o.Sketch]};var gn=(e=>(e.Audio="audio",e.Documents="documents",e.Images="images",e.Videos="videos",e.Templates="templates",e))(gn||{}),fn=(e=>(e.OpenModal="onOpenModal",e.CloseModal="onCloseModal",e))(fn||{}),ot=(e=>(e.MediaLibrary="MediaLibrary",e.LogoLibrary="LogoLibrary",e.IconLibrary="IconLibrary",e.DocumentLibrary="DocumentLibrary",e.TemplateLibrary="TemplateLibrary",e.PatternLibrary="PatternLibrary",e.Styleguide="Styleguide",e.Workspace="Workspace",e))(ot||{}),at=(e=>(e.File="FILE",e.Canvas="CANVAS",e.ImageVideo="IMAGE",e.TextSnippet="TEXT_SNIPPET",e.Url="URL",e))(at||{}),x=(e=>(e.CloseApp="closeApp",e.DeleteAppState="deleteAppState",e.GetAppState="getAppState",e.GetAssetById="getAssetById",e.GetProjectId="getProjectId",e.GetRefreshedThirdpartyOauth2Token="getRefreshedThirdpartyOauth2Token",e.GetThirdPartyOauth2Tokens="getThirdPartyOauth2Tokens",e.OpenAssetChooser="openAssetChooser",e.PostExternalAssets="postExternalAssets",e.PutAppState="putAppState",e))(x||{});const Or=e=>{const t=s=>{const i=s.trim();return i.startsWith("rgba(")||i.startsWith("rgb(")},n=e.split("(")[1].split(")")[0].split(","),r=n.slice(0,2).every(s=>s.trim()===parseInt(s).toString());if(!t(e)||!r)throw new Error(`String is not a valid color (passed: "${e}").`);const a=n.map(s=>parseFloat(s));return{red:a[0],green:a[1],blue:a[2],alpha:(a==null?void 0:a[3])||1}},Lr=e=>"alpha"in e?`rgba(${e.red}, ${e.green}, ${e.blue}, ${e.alpha})`:`rgb(${e.red}, ${e.green}, ${e.blue})`,wn=e=>{const t=Object.keys(e).filter(n=>n.startsWith("jQuery")).reduce((n,r)=>({...n,...e[r]}),{});return{...e.dataset,...t}},Mr=e=>{const t=document.getElementsByClassName(e)[0];if(!t)throw new Error("Could not find the DOM node via class name");return wn(t)},hn={[o.Aac]:"audio/aac",[o.Ac3]:"audio/ac3",[o.Ai]:"application/postscript",[o.Aif]:"audio/x-aiff",[o.Aifc]:"audio/x-aiff",[o.Aiff]:"audio/x-aiff",[o.Artboard]:"application/octet-stream",[o.Asc]:"text/plain",[o.Atom]:"application/atom+xml",[o.Au]:"audio/basic",[o.Avi]:"video/x-msvideo",[o.Bcpio]:"application/x-bcpio",[o.Bin]:"application/octet-stream",[o.Bmp]:"image/bmp",[o.Cdf]:"application/x-netcdf",[o.Cgm]:"image/cgm",[o.Class]:"application/octet-stream",[o.Cpio]:"application/x-cpio",[o.Cpt]:"application/mac-compactpro",[o.Csh]:"application/x-csh",[o.Css]:"text/css",[o.Dcr]:"application/x-director",[o.Dif]:"video/x-dv",[o.Dir]:"application/x-director",[o.Djv]:"image/vnd.djvu",[o.Djvu]:"image/vnd.djvu",[o.Dll]:"application/octet-stream",[o.Dmg]:"application/octet-stream",[o.Dms]:"application/octet-stream",[o.Dng]:"image/dng",[o.Doc]:"application/msword",[o.Docm]:"application/vnd.ms-word.document.macroEnabled.12",[o.Docx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",[o.Dotm]:"application/vnd.ms-word.template.macroEnabled.12",[o.Dotx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",[o.Dtd]:"application/xml-dtd",[o.Dv]:"video/x-dv",[o.Dvi]:"application/x-dvi",[o.Dxr]:"application/x-director",[o.Eps]:"application/postscript",[o.Etx]:"text/x-setext",[o.Exe]:"application/octet-stream",[o.Ez]:"application/andrew-inset",[o.Flac]:"audio/x-flac",[o.Flv]:"video/x-flv",[o.Gif]:"image/gif",[o.Gram]:"application/srgs",[o.Grxml]:"application/srgs+xml",[o.Gtar]:"application/x-gtar",[o.Hdf]:"application/x-hdf",[o.Heif]:"mage/heif",[o.Hqx]:"application/mac-binhex40",[o.Htm]:"text/html",[o.Html]:"text/html",[o.Ice]:"x-conference/x-cooltalk",[o.Ico]:"image/x-icon",[o.Ics]:"text/calendar",[o.Idml]:"application/vnd.adobe.indesign-idml-package",[o.Ief]:"image/ief",[o.Ifb]:"text/calendar",[o.Iges]:"model/iges",[o.Igs]:"model/iges",[o.Indd]:"application/octet-stream",[o.Indt]:"application/octet-stream",[o.Jnlp]:"application/x-java-jnlp-file",[o.Jp2]:"image/jp2",[o.Jpe]:"image/jpeg",[o.Jpeg]:"image/jpeg",[o.Jpg]:"image/jpeg",[o.Js]:"application/x-javascript",[o.Kar]:"audio/midi",[o.Latex]:"application/x-latex",[o.Lha]:"application/octet-stream",[o.Lzh]:"application/octet-stream",[o.M3u]:"audio/x-mpegurl",[o.M4a]:"audio/mp4a-latm",[o.M4b]:"audio/mp4a-latm",[o.M4p]:"audio/mp4a-latm",[o.M4r]:"audio/x-m4r",[o.M4u]:"video/vnd.mpegurl",[o.M4v]:"video/x-m4v",[o.Mac]:"image/x-macpaint",[o.Man]:"application/x-troff-man",[o.Mathml]:"application/mathml+xml",[o.Me]:"application/x-troff-me",[o.Mesh]:"model/mesh",[o.Mid]:"audio/midi",[o.Midi]:"audio/midi",[o.Mif]:"application/vnd.mif",[o.Mkv]:"video/x-matroska",[o.Mov]:"video/quicktime",[o.Movie]:"video/x-sgi-movie",[o.Mp2]:"audio/mpeg",[o.Mp3]:"audio/mpeg",[o.Mp4]:"video/mp4",[o.Mpe]:"video/mpeg",[o.Mpeg]:"video/mpeg",[o.Mpg]:"video/mpeg",[o.Mpga]:"audio/mpeg",[o.Ms]:"application/x-troff-ms",[o.Msh]:"model/mesh",[o.Mts]:"model/vnd.mts",[o.Mxu]:"video/vnd.mpegurl",[o.Nc]:"application/x-netcdf",[o.Oda]:"application/oda",[o.Ogg]:"application/ogg",[o.Pbm]:"image/x-portable-bitmap",[o.Pct]:"image/pict",[o.Pdb]:"chemical/x-pdb",[o.Pdf]:"application/pdf",[o.Pgm]:"image/x-portable-graymap",[o.Pgn]:"application/x-chess-pgn",[o.Pic]:"image/pict",[o.Pict]:"image/pict",[o.Png]:"image/png",[o.Pnm]:"image/x-portable-anymap",[o.Pnt]:"image/x-macpaint",[o.Pntg]:"image/x-macpaint",[o.Potm]:"application/vnd.ms-powerpoint.template.macroEnabled.12",[o.Potx]:"application/vnd.openxmlformats-officedocument.presentationml.template",[o.Ppam]:"application/vnd.ms-powerpoint.addin.macroEnabled.12",[o.Ppm]:"image/x-portable-pixmap",[o.Ppsm]:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",[o.Ppsx]:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",[o.Ppt]:"application/vnd.ms-powerpoint",[o.Pptm]:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",[o.Pptx]:"application/vnd.openxmlformats-officedocument.presentationml.presentation",[o.Ps]:"application/postscript",[o.Psd]:"image/vnd.adobe.photoshop",[o.Qt]:"video/quicktime",[o.Qti]:"image/x-quicktime",[o.Qtif]:"image/x-quicktime",[o.Ra]:"audio/x-pn-realaudio",[o.Ram]:"audio/x-pn-realaudio",[o.Ras]:"image/x-cmu-raster",[o.Rdf]:"application/rdf+xml",[o.Rgb]:"image/x-rgb",[o.Rm]:"application/vnd.rn-realmedia",[o.Roff]:"application/x-troff",[o.Rtf]:"text/rtf",[o.Rtx]:"text/richtext",[o.Sgm]:"text/sgml",[o.Sgml]:"text/sgml",[o.Sh]:"application/x-sh",[o.Shar]:"application/x-shar",[o.Silo]:"model/mesh",[o.Sit]:"application/x-stuffit",[o.Skd]:"application/x-koan",[o.Sketch]:"application/zip",[o.Skm]:"application/x-koan",[o.Skp]:"application/x-koan",[o.Skt]:"application/x-koan",[o.Smi]:"application/smil",[o.Smil]:"application/smil",[o.Snd]:"audio/basic",[o.So]:"application/octet-stream",[o.Spl]:"application/x-futuresplash",[o.Src]:"application/x-wais-source",[o.Sv4cpio]:"application/x-sv4cpio",[o.Sv4crc]:"application/x-sv4crc",[o.Svg]:"image/svg+xml",[o.Swf]:"application/x-shockwave-flash",[o.T]:"application/x-troff",[o.Tar]:"application/x-tar",[o.Tcl]:"application/x-tcl",[o.Tex]:"application/x-tex",[o.Texi]:"application/x-texinfo",[o.Texinfo]:"application/x-texinfo",[o.Tif]:"image/tiff",[o.Tiff]:"image/tiff",[o.Tpl]:"text/xml",[o.Tr]:"application/x-troff",[o.Tsv]:"text/tab-separated-values",[o.Txt]:"text/plain",[o.Ustar]:"application/x-ustar",[o.Vcd]:"application/x-cdlink",[o.Vrml]:"model/vrml",[o.Vxml]:"application/voicexml+xml",[o.Wav]:"audio/x-wav",[o.Wbmp]:"image/vnd.wap.wbmp",[o.Wbmxl]:"application/vnd.wap.wbxml",[o.Webm]:"video/webm",[o.Webp]:"image/webp",[o.Wml]:"text/vnd.wap.wml",[o.Wmlc]:"application/vnd.wap.wmlc",[o.Wmls]:"text/vnd.wap.wmlscript",[o.Wmlsc]:"application/vnd.wap.wmlscriptc",[o.Wmv]:"video/x-ms-wmv",[o.Wrl]:"model/vrml",[o.Xbm]:"image/x-xbitmap",[o.Xht]:"application/xhtml+xml",[o.Xhtml]:"application/xhtml+xml",[o.Xlam]:"application/vnd.ms-excel.addin.macroEnabled.12",[o.Xls]:"application/vnd.ms-excel",[o.Xlsb]:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",[o.Xlsm]:"application/vnd.ms-excel.sheet.macroEnabled.12",[o.Xlsx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",[o.Xltm]:"application/vnd.ms-excel.template.macroEnabled.12",[o.Xltx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",[o.Xml]:"application/xml",[o.Xpm]:"image/x-xpixmap",[o.Xsl]:"application/xml",[o.Xslt]:"application/xslt+xml",[o.Xul]:"application/vnd.mozilla.xul+xml",[o.Xwd]:"image/x-xwindowdump",[o.Xyz]:"chemical/x-xyz",[o.Zip]:"application/zip"},Ur=e=>e.map(t=>hn[t]).filter(t=>t!==void 0),bn=(e=6)=>Math.random().toString(20).substr(2,e);class yn extends Error{constructor(t,n,r){super(`Status code ${n} - ${t}`),this.code=0,this.name="HttpClientError",this.code=n,this.responseBody=r}}const ce=async(e,t,n,r)=>{const a={method:e,headers:{"Content-Type":"application/json; charset=utf-8",...r},...n&&{body:JSON.stringify(n)}},s=await window.fetch(`${window.location.origin}${t}`,a),i=await s.json();if(!s.ok)throw new yn(i,s.status,i.error);return{result:i}};class Dn{static getCsrfToken(){const t=document.getElementsByName("x-csrf-token");if(t.length>0)return t[0].content}static async get(t){return ce("GET",t,"",{"X-CSRF-TOKEN":this.getCsrfToken()})}static async post(t,n){return ce("POST",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async put(t,n){return ce("PUT",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async patch(t,n){return ce("PATCH",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async delete(t,n){return ce("DELETE",t,n,{"X-CSRF-TOKEN":this.getCsrfToken()})}}function $(e,t,n,r){const a=window.top;a==null||a.postMessage({topic:e,token:t,data:n},(r==null?void 0:r.origin)||"*")}function Br(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function be(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var gt=Object.create,Rr=function(){function e(){}return function(t){if(!be(t))return{};if(gt)return gt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Nr=Rr;function $r(e){return function(t,n,r){for(var a=-1,s=Object(t),i=r(t),c=i.length;c--;){var g=i[e?c:++a];if(n(s[g],g,s)===!1)break}return t}}var Zr=$r();const jr=Zr;function Er(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Kr=typeof global=="object"&&global&&global.Object===Object&&global;const An=Kr;var zr=typeof self=="object"&&self&&self.Object===Object&&self,Wr=An||zr||Function("return this")();const z=Wr;var Xr=z.Symbol;const Y=Xr;var vn=Object.prototype,Vr=vn.hasOwnProperty,Hr=vn.toString,ue=Y?Y.toStringTag:void 0;function Yr(e){var t=Vr.call(e,ue),n=e[ue];try{e[ue]=void 0;var r=!0}catch{}var a=Hr.call(e);return r&&(t?e[ue]=n:delete e[ue]),a}var Jr=Object.prototype,Qr=Jr.toString;function Fr(e){return Qr.call(e)}var qr="[object Null]",eo="[object Undefined]",ft=Y?Y.toStringTag:void 0;function se(e){return e==null?e===void 0?eo:qr:ft&&ft in Object(e)?Yr(e):Fr(e)}function ae(e){return e!=null&&typeof e=="object"}var to="[object Arguments]";function wt(e){return ae(e)&&se(e)==to}var Tn=Object.prototype,no=Tn.hasOwnProperty,ro=Tn.propertyIsEnumerable,oo=wt(function(){return arguments}())?wt:function(e){return ae(e)&&no.call(e,"callee")&&!ro.call(e,"callee")};const Cn=oo;var ao=Array.isArray;const Z=ao;function so(){return!1}var _n=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ht=_n&&typeof module=="object"&&module&&!module.nodeType&&module,io=ht&&ht.exports===_n,bt=io?z.Buffer:void 0,co=bt?bt.isBuffer:void 0,uo=co||so;const Me=uo;var lo=9007199254740991,mo=/^(?:0|[1-9]\d*)$/;function Pn(e,t){var n=typeof e;return t=t??lo,!!t&&(n=="number"||n!="symbol"&&mo.test(e))&&e>-1&&e%1==0&&e<t}var po=9007199254740991;function st(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=po}var go="[object Arguments]",fo="[object Array]",wo="[object Boolean]",ho="[object Date]",bo="[object Error]",yo="[object Function]",Do="[object Map]",Ao="[object Number]",vo="[object Object]",To="[object RegExp]",Co="[object Set]",_o="[object String]",Po="[object WeakMap]",Io="[object ArrayBuffer]",Go="[object DataView]",So="[object Float32Array]",ko="[object Float64Array]",xo="[object Int8Array]",Oo="[object Int16Array]",Lo="[object Int32Array]",Mo="[object Uint8Array]",Uo="[object Uint8ClampedArray]",Bo="[object Uint16Array]",Ro="[object Uint32Array]",P={};P[So]=P[ko]=P[xo]=P[Oo]=P[Lo]=P[Mo]=P[Uo]=P[Bo]=P[Ro]=!0;P[go]=P[fo]=P[Io]=P[wo]=P[Go]=P[ho]=P[bo]=P[yo]=P[Do]=P[Ao]=P[vo]=P[To]=P[Co]=P[_o]=P[Po]=!1;function No(e){return ae(e)&&st(e.length)&&!!P[se(e)]}function $o(e){return function(t){return e(t)}}var In=typeof exports=="object"&&exports&&!exports.nodeType&&exports,de=In&&typeof module=="object"&&module&&!module.nodeType&&module,Zo=de&&de.exports===In,Ee=Zo&&An.process,jo=function(){try{var e=de&&de.require&&de.require("util").types;return e||Ee&&Ee.binding&&Ee.binding("util")}catch{}}();const yt=jo;var Dt=yt&&yt.isTypedArray,Eo=Dt?$o(Dt):No;const it=Eo;var Ko=Object.prototype,zo=Ko.hasOwnProperty;function Wo(e,t){var n=Z(e),r=!n&&Cn(e),a=!n&&!r&&Me(e),s=!n&&!r&&!a&&it(e),i=n||r||a||s,c=i?Er(e.length,String):[],g=c.length;for(var l in e)(t||zo.call(e,l))&&!(i&&(l=="length"||a&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Pn(l,g)))&&c.push(l);return c}var Xo=Object.prototype;function Vo(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Xo;return e===n}function Gn(e,t){return function(n){return e(t(n))}}var Ho=Gn(Object.keys,Object);const Yo=Ho;var Jo=Object.prototype,Qo=Jo.hasOwnProperty;function Fo(e){if(!Vo(e))return Yo(e);var t=[];for(var n in Object(e))Qo.call(e,n)&&n!="constructor"&&t.push(n);return t}var qo="[object AsyncFunction]",ea="[object Function]",ta="[object GeneratorFunction]",na="[object Proxy]";function ct(e){if(!be(e))return!1;var t=se(e);return t==ea||t==ta||t==qo||t==na}function ra(e){return e!=null&&st(e.length)&&!ct(e)}function ut(e){return ra(e)?Wo(e):Fo(e)}function oa(e,t){return e&&jr(e,t,ut)}function aa(){this.__data__=[],this.size=0}function Sn(e,t){return e===t||e!==e&&t!==t}function Re(e,t){for(var n=e.length;n--;)if(Sn(e[n][0],t))return n;return-1}var sa=Array.prototype,ia=sa.splice;function ca(e){var t=this.__data__,n=Re(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ia.call(t,n,1),--this.size,!0}function ua(e){var t=this.__data__,n=Re(t,e);return n<0?void 0:t[n][1]}function la(e){return Re(this.__data__,e)>-1}function da(e,t){var n=this.__data__,r=Re(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function W(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}W.prototype.clear=aa;W.prototype.delete=ca;W.prototype.get=ua;W.prototype.has=la;W.prototype.set=da;function ma(){this.__data__=new W,this.size=0}function pa(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ga(e){return this.__data__.get(e)}function fa(e){return this.__data__.has(e)}var wa=z["__core-js_shared__"];const Ke=wa;var At=function(){var e=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ha(e){return!!At&&At in e}var ba=Function.prototype,ya=ba.toString;function ne(e){if(e!=null){try{return ya.call(e)}catch{}try{return e+""}catch{}}return""}var Da=/[\\^$.*+?()[\]{}|]/g,Aa=/^\[object .+?Constructor\]$/,va=Function.prototype,Ta=Object.prototype,Ca=va.toString,_a=Ta.hasOwnProperty,Pa=RegExp("^"+Ca.call(_a).replace(Da,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ia(e){if(!be(e)||ha(e))return!1;var t=ct(e)?Pa:Aa;return t.test(ne(e))}function Ga(e,t){return e==null?void 0:e[t]}function ie(e,t){var n=Ga(e,t);return Ia(n)?n:void 0}var Sa=ie(z,"Map");const pe=Sa;var ka=ie(Object,"create");const ge=ka;function xa(){this.__data__=ge?ge(null):{},this.size=0}function Oa(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var La="__lodash_hash_undefined__",Ma=Object.prototype,Ua=Ma.hasOwnProperty;function Ba(e){var t=this.__data__;if(ge){var n=t[e];return n===La?void 0:n}return Ua.call(t,e)?t[e]:void 0}var Ra=Object.prototype,Na=Ra.hasOwnProperty;function $a(e){var t=this.__data__;return ge?t[e]!==void 0:Na.call(t,e)}var Za="__lodash_hash_undefined__";function ja(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ge&&t===void 0?Za:t,this}function te(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}te.prototype.clear=xa;te.prototype.delete=Oa;te.prototype.get=Ba;te.prototype.has=$a;te.prototype.set=ja;function Ea(){this.size=0,this.__data__={hash:new te,map:new(pe||W),string:new te}}function Ka(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ne(e,t){var n=e.__data__;return Ka(t)?n[typeof t=="string"?"string":"hash"]:n.map}function za(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t}function Wa(e){return Ne(this,e).get(e)}function Xa(e){return Ne(this,e).has(e)}function Va(e,t){var n=Ne(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function X(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}X.prototype.clear=Ea;X.prototype.delete=za;X.prototype.get=Wa;X.prototype.has=Xa;X.prototype.set=Va;var Ha=200;function Ya(e,t){var n=this.__data__;if(n instanceof W){var r=n.__data__;if(!pe||r.length<Ha-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new X(r)}return n.set(e,t),this.size=n.size,this}function K(e){var t=this.__data__=new W(e);this.size=t.size}K.prototype.clear=ma;K.prototype.delete=pa;K.prototype.get=ga;K.prototype.has=fa;K.prototype.set=Ya;var Ja="__lodash_hash_undefined__";function Qa(e){return this.__data__.set(e,Ja),this}function Fa(e){return this.__data__.has(e)}function Ue(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new X;++t<n;)this.add(e[t])}Ue.prototype.add=Ue.prototype.push=Qa;Ue.prototype.has=Fa;function qa(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function es(e,t){return e.has(t)}var ts=1,ns=2;function kn(e,t,n,r,a,s){var i=n&ts,c=e.length,g=t.length;if(c!=g&&!(i&&g>c))return!1;var l=s.get(e),w=s.get(t);if(l&&w)return l==t&&w==e;var m=-1,d=!0,h=n&ns?new Ue:void 0;for(s.set(e,t),s.set(t,e);++m<c;){var y=e[m],b=t[m];if(r)var A=i?r(b,y,m,t,e,s):r(y,b,m,e,t,s);if(A!==void 0){if(A)continue;d=!1;break}if(h){if(!qa(t,function(v,G){if(!es(h,G)&&(y===v||a(y,v,n,r,s)))return h.push(G)})){d=!1;break}}else if(!(y===b||a(y,b,n,r,s))){d=!1;break}}return s.delete(e),s.delete(t),d}var rs=z.Uint8Array;const vt=rs;function os(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}function as(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var ss=1,is=2,cs="[object Boolean]",us="[object Date]",ls="[object Error]",ds="[object Map]",ms="[object Number]",ps="[object RegExp]",gs="[object Set]",fs="[object String]",ws="[object Symbol]",hs="[object ArrayBuffer]",bs="[object DataView]",Tt=Y?Y.prototype:void 0,ze=Tt?Tt.valueOf:void 0;function ys(e,t,n,r,a,s,i){switch(n){case bs:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hs:return!(e.byteLength!=t.byteLength||!s(new vt(e),new vt(t)));case cs:case us:case ms:return Sn(+e,+t);case ls:return e.name==t.name&&e.message==t.message;case ps:case fs:return e==t+"";case ds:var c=os;case gs:var g=r&ss;if(c||(c=as),e.size!=t.size&&!g)return!1;var l=i.get(e);if(l)return l==t;r|=is,i.set(e,t);var w=kn(c(e),c(t),r,a,s,i);return i.delete(e),w;case ws:if(ze)return ze.call(e)==ze.call(t)}return!1}function Ds(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function As(e,t,n){var r=t(e);return Z(e)?r:Ds(r,n(e))}function vs(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var i=e[n];t(i,n,e)&&(s[a++]=i)}return s}function Ts(){return[]}var Cs=Object.prototype,_s=Cs.propertyIsEnumerable,Ct=Object.getOwnPropertySymbols,Ps=Ct?function(e){return e==null?[]:(e=Object(e),vs(Ct(e),function(t){return _s.call(e,t)}))}:Ts;const Is=Ps;function _t(e){return As(e,ut,Is)}var Gs=1,Ss=Object.prototype,ks=Ss.hasOwnProperty;function xs(e,t,n,r,a,s){var i=n&Gs,c=_t(e),g=c.length,l=_t(t),w=l.length;if(g!=w&&!i)return!1;for(var m=g;m--;){var d=c[m];if(!(i?d in t:ks.call(t,d)))return!1}var h=s.get(e),y=s.get(t);if(h&&y)return h==t&&y==e;var b=!0;s.set(e,t),s.set(t,e);for(var A=i;++m<g;){d=c[m];var v=e[d],G=t[d];if(r)var L=i?r(G,v,d,t,e,s):r(v,G,d,e,t,s);if(!(L===void 0?v===G||a(v,G,n,r,s):L)){b=!1;break}A||(A=d=="constructor")}if(b&&!A){var T=e.constructor,C=t.constructor;T!=C&&"constructor"in e&&"constructor"in t&&!(typeof T=="function"&&T instanceof T&&typeof C=="function"&&C instanceof C)&&(b=!1)}return s.delete(e),s.delete(t),b}var Os=ie(z,"DataView");const Xe=Os;var Ls=ie(z,"Promise");const Ve=Ls;var Ms=ie(z,"Set");const He=Ms;var Us=ie(z,"WeakMap");const Ye=Us;var Pt="[object Map]",Bs="[object Object]",It="[object Promise]",Gt="[object Set]",St="[object WeakMap]",kt="[object DataView]",Rs=ne(Xe),Ns=ne(pe),$s=ne(Ve),Zs=ne(He),js=ne(Ye),Q=se;(Xe&&Q(new Xe(new ArrayBuffer(1)))!=kt||pe&&Q(new pe)!=Pt||Ve&&Q(Ve.resolve())!=It||He&&Q(new He)!=Gt||Ye&&Q(new Ye)!=St)&&(Q=function(e){var t=se(e),n=t==Bs?e.constructor:void 0,r=n?ne(n):"";if(r)switch(r){case Rs:return kt;case Ns:return Pt;case $s:return It;case Zs:return Gt;case js:return St}return t});const xt=Q;var Es=1,Ot="[object Arguments]",Lt="[object Array]",Pe="[object Object]",Ks=Object.prototype,Mt=Ks.hasOwnProperty;function zs(e,t,n,r,a,s){var i=Z(e),c=Z(t),g=i?Lt:xt(e),l=c?Lt:xt(t);g=g==Ot?Pe:g,l=l==Ot?Pe:l;var w=g==Pe,m=l==Pe,d=g==l;if(d&&Me(e)){if(!Me(t))return!1;i=!0,w=!1}if(d&&!w)return s||(s=new K),i||it(e)?kn(e,t,n,r,a,s):ys(e,t,g,n,r,a,s);if(!(n&Es)){var h=w&&Mt.call(e,"__wrapped__"),y=m&&Mt.call(t,"__wrapped__");if(h||y){var b=h?e.value():e,A=y?t.value():t;return s||(s=new K),a(b,A,n,r,s)}}return d?(s||(s=new K),xs(e,t,n,r,a,s)):!1}function lt(e,t,n,r,a){return e===t?!0:e==null||t==null||!ae(e)&&!ae(t)?e!==e&&t!==t:zs(e,t,n,r,lt,a)}var Ws=1,Xs=2;function Vs(e,t,n,r){var a=n.length,s=a,i=!r;if(e==null)return!s;for(e=Object(e);a--;){var c=n[a];if(i&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){c=n[a];var g=c[0],l=e[g],w=c[1];if(i&&c[2]){if(l===void 0&&!(g in e))return!1}else{var m=new K;if(r)var d=r(l,w,g,e,t,m);if(!(d===void 0?lt(w,l,Ws|Xs,r,m):d))return!1}}return!0}function xn(e){return e===e&&!be(e)}function Hs(e){for(var t=ut(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,xn(a)]}return t}function On(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function Ys(e){var t=Hs(e);return t.length==1&&t[0][2]?On(t[0][0],t[0][1]):function(n){return n===e||Vs(n,e,t)}}var Js="[object Symbol]";function dt(e){return typeof e=="symbol"||ae(e)&&se(e)==Js}var Qs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fs=/^\w*$/;function mt(e,t){if(Z(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||dt(e)?!0:Fs.test(e)||!Qs.test(e)||t!=null&&e in Object(t)}var qs="Expected a function";function pt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(qs);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var i=e.apply(this,r);return n.cache=s.set(a,i)||s,i};return n.cache=new(pt.Cache||X),n}pt.Cache=X;var ei=500;function ti(e){var t=pt(e,function(r){return n.size===ei&&n.clear(),r}),n=t.cache;return t}var ni=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ri=/\\(\\)?/g,oi=ti(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ni,function(n,r,a,s){t.push(a?s.replace(ri,"$1"):r||n)}),t});const ai=oi;function si(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var ii=1/0,Ut=Y?Y.prototype:void 0,Bt=Ut?Ut.toString:void 0;function Ln(e){if(typeof e=="string")return e;if(Z(e))return si(e,Ln)+"";if(dt(e))return Bt?Bt.call(e):"";var t=e+"";return t=="0"&&1/e==-ii?"-0":t}function ye(e){return e==null?"":Ln(e)}function Mn(e,t){return Z(e)?e:mt(e,t)?[e]:ai(ye(e))}var ci=1/0;function $e(e){if(typeof e=="string"||dt(e))return e;var t=e+"";return t=="0"&&1/e==-ci?"-0":t}function Un(e,t){t=Mn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[$e(t[n++])];return n&&n==r?e:void 0}function ui(e,t,n){var r=e==null?void 0:Un(e,t);return r===void 0?n:r}function li(e,t){return e!=null&&t in Object(e)}function di(e,t,n){t=Mn(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var i=$e(t[r]);if(!(s=e!=null&&n(e,i)))break;e=e[i]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&st(a)&&Pn(i,a)&&(Z(e)||Cn(e)))}function mi(e,t){return e!=null&&di(e,t,li)}var pi=1,gi=2;function fi(e,t){return mt(e)&&xn(t)?On($e(e),t):function(n){var r=ui(n,e);return r===void 0&&r===t?mi(n,e):lt(t,r,pi|gi)}}function wi(e){return e}function hi(e){return function(t){return t==null?void 0:t[e]}}function bi(e){return function(t){return Un(t,e)}}function yi(e){return mt(e)?hi($e(e)):bi(e)}function Di(e){return typeof e=="function"?e:e==null?wi:typeof e=="object"?Z(e)?fi(e[0],e[1]):Ys(e):yi(e)}var Ai=Gn(Object.getPrototypeOf,Object);const vi=Ai;function Ti(e,t,n){var r=Z(e),a=r||Me(e)||it(e);if(t=Di(t),n==null){var s=e&&e.constructor;a?n=r?new s:[]:be(e)?n=ct(s)?Nr(vi(e)):{}:n={}}return(a?Br:oa)(e,function(i,c,g){return t(n,i,c,g)}),n}function Ci(e,t,n,r){var a=-1,s=e==null?0:e.length;for(r&&s&&(n=e[++a]);++a<s;)n=t(n,e[a],a,e);return n}function _i(e){return function(t){return e==null?void 0:e[t]}}var Pi={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ii=_i(Pi);const Gi=Ii;var Si=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ki="\\u0300-\\u036f",xi="\\ufe20-\\ufe2f",Oi="\\u20d0-\\u20ff",Li=ki+xi+Oi,Mi="["+Li+"]",Ui=RegExp(Mi,"g");function Bi(e){return e=ye(e),e&&e.replace(Si,Gi).replace(Ui,"")}var Ri=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Ni(e){return e.match(Ri)||[]}var $i=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Zi(e){return $i.test(e)}var Bn="\\ud800-\\udfff",ji="\\u0300-\\u036f",Ei="\\ufe20-\\ufe2f",Ki="\\u20d0-\\u20ff",zi=ji+Ei+Ki,Rn="\\u2700-\\u27bf",Nn="a-z\\xdf-\\xf6\\xf8-\\xff",Wi="\\xac\\xb1\\xd7\\xf7",Xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vi="\\u2000-\\u206f",Hi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$n="A-Z\\xc0-\\xd6\\xd8-\\xde",Yi="\\ufe0e\\ufe0f",Zn=Wi+Xi+Vi+Hi,jn="['’]",Rt="["+Zn+"]",Ji="["+zi+"]",En="\\d+",Qi="["+Rn+"]",Kn="["+Nn+"]",zn="[^"+Bn+Zn+En+Rn+Nn+$n+"]",Fi="\\ud83c[\\udffb-\\udfff]",qi="(?:"+Ji+"|"+Fi+")",ec="[^"+Bn+"]",Wn="(?:\\ud83c[\\udde6-\\uddff]){2}",Xn="[\\ud800-\\udbff][\\udc00-\\udfff]",oe="["+$n+"]",tc="\\u200d",Nt="(?:"+Kn+"|"+zn+")",nc="(?:"+oe+"|"+zn+")",$t="(?:"+jn+"(?:d|ll|m|re|s|t|ve))?",Zt="(?:"+jn+"(?:D|LL|M|RE|S|T|VE))?",Vn=qi+"?",Hn="["+Yi+"]?",rc="(?:"+tc+"(?:"+[ec,Wn,Xn].join("|")+")"+Hn+Vn+")*",oc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ac="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sc=Hn+Vn+rc,ic="(?:"+[Qi,Wn,Xn].join("|")+")"+sc,cc=RegExp([oe+"?"+Kn+"+"+$t+"(?="+[Rt,oe,"$"].join("|")+")",nc+"+"+Zt+"(?="+[Rt,oe+Nt,"$"].join("|")+")",oe+"?"+Nt+"+"+$t,oe+"+"+Zt,ac,oc,En,ic].join("|"),"g");function uc(e){return e.match(cc)||[]}function lc(e,t,n){return e=ye(e),t=n?void 0:t,t===void 0?Zi(e)?uc(e):Ni(e):e.match(t)||[]}var dc="['’]",mc=RegExp(dc,"g");function Yn(e){return function(t){return Ci(lc(Bi(t).replace(mc,"")),e,"")}}var pc=Yn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const gc=pc;function fc(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}function wc(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:fc(e,t,n)}var hc="\\ud800-\\udfff",bc="\\u0300-\\u036f",yc="\\ufe20-\\ufe2f",Dc="\\u20d0-\\u20ff",Ac=bc+yc+Dc,vc="\\ufe0e\\ufe0f",Tc="\\u200d",Cc=RegExp("["+Tc+hc+Ac+vc+"]");function Jn(e){return Cc.test(e)}function _c(e){return e.split("")}var Qn="\\ud800-\\udfff",Pc="\\u0300-\\u036f",Ic="\\ufe20-\\ufe2f",Gc="\\u20d0-\\u20ff",Sc=Pc+Ic+Gc,kc="\\ufe0e\\ufe0f",xc="["+Qn+"]",Je="["+Sc+"]",Qe="\\ud83c[\\udffb-\\udfff]",Oc="(?:"+Je+"|"+Qe+")",Fn="[^"+Qn+"]",qn="(?:\\ud83c[\\udde6-\\uddff]){2}",er="[\\ud800-\\udbff][\\udc00-\\udfff]",Lc="\\u200d",tr=Oc+"?",nr="["+kc+"]?",Mc="(?:"+Lc+"(?:"+[Fn,qn,er].join("|")+")"+nr+tr+")*",Uc=nr+tr+Mc,Bc="(?:"+[Fn+Je+"?",Je,qn,er,xc].join("|")+")",Rc=RegExp(Qe+"(?="+Qe+")|"+Bc+Uc,"g");function Nc(e){return e.match(Rc)||[]}function $c(e){return Jn(e)?Nc(e):_c(e)}function Zc(e){return function(t){t=ye(t);var n=Jn(t)?$c(t):void 0,r=n?n[0]:t.charAt(0),a=n?wc(n,1).join(""):t.slice(1);return r[e]()+a}}var jc=Zc("toUpperCase");const Ec=jc;function Kc(e){return Ec(ye(e).toLowerCase())}var zc=Yn(function(e,t,n){return t=t.toLowerCase(),e+(n?Kc(t):t)});const Wc=zc,J=(e,t)=>{if(!e||!t||typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const a of n)if(typeof e[a]=="object"&&!J(e[a],t[a])||typeof e[a]!="object"&&e[a]!==t[a])return!1;return!0},me=e=>e&&typeof e=="object"&&!Array.isArray(e),H=(e,...t)=>{if(t.length===0)return e;const n=t.shift();if(me(e)&&me(n))for(const r in n)me(n[r])?(e[r]||Object.assign(e,{[r]:{}}),H(e[r],n[r])):Object.assign(e,{[r]:n[r]});return H(e,...t)},B=(e,t)=>{const n={camel:Wc,snake:gc};return Ti(e,(r,a,s,i)=>{const c=Array.isArray(i)?s:n[t](s);r[c]=me(a)||Array.isArray(a)?B(a,t):a})};class rr extends Error{constructor(t){super(`Call with topic ${t} failed.`),this.name="FetchError"}}class or extends Error{constructor(t){super(`Timeout for call with topic "${t}" expired. Call was aborted.`),this.name="TimeoutReachedError"}}const ar=3*1e3;function V(e,t,n){return new Promise((r,a)=>{const s=i=>{const c=i.data;c.token===t&&c.topic===e&&c.success?r(c.data||!0):a(new rr(e)),window.removeEventListener("message",s)};window.addEventListener("message",s),setTimeout(()=>{a(new or(e))},(n==null?void 0:n.timeout)||ar)})}const M=bn(),Xc=3*1e3,jt=5*60*1e3;class Vc{getAppState(){return $(x.GetAppState,M),V(x.GetAppState,M)}async putAppState(t){return $(x.PutAppState,M,t),V(x.PutAppState,M)}async deleteAppState(){return $(x.DeleteAppState,M),V(x.DeleteAppState,M)}getAssetById(t){return $(x.GetAssetById,M,{assetId:t}),V(x.GetAssetById,M)}async postExternalAssets(t){const r=t.filter(a=>a.previewUrl).length>0?jt:Xc;return $(x.PostExternalAssets,M,t),V(x.PostExternalAssets,M,{timeout:r})}getThirdPartyOauth2Tokens(){return $(x.GetThirdPartyOauth2Tokens,M),V(x.GetThirdPartyOauth2Tokens,M,{timeout:jt})}getRefreshedThirdpartyOauth2Tokens(t){return $(x.GetRefreshedThirdpartyOauth2Token,M,{refreshToken:t}),V(x.GetRefreshedThirdpartyOauth2Token,M)}closeApp(){$(x.CloseApp,M)}openAssetChooser(){$(x.OpenAssetChooser,M)}}const Hc=e=>({name:"openAssetChooser",payload:e}),Yc=()=>({name:"closeAssetChooser"}),Jc=({token:e})=>({name:"openAssetViewer",payload:{token:e}}),Qc=()=>({name:"openNavigationManager"}),Fc=()=>({name:"openTemplateChooser"}),qc=()=>({name:"closeTemplateChooser"}),eu=e=>({openAssetChooser:e.openAssetChooser.bind(e),closeAssetChooser:e.closeAssetChooser.bind(e)}),sr="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2xldCByPVtdLHA9W10sYT1bXSxpPVtdLGY9e2xvYWRlZDowLHRvdGFsOjB9O2NvbnN0IG09W107bGV0IGQ9ITE7ZnVuY3Rpb24geSgpe20ubGVuZ3RoPD0wfHxtLnNoaWZ0KCkuc3RhcnQoKX1mdW5jdGlvbiBiKGUsbyl7Y29uc3Qgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7dHJ5e3MudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24obil7Zi5sb2FkZWQrPW4ubG9hZGVkLWlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkLGlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkPW4ubG9hZGVkO2xldCB0PTA7aVtlLmluZGV4XS5mb3JFYWNoKGw9Pnt0Kz1sLmxvYWRlZH0pLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzIixsb2FkZWQ6dCx0b3RhbDplLnRvdGFsLGxlbmd0aENvbXB1dGFibGU6bi5sZW5ndGhDb21wdXRhYmxlLGluZGV4OmUuaW5kZXh9KSxzZWxmLnBvc3RNZXNzYWdlKHtldmVudDoib25Qcm9ncmVzc0FsbCIsbG9hZGVkOmYubG9hZGVkLHRvdGFsOmYudG90YWx9KX19Y2F0Y2h7cy5vbnByb2dyZXNzPWZ1bmN0aW9uKHQpe3NlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzQWxsIixsb2FkZWQ6dC5sb2FkZWQsdG90YWw6dC50b3RhbH0pfX1yZXR1cm4gcy5vcGVuKCJQVVQiLGUudXJsLCEwKSxzLm9ubG9hZD1mdW5jdGlvbigpe2lbZS5pbmRleF1bZS5jaHVua10uZmluaXNoZWQ9ITA7bGV0IG49ITA7Zm9yKGxldCB0PTE7dDxpW2UuaW5kZXhdLmxlbmd0aDt0KyspaVtlLmluZGV4XVt0XS5maW5pc2hlZHx8KG49ITEpO2lmKG4pe3JbZS5pbmRleF0uZmluaXNoZWQ9ITA7Y29uc3QgdD1uZXcgWE1MSHR0cFJlcXVlc3Q7dC5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvcHJvZ3Jlc3NgLCEwKSx0LnNldFJlcXVlc3RIZWFkZXIoImNvbnRlbnQtdHlwZSIsImFwcGxpY2F0aW9uL2pzb24iKSx0Lm9ubG9hZD1mdW5jdGlvbigpe2xldCBsO3RyeXtsPUpTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoe2w9e319bC5ldmVudD0ib25Eb25lIixsLmluZGV4PWUuaW5kZXgsc2VsZi5wb3N0TWVzc2FnZShsKSx4KCl9LHQuc2VuZChKU09OLnN0cmluZ2lmeShlKSl9eSgpfSx7c3RhcnQoKXtzLnNlbmQobyl9fX1mdW5jdGlvbiBOKCl7Y29uc3QgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvaW5pdGAsITApLGUuc2V0UmVxdWVzdEhlYWRlcigiY29udGVudC10eXBlIiwiYXBwbGljYXRpb24vanNvbiIpLGUub25sb2FkPWZ1bmN0aW9uKCl7bGV0IG87dHJ5e289SlNPTi5wYXJzZShlLnJlc3BvbnNlVGV4dCl9Y2F0Y2h7bz17c3VjY2VzczohMX19aWYoIW8uc3VjY2Vzc3x8IShvLmZpbGVzJiZvLmZpbGVzLmxlbmd0aD4wKSl7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmFpbCJ9KTtyZXR1cm59cD1wLmNvbmNhdChvLmZpbGVzKSxkfHwoZD0hMCx4KCkpfSxlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2ZpbGVzOmF9KSl9ZnVuY3Rpb24geCgpe2xldCBlPSExO2ZvcihsZXQgbz0wO288ci5sZW5ndGg7bysrKXtjb25zdCBzPXJbb107IWUmJiFzLmZpbmlzaGVkJiYoZT0hMCxrKG8scltvXSxwW29dKSl9ZXx8UCgpfWZ1bmN0aW9uIGsoZSxvLHMpe2lmKHR5cGVvZiBzIT0ib2JqZWN0Iil7UyhlLG8se30pO3JldHVybn1pZighcy5zdWNjZXNzKXtTKGUsbyxzKTtyZXR1cm59aVtlXT1bXTtjb25zdCBuPW8sdD0xNSoxMDI0KjEwMjQsbD1uLnNpemU7bGV0IHU9MCxjPXQsaD0xO2Zvcig7dTxsOyl7Y29uc3QgZz1uLnNsaWNlKHUsYyk7aVtlXVtoXT17ZmluaXNoZWQ6ITEsbG9hZGVkOjB9LG0ucHVzaChiKHtpbmRleDplLHN0YXJ0OnUsdXBsb2FkOnMudXBsb2FkLG9iamVjdDpzLm9iamVjdCx1cmw6cy51cGxvYWQudXJsc1toXSxtb3JlOmM8bCxlbmQ6TWF0aC5taW4oYyxsLTEpLHRvdGFsOmwsY2h1bms6aH0sZykpLHU9YyxjPXUrdCxoKyt9Zm9yKGxldCBnPTA7Zzw0O2crKyl5KCl9ZnVuY3Rpb24gUyhlLG8scyl7Y29uc3Qgbj0ocz09bnVsbD92b2lkIDA6cy5lcnJvcik/PyJVbmFibGUgdG8gcHJvY2VzcyBmaWxlLiI7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmlsZUZhaWwiLGluZGV4OmUsZmlsZTpvLGZpbGVfbWV0YWRhdGE6cyxlcnJvcjpufSksZD0hMSxvLmZpbmlzaGVkPSEwLHgoKX1mdW5jdGlvbiBQKCl7cj1bXSxwPVtdLGE9W10saT1bXSxmPXtsb2FkZWQ6MCx0b3RhbDowfSxkPSExLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvbkRvbmVBbGwifSl9c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7YT1bXTtmb3IobGV0IG89MDtvPGUuZGF0YS5maWxlcy5sZW5ndGg7bysrKXtjb25zdCBzPWUuZGF0YS5maWxlc1tvXTtsZXQgbj17bmFtZTpzLm5hbWUsc2l6ZTpzLnNpemUsdHlwZTpzLnR5cGV9O3R5cGVvZiBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZT09ImZ1bmN0aW9uIiYmKG4ubmFtZT1uLm5hbWUubm9ybWFsaXplKCJORkMiKSksZi50b3RhbCs9cy5zaXplLGUuZGF0YS5mb3JtRGF0YSYmKG49ey4uLm4sLi4uZS5kYXRhLmZvcm1EYXRhW29dfSksci5wdXNoKHMpLGEucHVzaChuKX1OKCl9fSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBsb2FkLndvcmtlci05N2NmNDgzYi5qcy5tYXAK",Et=typeof window<"u"&&window.Blob&&new Blob([atob(sr)],{type:"text/javascript;charset=utf-8"});function tu(){let e;try{if(e=Et&&(window.URL||window.webkitURL).createObjectURL(Et),!e)throw"";return new Worker(e)}catch{return new Worker("data:application/javascript;base64,"+sr)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const ir=e=>{const t=f.useRef([]),[n,r]=f.useState(!1),{onUploadProgress:a,onUploadProgressAll:s,onUploadDone:i,onUploadDoneAll:c,onUploadFail:g,onUploadFileFail:l}=e??{},w=f.useRef();f.useEffect(()=>{const T=new tu;return w.current=T,T.addEventListener("message",C=>{switch(C.data.event){case"onProgress":m(C);break;case"onProgressAll":d(C);break;case"onDone":h(C);break;case"onDoneAll":y();break;case"onFail":b();break;case"onFileFail":A(C);break;default:throw new Error(`${C.data.event} is not handled`)}}),()=>{T.terminate()}},[]);const m=T=>{a==null||a(T)},d=T=>{s==null||s(T)},h=T=>{i==null||i(T),t.current=[...t.current,T.data]},y=()=>{c==null||c(t.current),r(!0)},b=()=>{throw g==null||g(),new Error("File upload failed")},A=T=>{l==null||l(T)},v=T=>{const C=[];return T instanceof File&&C.push(T),T instanceof FileList&&C.push(...Array.from(T)),C},G=()=>{r(!1),t.current=[]};return[T=>{G();const C=v(T);if(C.length===0)return;const re={files:C};w!=null&&w.current&&w.current.postMessage(re)},{results:t.current,doneAll:n}]},nu=async(e,t,n)=>{const{result:r}=await Dn.post("/api/asset",{file_id:e,project_id:t,set_id:n});return{...r.data,...ru(r.data)}},ru=e=>({id:e.id,objectType:e.object_type,extension:e.ext,creatorName:e.creator_name,externalUrl:e.external_url,genericUrl:e.generic_url,previewUrl:e.preview_url,originUrl:e.file_origin_url,fileName:e.file_name,fileSize:e.file_size,fileSizeHumanReadable:e.file_size_formatted,height:e.height,width:e.width,projectId:e.project_id,status:e.status,title:e.title,fileId:e.file_id,token:e.token}),ou=e=>{var re,De,Ae,ve,Te;const t=f.useRef([]),n=f.useRef([]),[r,a]=f.useState(!1),{onUploadProgress:s,onUploadProgressAll:i,onUploadDone:c,onUploadDoneAll:g,onUploadFail:l,onUploadAssetFail:w}=e??{},m=(Te=(ve=(Ae=(De=(re=window.application)==null?void 0:re.sandbox)==null?void 0:De.config)==null?void 0:Ae.context)==null?void 0:ve.project)==null?void 0:Te.id,d=R=>{s==null||s(R)},h=R=>{i==null||i(R)},y=async R=>{const Ce=L(R.data.file_id);n.current.push(Ce),c==null||c(R),t.current=[...t.current,await Ce]},b=async()=>{await Promise.all(n.current),g==null||g(t.current),a(!0)},A=()=>{l==null||l()},v=R=>{w==null||w(R)},G=()=>{a(!1),t.current=[]},L=async R=>await nu(R,m),[T]=ir({onUploadProgress:d,onUploadProgressAll:h,onUploadDone:y,onUploadDoneAll:b,onUploadFail:A,onUploadFileFail:v});return[R=>{G(),T(R)},{results:t.current,doneAll:r}]},au=e=>({open:async({token:n})=>{e.openAssetViewer(n)}}),su=e=>{const t=e.getBlockId(),[n,r]=f.useState({}),a=l=>{l.blockId===t&&!J(l.blockAssets,l.prevBlockAssets)&&r(l.blockAssets)};f.useEffect(()=>{let l=!0;return t&&((async()=>{const m=await e.getBlockAssets();l&&r(m)})(),window.emitter.on("AppBridge:BlockAssetsUpdated",a)),()=>{l=!1,window.emitter.off("AppBridge:BlockAssetsUpdated",a)}},[e]);const s=async()=>{window.emitter.emit("AppBridge:BlockAssetsUpdated",{blockId:t,blockAssets:await e.getBlockAssets(),prevBlockAssets:{...n}})};return{blockAssets:n,addAssetIdsToKey:async(l,w)=>{await e.addAssetIdsToBlockAssetKey(l,w),s()},deleteAssetIdsFromKey:async(l,w)=>{await e.deleteAssetIdsFromBlockAssetKey(l,w),s()},updateAssetIdsFromKey:async(l,w)=>{var h;const d=((h=(await e.getBlockAssets())[l])==null?void 0:h.map(y=>y.id))??[];try{await e.deleteAssetIdsFromBlockAssetKey(l,d),await e.addAssetIdsToBlockAssetKey(l,w)}catch(y){console.error(y)}s()}}},iu=e=>{const t=e.getBlockId(),[n,r]=f.useState({}),a=l=>{l.blockId===t&&!J(l.blockTemplates,l.prevBlockTemplates)&&r(l.blockTemplates)};f.useEffect(()=>{let l=!0;return t&&((async()=>{const m=await e.getBlockTemplates();l&&r(m)})(),window.emitter.on("AppBridge:BlockTemplatesUpdated",a)),()=>{l=!1,window.emitter.off("AppBridge:BlockTemplatesUpdated",a)}},[e]);const s=async()=>{window.emitter.emit("AppBridge:BlockTemplatesUpdated",{blockId:t,blockTemplates:await e.getBlockTemplates(),prevBlockTemplates:{...n}})};return{blockTemplates:n,addTemplateIdsToKey:async(l,w)=>{await e.addTemplateIdsToBlockTemplateKey(l,w),s()},deleteTemplateIdsFromKey:async(l,w)=>{await e.deleteTemplateIdsFromBlockTemplateKey(l,w),s()},updateTemplateIdsFromKey:async(l,w)=>{var h;const d=((h=(await e.getBlockTemplates())[l])==null?void 0:h.map(y=>y.id))??[];try{await e.deleteTemplateIdsFromBlockTemplateKey(l,d),await e.addTemplateIdsToBlockTemplateKey(l,w)}catch(y){console.error(y)}s()}}},cu=e=>{const t=e.getBlockId(),[n,r]=f.useState(structuredClone(window.blockSettings[t]));return f.useEffect(()=>{const s=i=>{i.blockId===t&&r({...i.blockSettings})};return window.emitter.on("AppBridge:BlockSettingsUpdated",s),()=>{window.emitter.off("AppBridge:BlockSettingsUpdated",s)}},[t]),[n,async s=>{try{await e.updateBlockSettings(s),window.emitter.emit("AppBridge:BlockSettingsUpdated",{blockId:t,blockSettings:H(n,s)})}catch(i){console.error(i)}}]},uu={enabled:!1,label:"",url:""},lu=(e,t={enabled:!0})=>{const[n,r]=f.useState(null),[a,s]=f.useState(!0);return f.useEffect(()=>{const i=async()=>{s(!0),r(await e.getBrandportalLink()),s(!1)};t.enabled&&i().catch(console.error)},[e,t.enabled]),f.useEffect(()=>{const i=c=>{r(g=>c.action==="update"?{...uu,...g,...c.brandportalLink}:g)};return window.emitter.on("AppBridge:GuidelineBrandportalLink:Action",i),()=>{window.emitter.off("AppBridge:GuidelineBrandportalLink:Action",i)}},[e]),{brandportalLink:n,isLoading:a}};var cr=(e=>(e.Init="init",e.Started="started",e.Pending="pending",e.Ready="ready",e.Error="error",e))(cr||{});const du=e=>{const t=f.useRef(null),[n,r]=f.useState("init"),[a,s]=f.useState(null),i=async(l,w)=>{try{r("started");const m=await e.getBulkDownloadToken(l,w);s(null),c(m)}catch(m){r("error"),console.error(m)}},c=async l=>{try{const w=await e.getBulkDownloadByToken(l);w.downloadUrl?(s(w.downloadUrl),r("ready")):(r("pending"),t.current=g(w.signature))}catch(w){r("error"),console.error(w)}},g=l=>window.setInterval(async()=>{try{const w=await e.getBulkDownloadBySignature(l);w.downloadUrl&&(r("ready"),s(w.downloadUrl),t.current&&clearInterval(t.current))}catch(w){r("error"),console.error(w),t.current&&clearInterval(t.current)}},2500);return{generateBulkDownload:i,status:n,downloadUrl:a}},ur=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,mu=(e,t,n={enabled:!0})=>{const[r,a]=f.useState(new Map([])),[s,i]=f.useState(!0),c=f.useCallback(async()=>{i(!0),a(await fu(e,t)),i(!1)},[e,t]);return f.useEffect(()=>{n.enabled&&c()},[n.enabled,c]),f.useEffect(()=>{const g=m=>{for(const d of m.payload.pageIds)if(r.has(d)){c();break}},l=m=>{!r.has(m.documentPage.id)||!m.categoryId||a(k.produce(d=>{pu(d,m.documentPage,m.position)}))},w=({action:m,documentPage:d})=>{m==="update"&&r.has(d.id)||m==="add"&&d.categoryId===t?c():(m==="delete"||m==="move")&&r.has(d.id)&&a(k.produce(h=>{m==="move"?gu(h,d):m==="delete"&&h.delete(d.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",g),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",l),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",g),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",l)}},[t,c,r]),{documentPages:Array.from(r.values()),refetch:c,isLoading:s}},pu=(e,t,n)=>{if(!t.sort||!n)return e;const r=e.get(t.id),a=[...e.values()].sort(ur);e.clear();let s=1,i=!0;for(const c of a)c.id!==t.id&&(r&&s===n&&(e.set(t.id,{...r,sort:n}),i=!1),e.set(c.id,{...c,sort:s}),s++);return r&&i&&e.set(t.id,{...r,sort:s}),e},gu=(e,t)=>{const n=[...e.values()];let r=!0;e.clear();for(const a of n)a.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),r=!1),e.set(a.id,a));return r&&e.set(t.id,t),e},fu=async(e,t)=>{const n=await e.getDocumentPagesByDocumentCategoryId(t);return new Map([...n].sort(ur).map(r=>[r.id,r]))},wu=(e,t)=>{const n=e.getBlockId(),[r,a]=f.useState([]),s=m=>{m.blockId===n&&!J(m.colorPalettes,m.prevColorPalettes)&&a(m.colorPalettes)};f.useEffect(()=>{let m=!0;return n&&((async()=>{const h=await e.getColorPalettesWithColors(t);m&&a(h)})(),window.emitter.on("AppBridge:ColorPalettesUpdated",s)),()=>{m=!1,window.emitter.off("AppBridge:ColorPalettesUpdated",s)}},[e,n,t]);const i=async()=>{window.emitter.emit("AppBridge:ColorPalettesUpdated",{blockId:n,colorPalettes:await e.getColorPalettesWithColors(t),prevColorPalettes:{...r}})};return{colorPalettes:r,createColorPalette:async m=>{await e.createColorPalette(m),i()},updateColorPalette:async(m,d)=>{await e.updateColorPalette(m,d),i()},deleteColorPalette:async m=>{await e.deleteColorPalette(m),i()},downloadColorKit:m=>e.downloadColorKit(m)}},hu=(e,t)=>{const n=e.getBlockId(),[r,a]=f.useState([]);f.useEffect(()=>{let l=!0;const w=m=>{if(m.blockId===n&&!J(m.colors,m.prevColors)){const d=[...m.colors].sort((h,y)=>h.sort-y.sort);a(d)}};return n&&((async()=>{const d=await e.getColorsByColorPaletteId(t);if(l){const h=[...d].sort((y,b)=>y.sort-b.sort);a(h)}})(),window.emitter.on("AppBridge:ColorsUpdated",w)),()=>{l=!1,window.emitter.off("AppBridge:ColorsUpdated",w)}},[e,n,t]);const s=async()=>{window.emitter.emit("AppBridge:ColorsUpdated",{blockId:n,colors:await e.getColorsByColorPaletteId(t),prevColors:{...r}})};return{colorsByPaletteId:r,createColor:async l=>{await e.createColor(l),s()},updateColor:async(l,w)=>{await e.updateColor(l,w),s()},deleteColor:async l=>{await e.deleteColor(l),s()}}},bu=(e,t={enabled:!0})=>{const[n,r]=f.useState(null),[a,s]=f.useState(!0),i=f.useCallback(async()=>{s(!0),r(await e.getCoverPage()),s(!1)},[e]);return f.useEffect(()=>{t.enabled&&i().catch(console.error)},[e,i,t.enabled]),f.useEffect(()=>{const c=g=>{if(g.action==="add"){i().catch(console.error);return}r(l=>g.action==="delete"?null:g.action==="update"&&g.coverPage?{...l,...g.coverPage}:l)};return window.emitter.on("AppBridge:GuidelineCoverPage:Action",c),()=>{window.emitter.off("AppBridge:GuidelineCoverPage:Action",c)}},[e,i]),{coverPage:n,isLoading:a}},lr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,yu=(e,t,n={enabled:!0})=>{const[r,a]=f.useState(new Map([])),[s,i]=f.useState(!0),c=f.useCallback(async()=>{i(!0),a(await Tu(e,t)),i(!1)},[e,t]);return f.useEffect(()=>{n.enabled&&c()},[c,n.enabled]),f.useEffect(()=>{const g=m=>{r.has(m.documentPage.categoryId)&&a(k.produce(d=>{const h=`${m.action}-page`;return(Kt[h]||Kt.default)(d,m.documentPage)}))},l=m=>{r.has(m.documentCategory.id)&&a(k.produce(d=>{Du(d,m.documentCategory,m.position)}))},w=({action:m,documentCategory:d})=>{m==="update"&&r.has(d.id)||m==="add"&&d.documentId===t?c():m==="delete"&&r.has(d.id)&&a(k.produce(h=>{h.delete(d.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentCategory:Action",w),window.emitter.on("AppBridge:GuidelineDocumentCategory:DocumentPageAction",g),window.emitter.on("AppBridge:GuidelineDocumentCategory:MoveEvent",l),()=>{window.emitter.off("AppBridge:GuidelineDocumentCategory:Action",w),window.emitter.off("AppBridge:GuidelineDocumentCategory:DocumentPageAction",g),window.emitter.off("AppBridge:GuidelineDocumentCategory:MoveEvent",l)}},[r,t,c]),{documentCategories:Array.from(r.values()),refetch:c,isLoading:s}},Du=(e,t,n)=>{if(!t.sort||!n)return e;const r=e.get(t.id),a=[...e.values()].sort(lr);e.clear();let s=1,i=!0;for(const c of a)c.id!==t.id&&(r&&s===n&&(e.set(t.id,{...r,sort:n}),i=!1),e.set(c.id,{...c,sort:s}),s++);return r&&i&&e.set(t.id,{...r,sort:s}),e},Au=(e,t)=>{if(!t.categoryId)return e;const n=e.get(t.categoryId);if(!n)return e;const r={...n,numberOfDocumentPages:n.numberOfDocumentPages+1};return e.set(n.id,r)},vu=(e,t)=>{if(!t.categoryId)return e;const n=e.get(t.categoryId);if(!n)return e;const r={...n,numberOfDocumentPages:n.numberOfDocumentPages-1};return e.set(n.id,r)},Kt={"add-page":Au,"delete-page":vu,default:e=>e},Tu=async(e,t)=>{const n=await e.getDocumentCategoriesByDocumentId(t);return new Map([...n].sort(lr).map(r=>[r.id,r]))},fe=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Cu=(e,t={enabled:!0})=>{const[n,r]=f.useState(new Map([])),[a,s]=f.useState(!0),i=f.useCallback(async()=>{s(!0),r(await Su(e)),s(!1)},[e]);return f.useEffect(()=>{t.enabled&&i()},[t.enabled,i]),f.useEffect(()=>{const c=m=>{r(k.produce(d=>{const h=`${m.action}-document`;return(zt[h]||zt.default)(d,m.document)}))},g=m=>{((m==null?void 0:m.action)==="move"||(m==null?void 0:m.action)==="add")&&n.size>0&&i()},l=m=>{r(k.produce(d=>_u(d,m.document,m.position,m.newGroupId)))},w=m=>{r(k.produce(d=>Pu(d,m.documentGroup,m.position)))};return window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",i),window.emitter.on("AppBridge:GuidelineDocumentGroup:DocumentAction",c),window.emitter.on("AppBridge:GuidelineDocument:Action",g),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",l),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",w),()=>{window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",i),window.emitter.off("AppBridge:GuidelineDocumentGroup:DocumentAction",c),window.emitter.off("AppBridge:GuidelineDocument:Action",g),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",l),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",w)}},[n.size,i]),{documentGroups:Array.from(n.values()),refetch:i,isLoading:a}},_u=(e,t,n,r)=>{if(r||!t.sort)return e;const a=t.sort,s=[...e.values()].sort(fe),i=[];e.clear();for(const g of s){const l=g.sort??0;let w=0;n<l?w=a>l||a===0?1:0:w=a<=l?-1:0,i.push({...g,sort:l+w})}const c=[...i].sort(fe);for(const g of c)e.set(g.id,g);return e},Pu=(e,t,n)=>{if(!t.sort)return e;const r=t.sort,a=[...e.values()].sort(fe),s=[];e.clear();for(const c of a){if(c.id===t.id){s.push({...c,sort:n});continue}const g=c.sort??0;let l=0;n<=g&&(l=r>g?1:0),s.push({...c,sort:g+l})}const i=[...s].sort(fe);for(const c of i)e.set(c.id,c);return e},Iu=(e,t)=>{if(!t.documentGroupId)return e;const n=e.get(t.documentGroupId);if(!n)return e;const r={...n,numberOfDocuments:n.numberOfDocuments+1};return e.set(n.id,r)},Gu=(e,t)=>{if(!t.documentGroupId)return e;const n=e.get(t.documentGroupId);if(!n)return e;const r={...n,numberOfDocuments:n.numberOfDocuments-1};return e.set(n.id,r)},zt={"add-document":Iu,"delete-document":Gu,default:e=>e},Su=async e=>{const t=await e.getDocumentGroups();return new Map([...t].sort(fe).map(n=>[n.id,n]))},ku=(e,t)=>{const[n,r]=f.useState(null),[a,s]=f.useState(!0);return f.useEffect(()=>{(async()=>{s(!0),r(await e.getDocumentPageTargets(t)),s(!1)})()},[e,t]),f.useEffect(()=>{const i=c=>{c.payload.pageIds.includes(t)&&r(g=>xu(g,c.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",i),()=>{window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",i)}},[t]),{documentPageTargets:n,isLoading:a}},xu=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(n=>({...n,target:{...n.target,checked:t.includes(n.target.id)}}))},Ou=(e,t)=>{const[n,r]=f.useState([]);return f.useEffect(()=>{(async s=>{r(await e.getDocumentSectionsByDocumentPageId(s))})(t)},[e,t]),{documentSections:n}},Lu=(e,t)=>{const[n,r]=f.useState(null),[a,s]=f.useState(!0);return f.useEffect(()=>{(async()=>{s(!0),r(await e.getDocumentTargets(t)),s(!1)})()},[e,t]),f.useEffect(()=>{const i=c=>{c.payload.documentIds.includes(t)&&r(g=>Mu(g,c.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",i),()=>{window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",i)}},[t]),{documentTargets:n,isLoading:a}},Mu=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(n=>({...n,target:{...n.target,checked:t.includes(n.target.id)}}))},Uu=e=>{const[t,n]=f.useState(e.getEditorState());return f.useEffect(()=>{const r=()=>n(e.getEditorState()),a=new MutationObserver(s=>{for(const i of s)i.attributeName==="class"&&r()});return a.observe(document.body,{attributes:!0}),()=>{a.disconnect()}},[]),t},Bu=({accept:e,multiple:t})=>{const[n,r]=f.useState(null),a=i=>{if(i.target){const c=i.target.files;r(c)}};return[()=>{const i=document.createElement("input");i.type="file",e&&(i.accept=e),i.multiple=!!t,i.addEventListener("change",a),i.dispatchEvent(new MouseEvent("click"))},{selectedFiles:n}]},dr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Ru=(e,t,n={enabled:!0})=>{const[r,a]=f.useState(new Map([])),[s,i]=f.useState(!0),c=f.useCallback(async()=>{i(!0),a(await Ku(e,t)),i(!1)},[e,t]);return f.useEffect(()=>{n.enabled&&c()},[n.enabled,c]),f.useEffect(()=>{const g=d=>{r.has(d.documentPage.documentId)&&a(k.produce(h=>{const y=`${d.action}-page`;return(Ie[y]||Ie.default)(h,d.documentPage)}))},l=d=>{r.has(d.documentCategory.documentId)&&a(k.produce(h=>{const y=`${d.action}-category`;return(Ie[y]||Ie.default)(h,d.documentCategory)}))},w=d=>{!r.has(d.document.id)||d.newGroupId!==t||a(k.produce(h=>Nu(h,d.document,d.position,d.newGroupId)))},m=({action:d,document:h})=>{(d==="update"||d==="move")&&r.has(h.id)||d==="add"&&h.documentGroupId===t?c():d==="delete"&&r.has(h.id)&&a(k.produce(y=>{d==="delete"&&y.delete(h.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",m),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",c),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",g),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",l),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",w),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",m),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",c),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",g),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",l),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",w)}},[t,r,n.enabled,c]),{documents:Array.from(r.values()),refetch:c,isLoading:s}},Nu=(e,t,n,r)=>{if(!t.sort)return e;const a=e.get(t.id),s=[...e.values()].sort(dr);e.clear();let i=1,c=!0;for(const g of s)g.id===t.id||g.documentGroupId!==r||(a&&i===n&&(e.set(t.id,{...a,sort:n}),c=!1),e.set(g.id,{...g,sort:i}),i++);return a&&c&&e.set(t.id,{...a,sort:i}),e},$u=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages+1};return e.set(n.id,r)},Zu=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages-1};return e.set(n.id,r)},ju=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories+1};return e.set(n.id,r)},Eu=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories-1};return e.set(n.id,r)},Ie={"add-page":$u,"delete-page":Zu,"add-category":ju,"delete-category":Eu,default:e=>e},Ku=async(e,t)=>{const n=await e.getDocumentsByDocumentGroupId(t);return new Map([...n].sort(dr).map(r=>[r.id,r]))},zu=e=>{const t=f.useCallback(async p=>{const D=await e.createLink(p);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...D,...p.documentGroupId&&{documentGroupId:p.documentGroupId}},action:"add"}),p.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:D.id,documentGroupId:p.documentGroupId},action:"add"}),D},[e]),n=f.useCallback(async p=>{const D=await e.updateLink(p);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...D,...p.documentGroupId&&{documentGroupId:p.documentGroupId}},action:"update"}),D},[e]),r=f.useCallback(async p=>{await e.deleteLink(p.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:p,action:"delete"}),p.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...p,documentGroupId:p.documentGroupId},action:"delete"})},[e]),a=f.useCallback(async p=>{const D=await e.createLibrary(p);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...D,...p.documentGroupId&&{documentGroupId:p.documentGroupId}},action:"add"}),p.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:D.id,documentGroupId:p.documentGroupId},action:"add"}),D},[e]),s=f.useCallback(async p=>{const D=await e.updateLibrary(p);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...D,...p.documentGroupId&&{documentGroupId:p.documentGroupId}},action:"update"}),D},[e]),i=f.useCallback(async p=>{await e.deleteLibrary(p.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:p,action:"delete"}),p.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...p,documentGroupId:p.documentGroupId},action:"delete"})},[e]),c=f.useCallback(async p=>{const D=await e.createStandardDocument(p);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...D,...p.documentGroupId&&{documentGroupId:p.documentGroupId}},action:"add"}),p.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:D.id,documentGroupId:p.documentGroupId},action:"add"}),D},[e]),g=f.useCallback(async p=>{const D=await e.updateStandardDocument(p);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...D,...p.documentGroupId&&{documentGroupId:p.documentGroupId}},action:"update"}),D},[e]),l=f.useCallback(async p=>{await e.deleteStandardDocument(p.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:p,action:"delete"}),p.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...p,documentGroupId:p.documentGroupId},action:"delete"})},[e]),w=f.useCallback(async p=>{const D=await e.createDocumentGroup(p);return window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:D,action:"add"}),D},[e]),m=f.useCallback(async p=>{const D=await e.updateDocumentGroup(p);window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:D,action:"update"})},[e]),d=f.useCallback(async p=>{await e.deleteDocumentGroup(p.id),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:p,action:"delete"})},[e]),h=f.useCallback(async p=>{const D=await e.createDocumentPage(p);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:D,action:"add"}),p.categoryId&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:D.id,categoryId:p.categoryId},action:"add"}),D},[e]),y=f.useCallback(async p=>{const D=await e.updateDocumentPage(p);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:D,action:"update"}),D},[e]),b=f.useCallback(async p=>{await e.deleteDocumentPage(p.id),window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...p,categoryId:p.categoryId??null},action:"delete"}),p.categoryId?window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{...p,categoryId:p.categoryId},action:"delete"}):window.emitter.emit("AppBridge:GuidelineDocument:DocumentPageAction",{documentPage:p,action:"delete"})},[e]),A=f.useCallback(async({id:p,documentId:D,categoryId:I})=>{const N=await e.duplicateDocumentPage(p);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...N,title:N.name,documentId:D,categoryId:I},action:"add"}),I&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:N.id,categoryId:I},action:"add"}),N},[e]),v=f.useCallback(async p=>{const D=await e.createDocumentCategory(p);return window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:D,action:"add"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:D,action:"add"}),D},[e]),G=f.useCallback(async p=>{const D=await e.updateDocumentCategory(p);window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:D,action:"update"})},[e]),L=f.useCallback(async p=>{await e.deleteDocumentCategory(p.id),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:p,action:"delete"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:p,action:"delete"})},[e]),T=f.useCallback(async p=>{const D=await e.createCoverPage(p);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:D,action:"add"}),D},[e]),C=f.useCallback(async p=>{const D=await e.updateCoverPage(p);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:D,action:"update"}),D},[e]),re=f.useCallback(async p=>{const D={...p.title&&{brandhome_title:p.title},...p.draft!==void 0&&{brandhome_draft:p.draft},...p.hideInNav!==void 0&&{brandhome_hide_in_nav:p.hideInNav}},I=await e.updateLegacyCoverPage(D);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:p,action:"update"}),I},[e]),De=f.useCallback(async()=>{await e.deleteCoverPage(),window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{action:"delete"})},[e]),Ae=f.useCallback(async p=>{const D=await e.updateBrandportalLink(p);return D&&window.emitter.emit("AppBridge:GuidelineBrandportalLink:Action",{brandportalLink:D,action:"update"}),D},[e]),ve=f.useCallback(async(p,D,I)=>{const N="AppBridge:GuidelineDocument:MoveEvent";window.emitter.emit(N,{document:p,position:D,newGroupId:I,action:"movePreview"});const _e=await e.moveDocument(p.id,D,I),j="AppBridge:GuidelineDocument:Action";p.documentGroupId===I?window.emitter.emit(j,{document:{..._e,sort:D},action:"move"}):(window.emitter.emit(j,{document:p,action:"delete"}),window.emitter.emit(j,{document:_e,action:"add"}))},[e]),Te=f.useCallback(async(p,D)=>{const I="AppBridge:GuidelineDocumentGroup:MoveEvent";window.emitter.emit(I,{documentGroup:p,position:D,action:"movePreview"}),await e.moveDocumentGroup(p.id,D),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:{...p,sort:D},action:"update"})},[e]),R=f.useCallback(async(p,D,I)=>{const N="AppBridge:GuidelineDocumentCategory:MoveEvent";window.emitter.emit(N,{documentCategory:p,documentId:D,position:I,action:"movePreview"}),await e.moveDocumentCategory(p.id,D,I),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:{...p,documentId:D,sort:I},action:"update"})},[e]),Ce=f.useCallback(async(p,D,I,N=null)=>{const _e="AppBridge:GuidelineDocumentPage:MoveEvent";window.emitter.emit(_e,{documentPage:p,documentId:D,position:I,categoryId:N,action:"movePreview"});const j=await e.moveDocumentPage(p.id,D,I,N??void 0),je="AppBridge:GuidelineDocumentPage:Action";p.categoryId===N&&p.documentId===D?window.emitter.emit(je,{documentPage:{...j,sort:I??j.sort},action:"move"}):(window.emitter.emit(je,{documentPage:{...p,categoryId:p.categoryId??null},action:"delete"}),window.emitter.emit(je,{documentPage:j,action:"add"}));const Sr=p.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction",kr=j.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction";window.emitter.emit(Sr,{documentPage:p,action:"delete"}),window.emitter.emit(kr,{documentPage:j,action:"add"})},[e]),Ir=f.useCallback(async(p,D)=>{const I=await e.updateDocumentPageTargets(p,D);return window.emitter.emit("AppBridge:GuidelineDocumentPageTargets:Action",{payload:{targets:p,pageIds:D},action:"update"}),I},[e]),Gr=f.useCallback(async(p,D)=>{const I=await e.updateDocumentTargets(p,D);return window.emitter.emit("AppBridge:GuidelineDocumentTargets:Action",{payload:{targets:p,documentIds:D},action:"update"}),I},[e]);return{createLink:t,updateLink:n,deleteLink:r,createDocumentPage:h,updateDocumentPage:y,deleteDocumentPage:b,duplicateDocumentPage:A,moveDocumentPage:Ce,createLibrary:a,updateLibrary:s,deleteLibrary:i,createDocumentCategory:v,updateDocumentCategory:G,deleteDocumentCategory:L,moveDocumentCategory:R,createCoverPage:T,updateCoverPage:C,deleteCoverPage:De,updateLegacyCoverPage:re,moveDocumentGroup:Te,createDocumentGroup:w,updateDocumentGroup:m,deleteDocumentGroup:d,updateBrandportalLink:Ae,createDocument:c,updateDocument:g,deleteDocument:l,moveDocument:ve,updateDocumentPageTargets:Ir,updateDocumentTargets:Gr}},Wu=e=>{const{openNavigationManager:t}=e;return{openNavigationManager:()=>t()}},Xu=(e,t,n)=>{const[r,a]=f.useState(null),[s,i]=f.useState(!0);return f.useEffect(()=>{const g=w=>{a({...w.pageTemplateSettings})};return(async()=>{if(i(!0),t==="cover"){const w=await e.getCoverPageTemplateSettings();a(w)}else if(t==="documentPage")if(n===void 0)console.error("Document ID is required for document page template settings");else{const w=await e.getDocumentPageTemplateSettings(n);a(w)}else if(t==="library")if(n===void 0)console.error("Document ID is required for library template settings");else{const w=await e.getLibraryPageTemplateSettings(n);a(w)}i(!1)})(),window.emitter.on("AppBridge:PageTemplateSettingsUpdated",g),()=>{window.emitter.off("AppBridge:PageTemplateSettingsUpdated",g)}},[e,n,t]),{pageTemplateSettings:r,updatePageTemplateSettings:async g=>{try{if(t==="cover")await e.updateCoverPageTemplateSettings(g);else if(t==="documentPage"){if(n===void 0){console.error("Document ID is required for document page template settings");return}await e.updateDocumentPageTemplateSettings(n,g)}else if(t==="library"){if(n===void 0){console.error("Document ID is required for library template settings");return}await e.updateLibraryPageTemplateSettings(n,g)}window.emitter.emit("AppBridge:PageTemplateSettingsUpdated",{pageTemplateSettings:{...r,...g}})}catch(l){console.error(l)}},isLoading:s}},Vu=e=>{const[t,n]=f.useState(e.getPrivacySettings());return f.useEffect(()=>{const r=a=>n({...t,...a});return window.emitter.on("AppBridge:PrivacySettingsChanged",r),()=>{window.emitter.off("AppBridge:PrivacySettingsChanged",r)}},[t]),t},Hu=e=>{const[t,n]=f.useState(!1);return f.useEffect(()=>{const a=document.querySelector(`.block[data-block="${e.getBlockId()}"]`);if(!a){console.error("Could not find block wrapper:",e.getBlockId());return}a.setAttribute("data-ready",t.toString())},[e,t]),{isReadyForPrint:t,setIsReadyForPrint:a=>{n(a)}}},Yu=(e,t,n,r)=>{const[a,s]=f.useState({}),i=y=>{y.template===t&&y.documentId===n&&y.documentPageId===r&&!J(y.templateAssets,y.prevTemplateAssets)&&s(y.templateAssets)},c=async()=>t==="cover"?await e.getCoverPageTemplateAssets():t==="documentPage"&&r?await e.getDocumentPageTemplateAssets(r):t==="library"&&n?await e.getLibraryPageTemplateAssets(n):{},g=async(y,b)=>{t==="cover"?await e.addAssetIdsToCoverPageTemplateAssetKey(y,b):t==="documentPage"&&r?await e.addAssetIdsToDocumentPageTemplateAssetKey(r,y,b):t==="library"&&n&&await e.addAssetIdsToLibraryPageTemplateAssetKey(n,y,b)},l=async(y,b)=>{t==="cover"?await e.deleteAssetIdsFromCoverPageTemplateAssetKey(y,b):t==="documentPage"&&r?await e.deleteAssetIdsFromDocumentPageTemplateAssetKey(r,y,b):t==="library"&&n&&await e.deleteAssetIdsFromLibraryPageTemplateAssetKey(n,y,b)};f.useEffect(()=>{let y=!0;return t&&((async()=>{const A=await c();y&&s(A)})(),window.emitter.on("AppBridge:TemplateAssetsUpdated",i)),()=>{y=!1,window.emitter.off("AppBridge:TemplateAssetsUpdated",i)}},[e,n,r]);const w=async()=>{window.emitter.emit("AppBridge:TemplateAssetsUpdated",{template:t,documentId:n,documentPageId:r,templateAssets:await c(),prevTemplateAssets:{...a}})};return{templateAssets:a,addAssetIdsToKey:async(y,b)=>{await g(y,b),w()},deleteAssetIdsFromKey:async(y,b)=>{await l(y,b),w()},updateAssetIdsFromKey:async(y,b)=>{var G;const v=((G=(await c())[y])==null?void 0:G.map(L=>L.id))??[];try{await l(y,v),await g(y,b)}catch(L){console.error(L)}w()}}},Ju=e=>{const t=e.getPortalId(),[n,r]=f.useState({}),a=d=>{d.portalId===t&&!J(d.themeAssets,d.prevThemeAssets)&&r(d.themeAssets)},s=async()=>await e.getThemeAssets(),i=async(d,h)=>{await e.addAssetIdsToThemeAssetKey(d,h)},c=async(d,h)=>{await e.deleteAssetIdsFromThemeAssetKey(d,h)};f.useEffect(()=>{let d=!0;return t&&((async()=>{const y=await s();d&&r(y)})(),window.emitter.on("AppBridge:ThemeAssetsUpdated",a)),()=>{d=!1,window.emitter.off("AppBridge:ThemeAssetsUpdated",a)}},[e]);const g=async()=>{window.emitter.emit("AppBridge:ThemeAssetsUpdated",{portalId:t,themeAssets:await s(),prevThemeAssets:{...n}})};return{themeAssets:n,addAssetIdsToKey:async(d,h)=>{await i(d,h),g()},deleteAssetIdsFromKey:async(d,h)=>{await c(d,h),g()},updateAssetIdsFromKey:async(d,h)=>{var A;const b=((A=(await s())[d])==null?void 0:A.map(v=>v.id))??[];try{await c(d,b),await i(d,h)}catch(v){console.error(v)}g()}}},Qu=e=>({openTemplateChooser:e.openTemplateChooser.bind(e),closeTemplateChooser:e.closeTemplateChooser.bind(e)}),mr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Fu=(e,t,n={enabled:!0})=>{const[r,a]=f.useState(new Map([])),[s,i]=f.useState(!0),c=f.useCallback(async()=>{i(!0),a(await tl(e,t)),i(!1)},[e,t]);return f.useEffect(()=>{n.enabled&&c()},[n.enabled,c]),f.useEffect(()=>{const g=m=>{for(const d of m.payload.pageIds)if(r.has(d)){c();break}},l=m=>{!r.has(m.documentPage.id)||m.categoryId||a(k.produce(d=>{qu(d,m.documentPage,m.position)}))},w=({action:m,documentPage:d})=>{m==="update"&&r.has(d.id)||m==="add"&&d.documentId===t&&!d.categoryId?c():(m==="delete"||m==="move")&&r.has(d.id)&&a(k.produce(h=>{m==="move"?el(h,d):m==="delete"&&h.delete(d.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",g),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",l),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",w),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",g),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",l)}},[t,c,r]),{documentPages:Array.from(r.values()),refetch:c,isLoading:s}},qu=(e,t,n)=>{if(!t.sort||!n)return e;const r=e.get(t.id),a=[...e.values()].sort(mr);e.clear();let s=1,i=!0;for(const c of a)c.id!==t.id&&(r&&s===n&&(e.set(t.id,{...r,sort:n}),i=!1),e.set(c.id,{...c,sort:s}),s++);return r&&i&&e.set(t.id,{...r,sort:s}),e},el=(e,t)=>{const n=[...e.values()];let r=!0;e.clear();for(const a of n)a.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),r=!1),e.set(a.id,a));return r&&e.set(t.id,t),e},tl=async(e,t)=>{const n=await e.getUncategorizedDocumentPagesByDocumentId(t);return new Map([...n].sort(mr).map(r=>[r.id,r]))},we=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,nl=(e,t={enabled:!0})=>{const[n,r]=f.useState(new Map([])),[a,s]=f.useState(!0),i=f.useCallback(async()=>{s(!0),r(await ul(e)),s(!1)},[e]);return f.useEffect(()=>{t.enabled&&i()},[t.enabled,i]),f.useEffect(()=>{const c=h=>{n.has(h.documentPage.documentId)&&r(k.produce(y=>{const b=`${h.action}-page`;return(Ge[b]||Ge.default)(y,h.documentPage)}))},g=h=>{n.has(h.documentCategory.documentId)&&r(k.produce(y=>{const b=`${h.action}-category`;return(Ge[b]||Ge.default)(y,h.documentCategory)}))},l=h=>{(h==null?void 0:h.action)==="update"&&n.size>0&&i()},w=h=>{!n.has(h.document.id)||h.newGroupId||h.document.documentGroupId||r(k.produce(y=>rl(y,h.document,h.position)))},m=h=>{r(k.produce(y=>ol(y,h==null?void 0:h.documentGroup,h.position)))},d=({action:h,document:y})=>{(h==="update"||h==="move")&&n.has(y.id)||h==="add"&&!y.documentGroupId?i():h==="delete"&&n.has(y.id)&&r(k.produce(b=>{h==="delete"&&b.delete(y.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",d),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",c),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",g),window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",l),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",w),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",m),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",d),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",c),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",g),window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",l),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",w),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",m)}},[n,t.enabled,i]),{documents:Array.from(n.values()),refetch:i,isLoading:a}},rl=(e,t,n)=>{if(!t.sort||!n)return e;const r=t.sort,a=[...e.values()].sort(we),s=[];e.clear();for(const c of a){if(c.id===t.id){s.push({...c,sort:n});continue}const g=c.sort??0;let l=0;n<=g&&(l=r>g||r===0?1:0),s.push({...c,sort:g+l})}const i=[...s].sort(we);for(const c of i)e.set(c.id,c);return e},ol=(e,t,n)=>{if(!t.sort)return e;const r=t.sort,a=[...e.values()].sort(we),s=[];e.clear();for(const c of a){const g=c.sort??0;let l=0;n<=g&&(l=r>g?1:0),s.push({...c,sort:g+l})}const i=[...s].sort(we);for(const c of i)e.set(c.id,c);return e},al=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages+1};return e.set(n.id,r)},sl=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfUncategorizedDocumentPages:n.numberOfUncategorizedDocumentPages-1};return e.set(n.id,r)},il=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories+1};return e.set(n.id,r)},cl=(e,t)=>{const n=e.get(t.documentId);if(!n)return e;const r={...n,numberOfDocumentPageCategories:n.numberOfDocumentPageCategories-1};return e.set(n.id,r)},Ge={"add-page":al,"delete-page":sl,"add-category":il,"delete-category":cl,default:e=>e},ul=async e=>{const t=await e.getUngroupedDocuments();return new Map([...t].sort(we).map(n=>[n.id,n]))};class Be{static with(t){return{id:t,creatorName:"Creator Name",extension:"png",externalUrl:null,fileName:"fileName.png",title:"A title",status:"FINISHED",objectType:"IMAGE",height:480,width:640,genericUrl:"https://generic.url",previewUrl:"https://preview.url",originUrl:"https://origin.url",projectId:23,fileSize:256,fileSizeHumanReadable:"123.45 MB",fileId:"x1x1x1x1x1x1",token:"--token--"}}}class pr{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}class O{static red(t=767){return{id:t,name:"Red",sort:1,nameCss:"red",hex:"ff0000",red:255,green:0,blue:0,alpha:255,hue:361,saturation:100,lightness:46,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static yellow(t=768){return{id:t,name:"Yellow",sort:2,nameCss:"yellow",red:255,green:255,blue:0,hex:"ffff00",alpha:255,hue:361,saturation:100,lightness:46,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static green(t=769){return{id:t,name:"Green",sort:3,nameCss:"green",red:0,green:255,blue:0,hex:"00ff00",alpha:255,hue:361,saturation:100,lightness:46,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class ll{static red(){return{colorPaletteId:23,red:255,green:0,blue:0,alpha:255}}}class dl{static red(){return{name:"Red",sort:1,nameCss:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class U{static with(t,n="Color Palette Name"){return{id:t,name:n,description:"Color Palette Description",colors:[O.red(),O.yellow(),O.green()]}}}class ml{static with(t="New Color Palette Name",n="New Color Palette Description"){return{name:t,description:n}}}class pl{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class Fe{static default(){return{downloadUrl:"dummy-url",signature:"dummy-signature"}}}class gr{static with(t){return{id:t,name:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,pages:[B({preview_url:"https://preview.url",width:1024,height:768},"camel")]}}}const gl=3452,fl=2341,wl=4561,Wt=345214,fr=({blockSettings:e={},blockAssets:t={},editorState:n=!1,openAssetChooser:r=()=>null,closeAssetChooser:a=()=>null,blockId:s=gl,sectionId:i=fl,projectId:c=Wt,user:g=pr.with(wl),language:l="en",privacySettings:w={assetViewerEnabled:!1,assetDownloadEnabled:!1},blockTemplates:m={}}={})=>{window.emitter=u.spy(dn()),window.blockSettings??(window.blockSettings={}),window.blockSettings[s]=e;const d={},h={},y={},b={};return{getBlockId:u.stub().returns(s),getSectionId:u.stub().returns(i),getProjectId:u.stub().returns(c),getEditorState:u.stub().returns(n),getBlockSettings:u.stub().resolves(window.blockSettings),getAvailablePalettes:u.stub().resolves([U.with(678,"Palette 1"),U.with(427,"Palette 2"),U.with(679,"Palette 3")]),getColorPalettes:u.stub().resolves([U.with(678,"Palette 1"),U.with(427,"Palette 2"),U.with(679,"Palette 3")]),createColorPalette:u.stub().resolves(U.with(678)),updateColorPalette:u.stub().resolves(U.with(678)),getColorsByIds:u.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),getColorsByColorPaletteId:u.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),getColorPalettesWithColors:u.stub().resolves([U.with(678,"Palette 1"),U.with(427,"Palette 2"),U.with(679,"Palette 3")]),deleteColorPalette:u.stub().resolves(),getAvailableColors:u.stub().resolves([]),getCurrentLoggedUser:u.stub().resolves(g),downloadColorKit:u.stub().returns(`/api/color/export/${Wt}/zip/500`),getAssetById:u.stub().callsFake(A=>Promise.resolve(Be.with(A))),closeAssetChooser:u.stub().callsFake(()=>{a()}),openAssetChooser:u.stub().callsFake(A=>{r(A)}),getBlockAssets:u.stub().callsFake(async()=>Object.entries(t).reduce((A,[v,G])=>{const L=h[v]??[],T=d[v]??[];return A[v]=[...G.filter(C=>!T.includes(C.id)),...L.map(C=>Be.with(C))],A},{})),addAssetIdsToBlockAssetKey:u.stub().callsFake(async(A,v)=>{h[A]=[...h[A]??[],...v]}),deleteAssetIdsFromBlockAssetKey:u.stub().callsFake(async(A,v)=>{d[A]=[...d[A]??[],...v]}),getBlockTemplates:u.stub().callsFake(async()=>Object.entries(m).reduce((A,[v,G])=>{const L=b[v]??[],T=y[v]??[];return A[v]=[...G.filter(C=>!T.includes(C.id)),...L.map(C=>gr.with(C))],A},{})),addTemplateIdsToBlockTemplateKey:u.stub().callsFake(async(A,v)=>{b[A]=[...b[A]??[],...v]}),deleteTemplateIdsFromBlockTemplateKey:u.stub().callsFake(async(A,v)=>{y[A]=[...y[A]??[],...v]}),getTranslationLanguage:u.stub().returns(l),getColors:u.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),updateColor:u.stub().callsFake(A=>Promise.resolve(O.red(A))),getBulkDownloadToken:u.stub().resolves("token"),getBulkDownloadBySignature:u.stub().resolves(Fe.default()),getBulkDownloadByToken:u.stub().resolves(Fe.default()),getPrivacySettings:u.stub().returns(w),closeTemplateChooser:u.stub(),openTemplateChooser:u.stub(),createColor:u.stub().resolves(O.red()),deleteColor:u.stub().resolves(),getTemplateById:u.stub().resolves({}),openAssetViewer:u.stub(),updateBlockSettings:u.stub().resolves(),getAllDocuments:u.stub().resolves(),getUngroupedDocuments:u.stub().resolves(),getDocumentsByDocumentGroupId:u.stub().resolves(),getDocumentGroups:u.stub().resolves(),getDocumentPagesByDocumentId:u.stub().resolves(),getDocumentPagesByDocumentCategoryId:u.stub().resolves(),getDocumentCategoriesByDocumentId:u.stub().resolves(),getUncategorizedDocumentPagesByDocumentId:u.stub().resolves(),getDocumentSectionsByDocumentPageId:u.stub().resolves(),getDocumentTargets:u.stub().resolves(),getDocumentPageTargets:u.stub().resolves(),api:u.stub().resolves(),state:u.stub().resolves(),context:u.stub().resolves(),subscribe:u.stub().resolves(),dispatch:u.stub().resolves()}},hl=({}={})=>({api:u.stub().resolves(),state:u.stub().resolves(),context:u.stub().resolves(),subscribe:u.stub().resolves(),dispatch:u.stub().resolves()});class wr{static with(t){return{highlights:[t],type:"BLOCK",object_id:1,page_id:1,page_slug:"page-slug",page_title:"Page Title",page_category_slug:"page-category-slug",block_id:1,document_id:1,document_slug:"document-slug",document_title:"Document Title",portal_id:1,portal_token:"portal-token"}}}class xe{static with(t){return B(wr.with(t),"camel")}}const bl=234551,yl=3452,Xt=7777,E=5332,Dl=95694,Al=345882,Se=6456,Vt=34532,Ht=3455345,Yt=2342,Jt=2343445,Qt=2434,Ft=552,qt=1145,en=32345,We=147,vl=258,Tl=369,ke=23442,tn=235345,nn=12352,rn=55221,on=24324,an=3532,sn=98954,Cl=3421,_l=65725,Pl=95934,Il=2341,cn=653543,un=23411,ln=56657,hr=({editorState:e=!1,brandId:t=bl,portalId:n=Xt,projectId:r=yl,pageTemplateSettings:a={},pageTemplateAssets:s={},themeSettings:i={},language:c="en",openAssetChooser:g=()=>null,closeAssetChooser:l=()=>null}={})=>{window.emitter=u.spy(dn());let w=a,m=i;const d={},h={},y=async()=>Object.entries(s).reduce((b,[A,v])=>{const G=h[A]??[],L=d[A]??[];return b[A]=[...v.filter(T=>!L.includes(T.id)),...G.map(T=>Be.with(T))],b},{});return{getPortalId:u.stub().returns(n),getProjectId:u.stub().returns(r),getEditorState:u.stub().returns(e),getCoverPage:u.stub().resolves(le.with(Xt)),getAllDocuments:u.stub().resolves([_.with(Se),_.with(Vt),_.with(Ht),_.with(Yt),_.with(Jt),_.withDocumentGroupId(Qt,E),_.withDocumentGroupId(Ft,E),_.withDocumentGroupId(qt,E),_.withDocumentGroupId(en,E)]),getUngroupedDocuments:u.stub().resolves([_.with(Se),_.with(Vt),_.with(Ht),_.with(Yt),_.with(Jt)]),getDocumentsByDocumentGroupId:u.stub().resolves([_.withDocumentGroupId(Qt,E),_.withDocumentGroupId(Ft,E),_.withDocumentGroupId(qt,E),_.withDocumentGroupId(en,E)]),getDocumentGroups:u.stub().resolves([q.with(E,3),q.with(Dl,0),q.with(Al,2)]),getDocumentPagesByDocumentId:u.stub().resolves([S.with(ke),S.with(tn),S.with(on),S.with(nn),S.with(an),S.with(rn),S.with(sn)]),getDocumentPagesByDocumentCategoryId:u.stub().callsFake(b=>Promise.resolve([S.withFields({id:ke,categoryId:b,sort:1}),S.withFields({id:tn,categoryId:b,sort:2}),S.withFields({id:nn,categoryId:b,sort:3}),S.withFields({id:rn,categoryId:b,sort:4})])),getDocumentCategoriesByDocumentId:u.stub().callsFake(b=>Promise.resolve([F.withDocumentIdAndNumberOfDocumentPages(We,b,2),F.withDocumentIdAndNumberOfDocumentPages(vl,b,0),F.withDocumentIdAndNumberOfDocumentPages(Tl,b,2)])),getUncategorizedDocumentPagesByDocumentId:u.stub().callsFake(b=>Promise.resolve([S.withFields({id:on,documentId:b,categoryId:null,sort:1}),S.withFields({id:an,documentId:b,categoryId:null,sort:2}),S.withFields({id:sn,documentId:b,categoryId:null,sort:3})])),getDocumentSectionsByDocumentPageId:u.stub().resolves([Le.with(Cl),Le.with(_l),Le.with(Pl)]),getColorPalettes:u.stub().resolves([U.with(678,"Palette 1"),U.with(427,"Palette 2"),U.with(679,"Palette 3")]),getColorsByColorPaletteId:u.stub().resolves([O.red(9834),O.green(342),O.yellow(9314)]),duplicateDocumentPage:u.stub().resolves(vr.with(Il)),getDocumentTargets:u.stub().resolves(_r.with(Se)),getDocumentPageTargets:u.stub().resolves(Pr.with(ke)),addAssetIdsToCoverPageTemplateAssetKey:u.stub().callsFake(async(b,A)=>(h[b]=[...h[b]??[],...A],s)),addAssetIdsToThemeAssetKey:u.stub().callsFake(async(b,A)=>(h[b]=[...h[b]??[],...A],s)),addAssetIdsToLibraryPageTemplateAssetKey:u.stub().callsFake(async(b,A,v)=>(h[A]=[...h[A]??[],...v],s)),addAssetIdsToDocumentPageTemplateAssetKey:u.stub().callsFake(async(b,A,v)=>(h[A]=[...h[A]??[],...v],s)),getCoverPageTemplateAssets:u.stub().callsFake(y),getThemeAssets:u.stub().callsFake(y),getLibraryPageTemplateAssets:u.stub().callsFake(y),getDocumentPageTemplateAssets:u.stub().callsFake(y),deleteAssetIdsFromCoverPageTemplateAssetKey:u.stub().callsFake(async(b,A)=>{d[b]=[...d[b]??[],...A]}),deleteAssetIdsFromThemeAssetKey:u.stub().callsFake(async(b,A)=>{d[b]=[...d[b]??[],...A]}),deleteAssetIdsFromLibraryPageTemplateAssetKey:u.stub().callsFake(async(b,A,v)=>{d[A]=[...d[A]??[],...v]}),deleteAssetIdsFromDocumentPageTemplateAssetKey:u.stub().callsFake(async(b,A,v)=>{d[A]=[...d[A]??[],...v]}),getCoverPageTemplateSettings:u.stub().resolves(w),getDocumentPageTemplateSettings:u.stub().resolves(w),getLibraryPageTemplateSettings:u.stub().resolves(w),getThemeSettings:u.stub().resolves(m),createLink:u.stub().resolves(_.with(1)),createLibrary:u.stub().resolves(_.with(1)),createStandardDocument:u.stub().resolves(_.with(1)),createDocumentPage:u.stub().resolves(S.with(1)),createDocumentGroup:u.stub().resolves(q.with(1,0)),createDocumentCategory:u.stub().resolves(F.with(1)),createCoverPage:u.stub().resolves(le.with(1)),updateLink:u.stub().resolves(_.with(1)),updateLibrary:u.stub().resolves(_.with(1)),updateStandardDocument:u.stub().resolves(_.with(1)),updateDocumentPage:u.stub().resolves(S.with(1)),updateDocumentGroup:u.stub().resolves(q.with(1,0)),updateDocumentCategory:u.stub().resolves(F.with(1)),updateCoverPage:u.stub().resolves(le.with(1)),updateLegacyCoverPage:u.stub().resolves(le.withLegacy(1)),updateBrandportalLink:u.stub().resolves(qe.with()),updateCoverPageTemplateSettings:u.stub().callsFake(async b=>{w=H(w,b)}),updateDocumentPageTemplateSettings:u.stub().callsFake(async b=>{w=H(w,b)}),updateLibraryPageTemplateSettings:u.stub().callsFake(async b=>{w=H(w,b)}),updateThemeSettings:u.stub().callsFake(async b=>{m=H(m,b)}),deleteCoverPage:u.stub().resolves(),deleteDocumentCategory:u.stub().resolves(),deleteDocumentGroup:u.stub().resolves(),deleteDocumentPage:u.stub().resolves(),deleteLibrary:u.stub().resolves(),deleteLink:u.stub().resolves(),deleteStandardDocument:u.stub().resolves(),getBrandId:u.stub().returns(t),getBrandportalLink:u.stub().resolves(qe.with()),getTranslationLanguage:u.stub().returns(c),moveDocument:u.stub().resolves(_.with(Se)),moveDocumentCategory:u.stub().resolves(F.with(We)),moveDocumentGroup:u.stub().resolves(q.with(We,0)),moveDocumentPage:u.stub().resolves(S.with(ke)),openNavigationManager:u.stub(),updateDocumentPageTargets:u.stub().resolves(tt.with([cn,un,ln])),updateDocumentTargets:u.stub().resolves(tt.with([cn,un,ln])),searchInGuideline:u.stub().callsFake(async b=>Promise.resolve([xe.with(`${b}-1`),xe.with(`${b}-1`),xe.with(`${b}-3`)])),closeAssetChooser:u.stub().callsFake(()=>{l()}),openAssetChooser:u.stub().callsFake(b=>{g(b)}),api:u.stub().resolves(),state:u.stub().resolves(),context:u.stub().resolves(),subscribe:u.stub().resolves(),dispatch:u.stub().resolves()}};class Gl{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project_id:23,project_name:null,project_type:null,file_size:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--"}}}class Sl{static default(){return{projectTypes:Object.values(ot),objectTypes:[at.Canvas],extensions:[o.Jpg,o.Png,o.Svg],multiSelection:!0,urlContains:"abc.xyz"}}static withSingleSelectedValue(t){return{...this.default(),multiSelection:!1,selectedValueId:t}}static withMultiSelectedValues(t){return{...this.default(),multiSelection:!0,selectedValueIds:t}}}class kl{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project:23,project_name:null,project_type:null,filesize:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--"}}}class br{static get(){return{brand_portal:{enabled:!0,label:"Brandportal Link",url:"/url"}}}}class qe{static with(t){return{...B(br.get().brand_portal,"camel"),...t}}}class Oe{static red(t=767){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Red",name_css:"red",sort:1,r:255,g:0,b:0,hex:"ff0000",alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static yellow(t=768){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Yellow",name_css:"yellow",sort:2,hex:"ffff00",r:255,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static green(t=769){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Green",name_css:"green",sort:3,hex:"00ff00",r:0,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}}class xl{static red(){return{project_color_palette_id:23,red:255,green:0,blue:0,alpha:255}}}class Ol{static red(){return{name:"Red",sort:1,name_css:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static yellow(){return{name:"Yellow",sort:2,name_css:"yellow",red:255,green:255,blue:0,alpha:255,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static green(){return{name:"Green",sort:3,name_css:"green",red:0,green:255,blue:0,alpha:255,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}}class Ll{static with(t,n="Color Palette Name"){return{id:t,name:n,description:"Color Palette Description",colors:[Oe.red(),Oe.yellow(),Oe.green()]}}}class Ml{static with(t=322){return{project_id:t,name:"New Color Palette Name",description:"New Color Palette Description"}}}class Ul{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class yr{static with(t,n="Cover Page Name"){return{template:"hub",document_id:"1",brandhome:{id:t,title:n,active:!0,draft:1,enabled:1,url:`/hub/${t}`,hide_in_nav:!1}}}}class le{static with(t,n="Cover Page Name"){const r=yr.with(t,n);return{...B(r.brandhome,"camel"),template:r.template,documentId:r.document_id,draft:!!r.brandhome.draft,enabled:!!r.brandhome.enabled}}static withLegacy(t,n="Legacy Cover Page"){return{brandhome_draft:!0,brandhome_title:n,brandhome_hide_in_nav:!1}}}class et{static with(t){return{id:t,creator:9,created:"2022-03-03t15:41:33.000+00:00",modifier:null,modified:null,project_id:345,valid_from:"2022-03-03t15:41:33.000+00:00",valid_to:null,visibility:"private",portal_id:3495,title:`Document ${t}`,slug:`document-${t}`,heading:"Document Dummy heading",subheading:"Document Dummy subHeading",description:null,logo:null,sort:5,lazy:!0,link_type:nt.Internal,link_url:null,link_settings:null,view_count:0,mode:"DEFAULT",appearance:null,settings:{},logo_file_id:null,logo_settings:[],background_file_id:null,background_settings:[],change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:[],token:"a-dummy-token",permanent_link:`/r/document-${t}`,number_of_document_page_categories:0,number_of_uncategorized_document_pages:0}}}class he{static with(t,n=[]){return{id:t,creator:9,created:"2022-08-15T11:47:47.000+00:00",modifier:null,modified:null,document_id:456,valid_from:"2022-08-15T11:47:47.000+00:00",valid_to:null,title:`Document Category Dummy ${t}`,slug:`document-category-dummy-${t}`,sort:1,number_of_document_pages:n.length}}static withDocumentIdAndNumberOfDocumentPages(t,n,r){return{...he.with(t),document_id:n,number_of_document_pages:r}}}class F{static with(t){return B(he.with(t),"camel")}static withDocumentIdAndNumberOfDocumentPages(t,n,r){return B(he.withDocumentIdAndNumberOfDocumentPages(t,n,r),"camel")}static withFields(t){return{...t}}}class _{static with(t){return B(et.with(t),"camel")}static withDocumentGroupId(t,n){return{...B(et.with(t),"camel"),documentGroupId:n}}static withFields(t){return{...t}}}class Dr{static with(t,n=0){return{id:t,creator:9,created:"2022-07-11 14:00:49",modified:"2022-08-15 07:59:28",modifier:9,valid_to:null,project_id:113,portal_id:175,name:`Document Group Dummy ${t}`,sort:1,number_of_documents:n}}}class q{static with(t,n=0){return B(Dr.with(t,n),"camel")}static withFields(t){return{...t}}}class Ze{static with(t){return{id:t,creator:9,created:"2022-08-15T11:47:57.000+00:00",modifier:null,modified:null,document_id:145,category_id:29,parent_id:null,valid_from:"2022-08-15T11:47:57.000+00:00",valid_to:null,title:`Document Page Dummy ${t}`,slug:`document-page-dummy-${t}`,sort:1,link_type:"INTERNAL",link_url:null,view_count:0,visibility:rt.Everyone,change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:null,permanent_link:`/r/document-page-${t}`}}static withFields(t){return{...Ze.with(t.id),...t}}}class Ar{static with(t){return{page:{id:t,link_type:"INTERNAL",name:"Document page duplicate dummy",sections:[],url:`document-page-duplicate-dummy-${t}`,visibility:"EVERYONE"}}}}class S{static with(t){return B(Ze.with(t),"camel")}static withFields(t){return{...S.with(t.id),...t}}}class vr{static with(t){return B(Ar.with(t).page,"camel")}}class Bl{static with(t){return{id:t,creator:9,created:"2022-04-04T15:36:36.000+00:00",modifier:9,modified:"2022-04-04T15:36:43.000+00:00",document_id:1,page_id:6,revision:null,valid_from:"2022-04-04T15:36:36.000+00:00",valid_to:null,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanent_link:`/r/document-section-${t}`}}}class Le{static with(t){return{id:t,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanentLink:`/r/document-section-${t}`}}}class Rl{static successWith(t){return{result:{success:!0,data:t}}}static success(){return{result:{success:!0,data:void 0}}}static failure(){return{result:{success:!1,data:void 0}}}}class ee{static target(t){return{checked:!1,disabled:!1,indeterminate:!1,label:String(t),target:{account_id:1,asset_ids:[],created:"2022-06-10T12:35:52.000+00:00",creator:1,description:"Target description",group_ids:[],id:t,modified:null,modifier:null,name:`Target ${t}`,sort:1,total_groups:null,total_links:null,total_users:null,user_ids:[]},value:t}}}class Tr{static with(t){return{appearance:{},background_file_id:null,background_url:null,heading:null,id:t,link_type:null,link_url:null,logo_file_id:null,logo_url:null,mode:null,portal_title:"Portal title",subheading:null,success:!0,targets:{disabled:[],has_selected_targets:!0,targets:[ee.target(1),ee.target(2),ee.target(3)]},title:"Test document"}}}class Nl{static with(t){return{success:!0,data:!0,targets:t}}}class Cr{static with(t){return{default:!1,disabled:[],has_selected_targets:!0,id:t,success:!0,targets:[ee.target(1),ee.target(2),ee.target(3)]}}}class _r{static with(t){return B(Tr.with(t).targets,"camel")}}class Pr{static with(t){return B(Cr.with(t),"camel")}}class tt{static with(t){return{success:!0,data:!0,targets:t}}}class $l{static with(t){return{asset_created:"2022-04-06",asset_modified:"2022-04-06",categories:[],description:"A description",height:480,id:t,name:"A template",preview:"https://preview.url",project:23,project_name:"A project",project_type:"A project type",published:1,screen_id:1,sector:"A sector",token:"--token--",unit:"px",width:640}}}class Zl{static with(t){return{id:t,title:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,height:480,width:640,published:!0}}}class jl{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}function El(e,t){const n=fr(t??{}),r=s=>f.createElement(e,{appBridge:n,...s}),a=e.displayName||e.name||"Component";return r.displayName=`withAppBridgeBlockStubs(${a})`,[r,n]}function Kl(e,t){const n=hr(t??{}),r=s=>f.createElement(e,{appBridge:n,...s}),a=e.displayName||e.name||"Component";return r.displayName=`withAppBridgeThemeStubs(${a})`,[r,n]}k.enableMapSet();exports.AppBridgeCreateAsset=Vc;exports.AssetApiDummy=Gl;exports.AssetChooserObjectType=at;exports.AssetChooserOptionsDummy=Sl;exports.AssetChooserProjectType=ot;exports.AssetChooserResultDummy=kl;exports.AssetDummy=Be;exports.BrandportalLinkApiDummy=br;exports.BrandportalLinkDummy=qe;exports.BulkDownloadDummy=Fe;exports.BulkDownloadState=cr;exports.ColorApiCreateDummy=xl;exports.ColorApiDummy=Oe;exports.ColorApiPatchDummy=Ol;exports.ColorCreateDummy=ll;exports.ColorDummy=O;exports.ColorPaletteApiCreateDummy=Ml;exports.ColorPaletteApiDummy=Ll;exports.ColorPaletteApiPatchDummy=Ul;exports.ColorPaletteCreateDummy=ml;exports.ColorPaletteDummy=U;exports.ColorPalettePatchDummy=pl;exports.ColorPatchDummy=dl;exports.CoverPageApiDummy=yr;exports.CoverPageDummy=le;exports.DocumentApiDummy=et;exports.DocumentCategoryApiDummy=he;exports.DocumentCategoryDummy=F;exports.DocumentDummy=_;exports.DocumentGroupApiDummy=Dr;exports.DocumentGroupDummy=q;exports.DocumentPageApiDummy=Ze;exports.DocumentPageDummy=S;exports.DocumentPageDuplicateApiDummy=Ar;exports.DocumentPageDuplicateDummy=vr;exports.DocumentPageTargetsApiDummy=Cr;exports.DocumentPageTargetsDummy=Pr;exports.DocumentPageVisibility=rt;exports.DocumentSectionApiDummy=Bl;exports.DocumentSectionDummy=Le;exports.DocumentTargetsApiDummy=Tr;exports.DocumentTargetsDummy=_r;exports.FetchError=rr;exports.FileExtension=o;exports.FileExtensionSets=xr;exports.FileType=gn;exports.GuidelineSearchResultApiDummy=wr;exports.GuidelineSearchResultDummy=xe;exports.HttpClient=Dn;exports.HttpClientError=yn;exports.HttpUtilResponseDummy=Rl;exports.LinkSettingsDisplay=mn;exports.LinkSettingsIconPosition=pn;exports.LinkType=nt;exports.SUBSCRIBE_TIMEOUT=ar;exports.SingleTargetApiDummy=ee;exports.TemplateApiLegacyDummy=$l;exports.TemplateDummy=gr;exports.TemplateLegacyDummy=Zl;exports.TerrificEvent=fn;exports.TimeoutReachedError=or;exports.Topic=x;exports.UpdateTargetsApiDummy=Nl;exports.UpdateTargetsDummy=tt;exports.UserApiDummy=jl;exports.UserDummy=pr;exports.closeAssetChooser=Yc;exports.closeTemplateChooser=qc;exports.compareObjects=J;exports.convertObjectCase=B;exports.generateRandomString=bn;exports.getAppBridgeBlockStub=fr;exports.getAppBridgePlatformAppStub=hl;exports.getAppBridgeThemeStub=hr;exports.getDatasetByClassName=Mr;exports.getDatasetByElement=wn;exports.getMimeType=Ur;exports.isObject=me;exports.mergeDeep=H;exports.mimeTypes=hn;exports.notify=$;exports.openAssetChooser=Hc;exports.openAssetViewer=Jc;exports.openNavigationManager=Qc;exports.openTemplateChooser=Fc;exports.rgbObjectToRgbString=Lr;exports.rgbStringToRgbObject=Or;exports.subscribe=V;exports.useAssetChooser=eu;exports.useAssetUpload=ou;exports.useAssetViewer=au;exports.useBlockAssets=su;exports.useBlockSettings=cu;exports.useBlockTemplates=iu;exports.useBrandportalLink=lu;exports.useBulkDownload=du;exports.useCategorizedDocumentPages=mu;exports.useColorPalettes=wu;exports.useColors=hu;exports.useCoverPage=bu;exports.useDocumentCategories=yu;exports.useDocumentGroups=Cu;exports.useDocumentPageTargets=ku;exports.useDocumentSection=Ou;exports.useDocumentTargets=Lu;exports.useEditorState=Uu;exports.useFileInput=Bu;exports.useFileUpload=ir;exports.useGroupedDocuments=Ru;exports.useGuidelineActions=zu;exports.useNavigationManager=Wu;exports.usePageTemplateSettings=Xu;exports.usePrivacySettings=Vu;exports.useReadyForPrint=Hu;exports.useTemplateAssets=Yu;exports.useTemplateChooser=Qu;exports.useThemeAssets=Ju;exports.useUncategorizedDocumentPages=Fu;exports.useUngroupedDocuments=nl;exports.withAppBridgeBlockStubs=El;exports.withAppBridgeThemeStubs=Kl;
//# sourceMappingURL=index.cjs.js.map
