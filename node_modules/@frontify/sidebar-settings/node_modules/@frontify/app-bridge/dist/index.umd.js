(function(l,G){typeof exports=="object"&&typeof module<"u"?G(exports,require("immer"),require("react"),require("mitt"),require("sinon")):typeof define=="function"&&define.amd?define(["exports","immer","react","mitt","sinon"],G):(l=typeof globalThis<"u"?globalThis:l||self,G(l.AppBridge={},l.immer,l.React,l.mitt,l.sinon))})(this,function(l,G,f,ft,c){"use strict";var Ke=(e=>(e.External="EXTERNAL",e.Internal="INTERNAL",e))(Ke||{}),wt=(e=>(e.TextAndIcon="ICON_TEXT",e.IconOnly="ICON",e.TextOnly="TEXT",e))(wt||{}),ht=(e=>(e.Right="RIGHT",e.Left="LEFT",e))(ht||{}),ze=(e=>(e.Everyone="EVERYONE",e.Editor="EDITOR",e))(ze||{}),o=(e=>(e.Aac="aac",e.Ac3="ac3",e.Ai="ai",e.Aif="aif",e.Aifc="aifc",e.Aiff="aiff",e.Artboard="artboard",e.Asc="asc",e.Atom="atom",e.Au="au",e.Avi="avi",e.Bcpio="bcpio",e.Bin="bin",e.Bmp="bmp",e.Cdf="cdf",e.Cgm="cgm",e.Class="class",e.Cpio="cpio",e.Cpt="cpt",e.Csh="csh",e.Css="css",e.Dcr="dcr",e.Dif="dif",e.Dir="dir",e.Djv="djv",e.Djvu="djvu",e.Dll="dll",e.Dmg="dmg",e.Dms="dms",e.Dng="dng",e.Doc="doc",e.Docx="docx",e.Dotx="dotx",e.Docm="docm",e.Dotm="dotm",e.Dtd="dtd",e.Dv="dv",e.Dvi="dvi",e.Dxr="dxr",e.Eps="eps",e.Etx="etx",e.Exe="exe",e.Ez="ez",e.Flac="flac",e.Flv="flv",e.Gif="gif",e.Gram="gram",e.Grxml="grxml",e.Gtar="gtar",e.Hdf="hdf",e.Heif="heif",e.Hqx="hqx",e.Htm="htm",e.Html="html",e.Ice="ice",e.Ico="ico",e.Ics="ics",e.Idml="idml",e.Ief="ief",e.Ifb="ifb",e.Iges="iges",e.Igs="igs",e.Indd="indd",e.Indt="indt",e.Jnlp="jnlp",e.Jp2="jp2",e.Jpe="jpe",e.Jpeg="jpeg",e.Jpg="jpg",e.Js="js",e.Kar="kar",e.Latex="latex",e.Lha="lha",e.Lzh="lzh",e.M3u="m3u",e.M4a="m4a",e.M4b="m4b",e.M4p="m4p",e.M4r="m4r",e.M4u="m4u",e.M4v="m4v",e.Mac="mac",e.Man="man",e.Mathml="mathml",e.Me="me",e.Mesh="mesh",e.Mid="mid",e.Midi="midi",e.Mif="mif",e.Mkv="mkv",e.Mov="mov",e.Movie="movie",e.Mp2="mp2",e.Mp3="mp3",e.Mp4="mp4",e.Mpe="mpe",e.Mpeg="mpeg",e.Mpg="mpg",e.Mpga="mpga",e.Ms="ms",e.Msh="msh",e.Mts="mts",e.Mxu="mxu",e.Nc="nc",e.Oda="oda",e.Ogg="ogg",e.Pbm="pbm",e.Pct="pct",e.Pdb="pdb",e.Pdf="pdf",e.Pgm="pgm",e.Pgn="pgn",e.Pic="pic",e.Pict="pict",e.Png="png",e.Pnm="pnm",e.Pnt="pnt",e.Pntg="pntg",e.Ppm="ppm",e.Ppt="ppt",e.Pptx="pptx",e.Potx="potx",e.Ppsx="ppsx",e.Ppam="ppam",e.Pptm="pptm",e.Potm="potm",e.Ppsm="ppsm",e.Ps="ps",e.Psd="psd",e.Qt="qt",e.Qti="qti",e.Qtif="qtif",e.Ra="ra",e.Ram="ram",e.Ras="ras",e.Rdf="rdf",e.Rgb="rgb",e.Rm="rm",e.Roff="roff",e.Rtf="rtf",e.Rtx="rtx",e.Sgm="sgm",e.Sgml="sgml",e.Sh="sh",e.Shar="shar",e.Silo="silo",e.Sit="sit",e.Skd="skd",e.Sketch="sketch",e.Skm="skm",e.Skp="skp",e.Skt="skt",e.Smi="smi",e.Smil="smil",e.Snd="snd",e.So="so",e.Spl="spl",e.Src="src",e.Sv4cpio="sv4cpio",e.Sv4crc="sv4crc",e.Svg="svg",e.Swf="swf",e.T="t",e.Tar="tar",e.Tcl="tcl",e.Tex="tex",e.Texi="texi",e.Texinfo="texinfo",e.Tif="tif",e.Tiff="tiff",e.Tr="tr",e.Tsv="tsv",e.Txt="txt",e.Ustar="ustar",e.Vcd="vcd",e.Vrml="vrml",e.Vxml="vxml",e.Wav="wav",e.Wbmp="wbmp",e.Wbmxl="wbmxl",e.Webm="webm",e.Webp="webp",e.Wml="wml",e.Wmlc="wmlc",e.Wmls="wmls",e.Wmlsc="wmlsc",e.Wmv="wmv",e.Wrl="wrl",e.Xbm="xbm",e.Xht="xht",e.Xhtml="xhtml",e.Xls="xls",e.Xml="xml",e.Xpm="xpm",e.Xsl="xsl",e.Xlsx="xlsx",e.Xltx="xltx",e.Xlsm="xlsm",e.Xltm="xltm",e.Xlam="xlam",e.Xlsb="xlsb",e.Xslt="xslt",e.Xul="xul",e.Xwd="xwd",e.Xyz="xyz",e.Zip="zip",e.Tpl="tpl",e))(o||{});const Gn={Audio:[o.Aac,o.Ac3,o.Aif,o.Aifc,o.Aiff,o.Flac,o.M4a,o.M4r,o.Mp3,o.Ogg,o.Wav],Documents:[o.Doc,o.Docx,o.Dotx,o.Pdf,o.Potx,o.Ppt,o.Pptx,o.Xls,o.Xlsx,o.Xltx],Images:[o.Ai,o.Bmp,o.Dng,o.Eps,o.Gif,o.Heif,o.Ico,o.Jpeg,o.Jpg,o.Png,o.Psd,o.Svg,o.Tif,o.Tiff,o.Webp],Videos:[o.Avi,o.Flv,o.M4v,o.Mkv,o.Mov,o.Mp4,o.Mpg,o.Mts,o.Webm,o.Wmv],Templates:[o.Artboard,o.Idml,o.Indd,o.Indt,o.Sketch]};var yt=(e=>(e.Audio="audio",e.Documents="documents",e.Images="images",e.Videos="videos",e.Templates="templates",e))(yt||{}),bt=(e=>(e.OpenModal="onOpenModal",e.CloseModal="onCloseModal",e))(bt||{}),We=(e=>(e.MediaLibrary="MediaLibrary",e.LogoLibrary="LogoLibrary",e.IconLibrary="IconLibrary",e.DocumentLibrary="DocumentLibrary",e.TemplateLibrary="TemplateLibrary",e.PatternLibrary="PatternLibrary",e.Styleguide="Styleguide",e.Workspace="Workspace",e))(We||{}),Xe=(e=>(e.File="FILE",e.Canvas="CANVAS",e.ImageVideo="IMAGE",e.TextSnippet="TEXT_SNIPPET",e.Url="URL",e))(Xe||{}),L=(e=>(e.CloseApp="closeApp",e.DeleteAppState="deleteAppState",e.GetAppState="getAppState",e.GetAssetById="getAssetById",e.GetProjectId="getProjectId",e.GetRefreshedThirdpartyOauth2Token="getRefreshedThirdpartyOauth2Token",e.GetThirdPartyOauth2Tokens="getThirdPartyOauth2Tokens",e.OpenAssetChooser="openAssetChooser",e.PostExternalAssets="postExternalAssets",e.PutAppState="putAppState",e))(L||{});const Sn=e=>{const t=s=>{const u=s.trim();return u.startsWith("rgba(")||u.startsWith("rgb(")},r=e.split("(")[1].split(")")[0].split(","),n=r.slice(0,2).every(s=>s.trim()===parseInt(s).toString());if(!t(e)||!n)throw new Error(`String is not a valid color (passed: "${e}").`);const a=r.map(s=>parseFloat(s));return{red:a[0],green:a[1],blue:a[2],alpha:(a==null?void 0:a[3])||1}},kn=e=>"alpha"in e?`rgba(${e.red}, ${e.green}, ${e.blue}, ${e.alpha})`:`rgb(${e.red}, ${e.green}, ${e.blue})`,Dt=e=>{const t=Object.keys(e).filter(r=>r.startsWith("jQuery")).reduce((r,n)=>({...r,...e[n]}),{});return{...e.dataset,...t}},On=e=>{const t=document.getElementsByClassName(e)[0];if(!t)throw new Error("Could not find the DOM node via class name");return Dt(t)},At={[o.Aac]:"audio/aac",[o.Ac3]:"audio/ac3",[o.Ai]:"application/postscript",[o.Aif]:"audio/x-aiff",[o.Aifc]:"audio/x-aiff",[o.Aiff]:"audio/x-aiff",[o.Artboard]:"application/octet-stream",[o.Asc]:"text/plain",[o.Atom]:"application/atom+xml",[o.Au]:"audio/basic",[o.Avi]:"video/x-msvideo",[o.Bcpio]:"application/x-bcpio",[o.Bin]:"application/octet-stream",[o.Bmp]:"image/bmp",[o.Cdf]:"application/x-netcdf",[o.Cgm]:"image/cgm",[o.Class]:"application/octet-stream",[o.Cpio]:"application/x-cpio",[o.Cpt]:"application/mac-compactpro",[o.Csh]:"application/x-csh",[o.Css]:"text/css",[o.Dcr]:"application/x-director",[o.Dif]:"video/x-dv",[o.Dir]:"application/x-director",[o.Djv]:"image/vnd.djvu",[o.Djvu]:"image/vnd.djvu",[o.Dll]:"application/octet-stream",[o.Dmg]:"application/octet-stream",[o.Dms]:"application/octet-stream",[o.Dng]:"image/dng",[o.Doc]:"application/msword",[o.Docm]:"application/vnd.ms-word.document.macroEnabled.12",[o.Docx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",[o.Dotm]:"application/vnd.ms-word.template.macroEnabled.12",[o.Dotx]:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",[o.Dtd]:"application/xml-dtd",[o.Dv]:"video/x-dv",[o.Dvi]:"application/x-dvi",[o.Dxr]:"application/x-director",[o.Eps]:"application/postscript",[o.Etx]:"text/x-setext",[o.Exe]:"application/octet-stream",[o.Ez]:"application/andrew-inset",[o.Flac]:"audio/x-flac",[o.Flv]:"video/x-flv",[o.Gif]:"image/gif",[o.Gram]:"application/srgs",[o.Grxml]:"application/srgs+xml",[o.Gtar]:"application/x-gtar",[o.Hdf]:"application/x-hdf",[o.Heif]:"mage/heif",[o.Hqx]:"application/mac-binhex40",[o.Htm]:"text/html",[o.Html]:"text/html",[o.Ice]:"x-conference/x-cooltalk",[o.Ico]:"image/x-icon",[o.Ics]:"text/calendar",[o.Idml]:"application/vnd.adobe.indesign-idml-package",[o.Ief]:"image/ief",[o.Ifb]:"text/calendar",[o.Iges]:"model/iges",[o.Igs]:"model/iges",[o.Indd]:"application/octet-stream",[o.Indt]:"application/octet-stream",[o.Jnlp]:"application/x-java-jnlp-file",[o.Jp2]:"image/jp2",[o.Jpe]:"image/jpeg",[o.Jpeg]:"image/jpeg",[o.Jpg]:"image/jpeg",[o.Js]:"application/x-javascript",[o.Kar]:"audio/midi",[o.Latex]:"application/x-latex",[o.Lha]:"application/octet-stream",[o.Lzh]:"application/octet-stream",[o.M3u]:"audio/x-mpegurl",[o.M4a]:"audio/mp4a-latm",[o.M4b]:"audio/mp4a-latm",[o.M4p]:"audio/mp4a-latm",[o.M4r]:"audio/x-m4r",[o.M4u]:"video/vnd.mpegurl",[o.M4v]:"video/x-m4v",[o.Mac]:"image/x-macpaint",[o.Man]:"application/x-troff-man",[o.Mathml]:"application/mathml+xml",[o.Me]:"application/x-troff-me",[o.Mesh]:"model/mesh",[o.Mid]:"audio/midi",[o.Midi]:"audio/midi",[o.Mif]:"application/vnd.mif",[o.Mkv]:"video/x-matroska",[o.Mov]:"video/quicktime",[o.Movie]:"video/x-sgi-movie",[o.Mp2]:"audio/mpeg",[o.Mp3]:"audio/mpeg",[o.Mp4]:"video/mp4",[o.Mpe]:"video/mpeg",[o.Mpeg]:"video/mpeg",[o.Mpg]:"video/mpeg",[o.Mpga]:"audio/mpeg",[o.Ms]:"application/x-troff-ms",[o.Msh]:"model/mesh",[o.Mts]:"model/vnd.mts",[o.Mxu]:"video/vnd.mpegurl",[o.Nc]:"application/x-netcdf",[o.Oda]:"application/oda",[o.Ogg]:"application/ogg",[o.Pbm]:"image/x-portable-bitmap",[o.Pct]:"image/pict",[o.Pdb]:"chemical/x-pdb",[o.Pdf]:"application/pdf",[o.Pgm]:"image/x-portable-graymap",[o.Pgn]:"application/x-chess-pgn",[o.Pic]:"image/pict",[o.Pict]:"image/pict",[o.Png]:"image/png",[o.Pnm]:"image/x-portable-anymap",[o.Pnt]:"image/x-macpaint",[o.Pntg]:"image/x-macpaint",[o.Potm]:"application/vnd.ms-powerpoint.template.macroEnabled.12",[o.Potx]:"application/vnd.openxmlformats-officedocument.presentationml.template",[o.Ppam]:"application/vnd.ms-powerpoint.addin.macroEnabled.12",[o.Ppm]:"image/x-portable-pixmap",[o.Ppsm]:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",[o.Ppsx]:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",[o.Ppt]:"application/vnd.ms-powerpoint",[o.Pptm]:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",[o.Pptx]:"application/vnd.openxmlformats-officedocument.presentationml.presentation",[o.Ps]:"application/postscript",[o.Psd]:"image/vnd.adobe.photoshop",[o.Qt]:"video/quicktime",[o.Qti]:"image/x-quicktime",[o.Qtif]:"image/x-quicktime",[o.Ra]:"audio/x-pn-realaudio",[o.Ram]:"audio/x-pn-realaudio",[o.Ras]:"image/x-cmu-raster",[o.Rdf]:"application/rdf+xml",[o.Rgb]:"image/x-rgb",[o.Rm]:"application/vnd.rn-realmedia",[o.Roff]:"application/x-troff",[o.Rtf]:"text/rtf",[o.Rtx]:"text/richtext",[o.Sgm]:"text/sgml",[o.Sgml]:"text/sgml",[o.Sh]:"application/x-sh",[o.Shar]:"application/x-shar",[o.Silo]:"model/mesh",[o.Sit]:"application/x-stuffit",[o.Skd]:"application/x-koan",[o.Sketch]:"application/zip",[o.Skm]:"application/x-koan",[o.Skp]:"application/x-koan",[o.Skt]:"application/x-koan",[o.Smi]:"application/smil",[o.Smil]:"application/smil",[o.Snd]:"audio/basic",[o.So]:"application/octet-stream",[o.Spl]:"application/x-futuresplash",[o.Src]:"application/x-wais-source",[o.Sv4cpio]:"application/x-sv4cpio",[o.Sv4crc]:"application/x-sv4crc",[o.Svg]:"image/svg+xml",[o.Swf]:"application/x-shockwave-flash",[o.T]:"application/x-troff",[o.Tar]:"application/x-tar",[o.Tcl]:"application/x-tcl",[o.Tex]:"application/x-tex",[o.Texi]:"application/x-texinfo",[o.Texinfo]:"application/x-texinfo",[o.Tif]:"image/tiff",[o.Tiff]:"image/tiff",[o.Tpl]:"text/xml",[o.Tr]:"application/x-troff",[o.Tsv]:"text/tab-separated-values",[o.Txt]:"text/plain",[o.Ustar]:"application/x-ustar",[o.Vcd]:"application/x-cdlink",[o.Vrml]:"model/vrml",[o.Vxml]:"application/voicexml+xml",[o.Wav]:"audio/x-wav",[o.Wbmp]:"image/vnd.wap.wbmp",[o.Wbmxl]:"application/vnd.wap.wbxml",[o.Webm]:"video/webm",[o.Webp]:"image/webp",[o.Wml]:"text/vnd.wap.wml",[o.Wmlc]:"application/vnd.wap.wmlc",[o.Wmls]:"text/vnd.wap.wmlscript",[o.Wmlsc]:"application/vnd.wap.wmlscriptc",[o.Wmv]:"video/x-ms-wmv",[o.Wrl]:"model/vrml",[o.Xbm]:"image/x-xbitmap",[o.Xht]:"application/xhtml+xml",[o.Xhtml]:"application/xhtml+xml",[o.Xlam]:"application/vnd.ms-excel.addin.macroEnabled.12",[o.Xls]:"application/vnd.ms-excel",[o.Xlsb]:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",[o.Xlsm]:"application/vnd.ms-excel.sheet.macroEnabled.12",[o.Xlsx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",[o.Xltm]:"application/vnd.ms-excel.template.macroEnabled.12",[o.Xltx]:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",[o.Xml]:"application/xml",[o.Xpm]:"image/x-xpixmap",[o.Xsl]:"application/xml",[o.Xslt]:"application/xslt+xml",[o.Xul]:"application/vnd.mozilla.xul+xml",[o.Xwd]:"image/x-xwindowdump",[o.Xyz]:"chemical/x-xyz",[o.Zip]:"application/zip"},Ln=e=>e.map(t=>At[t]).filter(t=>t!==void 0),vt=(e=6)=>Math.random().toString(20).substr(2,e);class Tt extends Error{constructor(t,r,n){super(`Status code ${r} - ${t}`),this.code=0,this.name="HttpClientError",this.code=r,this.responseBody=n}}const ce=async(e,t,r,n)=>{const a={method:e,headers:{"Content-Type":"application/json; charset=utf-8",...n},...r&&{body:JSON.stringify(r)}},s=await window.fetch(`${window.location.origin}${t}`,a),u=await s.json();if(!s.ok)throw new Tt(u,s.status,u.error);return{result:u}};class Ct{static getCsrfToken(){const t=document.getElementsByName("x-csrf-token");if(t.length>0)return t[0].content}static async get(t){return ce("GET",t,"",{"X-CSRF-TOKEN":this.getCsrfToken()})}static async post(t,r){return ce("POST",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async put(t,r){return ce("PUT",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async patch(t,r){return ce("PATCH",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}static async delete(t,r){return ce("DELETE",t,r,{"X-CSRF-TOKEN":this.getCsrfToken()})}}function j(e,t,r,n){const a=window.top;a==null||a.postMessage({topic:e,token:t,data:r},(n==null?void 0:n.origin)||"*")}function Mn(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function le(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _t=Object.create,Bn=function(){function e(){}return function(t){if(!le(t))return{};if(_t)return _t(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Un=Bn;function Nn(e){return function(t,r,n){for(var a=-1,s=Object(t),u=n(t),i=u.length;i--;){var w=u[e?i:++a];if(r(s[w],w,s)===!1)break}return t}}var $n=Nn();const xn=$n;function Zn(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var jn=typeof global=="object"&&global&&global.Object===Object&&global;const Pt=jn;var En=typeof self=="object"&&self&&self.Object===Object&&self,Kn=Pt||En||Function("return this")();const K=Kn;var zn=K.Symbol;const H=zn;var It=Object.prototype,Wn=It.hasOwnProperty,Xn=It.toString,de=H?H.toStringTag:void 0;function Rn(e){var t=Wn.call(e,de),r=e[de];try{e[de]=void 0;var n=!0}catch{}var a=Xn.call(e);return n&&(t?e[de]=r:delete e[de]),a}var Vn=Object.prototype,Hn=Vn.toString;function Yn(e){return Hn.call(e)}var Jn="[object Null]",Qn="[object Undefined]",Gt=H?H.toStringTag:void 0;function oe(e){return e==null?e===void 0?Qn:Jn:Gt&&Gt in Object(e)?Rn(e):Yn(e)}function ae(e){return e!=null&&typeof e=="object"}var Fn="[object Arguments]";function St(e){return ae(e)&&oe(e)==Fn}var kt=Object.prototype,qn=kt.hasOwnProperty,eo=kt.propertyIsEnumerable,to=St(function(){return arguments}())?St:function(e){return ae(e)&&qn.call(e,"callee")&&!eo.call(e,"callee")};const Ot=to;var ro=Array.isArray;const E=ro;function no(){return!1}var Lt=typeof l=="object"&&l&&!l.nodeType&&l,Mt=Lt&&typeof module=="object"&&module&&!module.nodeType&&module,oo=Mt&&Mt.exports===Lt,Bt=oo?K.Buffer:void 0,ao=Bt?Bt.isBuffer:void 0,so=ao||no;const Ae=so;var uo=9007199254740991,io=/^(?:0|[1-9]\d*)$/;function Ut(e,t){var r=typeof e;return t=t??uo,!!t&&(r=="number"||r!="symbol"&&io.test(e))&&e>-1&&e%1==0&&e<t}var co=9007199254740991;function Re(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=co}var lo="[object Arguments]",mo="[object Array]",po="[object Boolean]",go="[object Date]",fo="[object Error]",wo="[object Function]",ho="[object Map]",yo="[object Number]",bo="[object Object]",Do="[object RegExp]",Ao="[object Set]",vo="[object String]",To="[object WeakMap]",Co="[object ArrayBuffer]",_o="[object DataView]",Po="[object Float32Array]",Io="[object Float64Array]",Go="[object Int8Array]",So="[object Int16Array]",ko="[object Int32Array]",Oo="[object Uint8Array]",Lo="[object Uint8ClampedArray]",Mo="[object Uint16Array]",Bo="[object Uint32Array]",I={};I[Po]=I[Io]=I[Go]=I[So]=I[ko]=I[Oo]=I[Lo]=I[Mo]=I[Bo]=!0,I[lo]=I[mo]=I[Co]=I[po]=I[_o]=I[go]=I[fo]=I[wo]=I[ho]=I[yo]=I[bo]=I[Do]=I[Ao]=I[vo]=I[To]=!1;function Uo(e){return ae(e)&&Re(e.length)&&!!I[oe(e)]}function No(e){return function(t){return e(t)}}var Nt=typeof l=="object"&&l&&!l.nodeType&&l,me=Nt&&typeof module=="object"&&module&&!module.nodeType&&module,$o=me&&me.exports===Nt,Ve=$o&&Pt.process,xo=function(){try{var e=me&&me.require&&me.require("util").types;return e||Ve&&Ve.binding&&Ve.binding("util")}catch{}}();const $t=xo;var xt=$t&&$t.isTypedArray,Zo=xt?No(xt):Uo;const He=Zo;var jo=Object.prototype,Eo=jo.hasOwnProperty;function Ko(e,t){var r=E(e),n=!r&&Ot(e),a=!r&&!n&&Ae(e),s=!r&&!n&&!a&&He(e),u=r||n||a||s,i=u?Zn(e.length,String):[],w=i.length;for(var d in e)(t||Eo.call(e,d))&&!(u&&(d=="length"||a&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Ut(d,w)))&&i.push(d);return i}var zo=Object.prototype;function Wo(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||zo;return e===r}function Zt(e,t){return function(r){return e(t(r))}}var Xo=Zt(Object.keys,Object);const Ro=Xo;var Vo=Object.prototype,Ho=Vo.hasOwnProperty;function Yo(e){if(!Wo(e))return Ro(e);var t=[];for(var r in Object(e))Ho.call(e,r)&&r!="constructor"&&t.push(r);return t}var Jo="[object AsyncFunction]",Qo="[object Function]",Fo="[object GeneratorFunction]",qo="[object Proxy]";function Ye(e){if(!le(e))return!1;var t=oe(e);return t==Qo||t==Fo||t==Jo||t==qo}function ea(e){return e!=null&&Re(e.length)&&!Ye(e)}function Je(e){return ea(e)?Ko(e):Yo(e)}function ta(e,t){return e&&xn(e,t,Je)}function ra(){this.__data__=[],this.size=0}function jt(e,t){return e===t||e!==e&&t!==t}function ve(e,t){for(var r=e.length;r--;)if(jt(e[r][0],t))return r;return-1}var na=Array.prototype,oa=na.splice;function aa(e){var t=this.__data__,r=ve(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():oa.call(t,r,1),--this.size,!0}function sa(e){var t=this.__data__,r=ve(t,e);return r<0?void 0:t[r][1]}function ua(e){return ve(this.__data__,e)>-1}function ia(e,t){var r=this.__data__,n=ve(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function z(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}z.prototype.clear=ra,z.prototype.delete=aa,z.prototype.get=sa,z.prototype.has=ua,z.prototype.set=ia;function ca(){this.__data__=new z,this.size=0}function la(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function da(e){return this.__data__.get(e)}function ma(e){return this.__data__.has(e)}var pa=K["__core-js_shared__"];const Qe=pa;var Et=function(){var e=/[^.]+$/.exec(Qe&&Qe.keys&&Qe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ga(e){return!!Et&&Et in e}var fa=Function.prototype,wa=fa.toString;function F(e){if(e!=null){try{return wa.call(e)}catch{}try{return e+""}catch{}}return""}var ha=/[\\^$.*+?()[\]{}|]/g,ya=/^\[object .+?Constructor\]$/,ba=Function.prototype,Da=Object.prototype,Aa=ba.toString,va=Da.hasOwnProperty,Ta=RegExp("^"+Aa.call(va).replace(ha,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ca(e){if(!le(e)||ga(e))return!1;var t=Ye(e)?Ta:ya;return t.test(F(e))}function _a(e,t){return e==null?void 0:e[t]}function se(e,t){var r=_a(e,t);return Ca(r)?r:void 0}var Pa=se(K,"Map");const pe=Pa;var Ia=se(Object,"create");const ge=Ia;function Ga(){this.__data__=ge?ge(null):{},this.size=0}function Sa(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ka="__lodash_hash_undefined__",Oa=Object.prototype,La=Oa.hasOwnProperty;function Ma(e){var t=this.__data__;if(ge){var r=t[e];return r===ka?void 0:r}return La.call(t,e)?t[e]:void 0}var Ba=Object.prototype,Ua=Ba.hasOwnProperty;function Na(e){var t=this.__data__;return ge?t[e]!==void 0:Ua.call(t,e)}var $a="__lodash_hash_undefined__";function xa(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ge&&t===void 0?$a:t,this}function q(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}q.prototype.clear=Ga,q.prototype.delete=Sa,q.prototype.get=Ma,q.prototype.has=Na,q.prototype.set=xa;function Za(){this.size=0,this.__data__={hash:new q,map:new(pe||z),string:new q}}function ja(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Te(e,t){var r=e.__data__;return ja(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Ea(e){var t=Te(this,e).delete(e);return this.size-=t?1:0,t}function Ka(e){return Te(this,e).get(e)}function za(e){return Te(this,e).has(e)}function Wa(e,t){var r=Te(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function W(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}W.prototype.clear=Za,W.prototype.delete=Ea,W.prototype.get=Ka,W.prototype.has=za,W.prototype.set=Wa;var Xa=200;function Ra(e,t){var r=this.__data__;if(r instanceof z){var n=r.__data__;if(!pe||n.length<Xa-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new W(n)}return r.set(e,t),this.size=r.size,this}function X(e){var t=this.__data__=new z(e);this.size=t.size}X.prototype.clear=ca,X.prototype.delete=la,X.prototype.get=da,X.prototype.has=ma,X.prototype.set=Ra;var Va="__lodash_hash_undefined__";function Ha(e){return this.__data__.set(e,Va),this}function Ya(e){return this.__data__.has(e)}function Ce(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new W;++t<r;)this.add(e[t])}Ce.prototype.add=Ce.prototype.push=Ha,Ce.prototype.has=Ya;function Ja(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Qa(e,t){return e.has(t)}var Fa=1,qa=2;function Kt(e,t,r,n,a,s){var u=r&Fa,i=e.length,w=t.length;if(i!=w&&!(u&&w>i))return!1;var d=s.get(e),h=s.get(t);if(d&&h)return d==t&&h==e;var p=-1,m=!0,y=r&qa?new Ce:void 0;for(s.set(e,t),s.set(t,e);++p<i;){var D=e[p],b=t[p];if(n)var v=u?n(b,D,p,t,e,s):n(D,b,p,e,t,s);if(v!==void 0){if(v)continue;m=!1;break}if(y){if(!Ja(t,function(T,k){if(!Qa(y,k)&&(D===T||a(D,T,r,n,s)))return y.push(k)})){m=!1;break}}else if(!(D===b||a(D,b,r,n,s))){m=!1;break}}return s.delete(e),s.delete(t),m}var es=K.Uint8Array;const zt=es;function ts(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}function rs(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ns=1,os=2,as="[object Boolean]",ss="[object Date]",us="[object Error]",is="[object Map]",cs="[object Number]",ls="[object RegExp]",ds="[object Set]",ms="[object String]",ps="[object Symbol]",gs="[object ArrayBuffer]",fs="[object DataView]",Wt=H?H.prototype:void 0,Fe=Wt?Wt.valueOf:void 0;function ws(e,t,r,n,a,s,u){switch(r){case fs:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gs:return!(e.byteLength!=t.byteLength||!s(new zt(e),new zt(t)));case as:case ss:case cs:return jt(+e,+t);case us:return e.name==t.name&&e.message==t.message;case ls:case ms:return e==t+"";case is:var i=ts;case ds:var w=n&ns;if(i||(i=rs),e.size!=t.size&&!w)return!1;var d=u.get(e);if(d)return d==t;n|=os,u.set(e,t);var h=Kt(i(e),i(t),n,a,s,u);return u.delete(e),h;case ps:if(Fe)return Fe.call(e)==Fe.call(t)}return!1}function hs(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function ys(e,t,r){var n=t(e);return E(e)?n:hs(n,r(e))}function bs(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var u=e[r];t(u,r,e)&&(s[a++]=u)}return s}function Ds(){return[]}var As=Object.prototype,vs=As.propertyIsEnumerable,Xt=Object.getOwnPropertySymbols,Ts=Xt?function(e){return e==null?[]:(e=Object(e),bs(Xt(e),function(t){return vs.call(e,t)}))}:Ds;const Cs=Ts;function Rt(e){return ys(e,Je,Cs)}var _s=1,Ps=Object.prototype,Is=Ps.hasOwnProperty;function Gs(e,t,r,n,a,s){var u=r&_s,i=Rt(e),w=i.length,d=Rt(t),h=d.length;if(w!=h&&!u)return!1;for(var p=w;p--;){var m=i[p];if(!(u?m in t:Is.call(t,m)))return!1}var y=s.get(e),D=s.get(t);if(y&&D)return y==t&&D==e;var b=!0;s.set(e,t),s.set(t,e);for(var v=u;++p<w;){m=i[p];var T=e[m],k=t[m];if(n)var B=u?n(k,T,m,t,e,s):n(T,k,m,e,t,s);if(!(B===void 0?T===k||a(T,k,r,n,s):B)){b=!1;break}v||(v=m=="constructor")}if(b&&!v){var C=e.constructor,_=t.constructor;C!=_&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof _=="function"&&_ instanceof _)&&(b=!1)}return s.delete(e),s.delete(t),b}var Ss=se(K,"DataView");const qe=Ss;var ks=se(K,"Promise");const et=ks;var Os=se(K,"Set");const tt=Os;var Ls=se(K,"WeakMap");const rt=Ls;var Vt="[object Map]",Ms="[object Object]",Ht="[object Promise]",Yt="[object Set]",Jt="[object WeakMap]",Qt="[object DataView]",Bs=F(qe),Us=F(pe),Ns=F(et),$s=F(tt),xs=F(rt),ee=oe;(qe&&ee(new qe(new ArrayBuffer(1)))!=Qt||pe&&ee(new pe)!=Vt||et&&ee(et.resolve())!=Ht||tt&&ee(new tt)!=Yt||rt&&ee(new rt)!=Jt)&&(ee=function(e){var t=oe(e),r=t==Ms?e.constructor:void 0,n=r?F(r):"";if(n)switch(n){case Bs:return Qt;case Us:return Vt;case Ns:return Ht;case $s:return Yt;case xs:return Jt}return t});const Ft=ee;var Zs=1,qt="[object Arguments]",er="[object Array]",_e="[object Object]",js=Object.prototype,tr=js.hasOwnProperty;function Es(e,t,r,n,a,s){var u=E(e),i=E(t),w=u?er:Ft(e),d=i?er:Ft(t);w=w==qt?_e:w,d=d==qt?_e:d;var h=w==_e,p=d==_e,m=w==d;if(m&&Ae(e)){if(!Ae(t))return!1;u=!0,h=!1}if(m&&!h)return s||(s=new X),u||He(e)?Kt(e,t,r,n,a,s):ws(e,t,w,r,n,a,s);if(!(r&Zs)){var y=h&&tr.call(e,"__wrapped__"),D=p&&tr.call(t,"__wrapped__");if(y||D){var b=y?e.value():e,v=D?t.value():t;return s||(s=new X),a(b,v,r,n,s)}}return m?(s||(s=new X),Gs(e,t,r,n,a,s)):!1}function nt(e,t,r,n,a){return e===t?!0:e==null||t==null||!ae(e)&&!ae(t)?e!==e&&t!==t:Es(e,t,r,n,nt,a)}var Ks=1,zs=2;function Ws(e,t,r,n){var a=r.length,s=a,u=!n;if(e==null)return!s;for(e=Object(e);a--;){var i=r[a];if(u&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++a<s;){i=r[a];var w=i[0],d=e[w],h=i[1];if(u&&i[2]){if(d===void 0&&!(w in e))return!1}else{var p=new X;if(n)var m=n(d,h,w,e,t,p);if(!(m===void 0?nt(h,d,Ks|zs,n,p):m))return!1}}return!0}function rr(e){return e===e&&!le(e)}function Xs(e){for(var t=Je(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,rr(a)]}return t}function nr(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Rs(e){var t=Xs(e);return t.length==1&&t[0][2]?nr(t[0][0],t[0][1]):function(r){return r===e||Ws(r,e,t)}}var Vs="[object Symbol]";function ot(e){return typeof e=="symbol"||ae(e)&&oe(e)==Vs}var Hs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ys=/^\w*$/;function at(e,t){if(E(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ot(e)?!0:Ys.test(e)||!Hs.test(e)||t!=null&&e in Object(t)}var Js="Expected a function";function st(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Js);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var u=e.apply(this,n);return r.cache=s.set(a,u)||s,u};return r.cache=new(st.Cache||W),r}st.Cache=W;var Qs=500;function Fs(e){var t=st(e,function(n){return r.size===Qs&&r.clear(),n}),r=t.cache;return t}var qs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eu=/\\(\\)?/g,tu=Fs(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(qs,function(r,n,a,s){t.push(a?s.replace(eu,"$1"):n||r)}),t});const ru=tu;function nu(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var ou=1/0,or=H?H.prototype:void 0,ar=or?or.toString:void 0;function sr(e){if(typeof e=="string")return e;if(E(e))return nu(e,sr)+"";if(ot(e))return ar?ar.call(e):"";var t=e+"";return t=="0"&&1/e==-ou?"-0":t}function fe(e){return e==null?"":sr(e)}function ur(e,t){return E(e)?e:at(e,t)?[e]:ru(fe(e))}var au=1/0;function Pe(e){if(typeof e=="string"||ot(e))return e;var t=e+"";return t=="0"&&1/e==-au?"-0":t}function ir(e,t){t=ur(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Pe(t[r++])];return r&&r==n?e:void 0}function su(e,t,r){var n=e==null?void 0:ir(e,t);return n===void 0?r:n}function uu(e,t){return e!=null&&t in Object(e)}function iu(e,t,r){t=ur(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var u=Pe(t[n]);if(!(s=e!=null&&r(e,u)))break;e=e[u]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&Re(a)&&Ut(u,a)&&(E(e)||Ot(e)))}function cu(e,t){return e!=null&&iu(e,t,uu)}var lu=1,du=2;function mu(e,t){return at(e)&&rr(t)?nr(Pe(e),t):function(r){var n=su(r,e);return n===void 0&&n===t?cu(r,e):nt(t,n,lu|du)}}function pu(e){return e}function gu(e){return function(t){return t==null?void 0:t[e]}}function fu(e){return function(t){return ir(t,e)}}function wu(e){return at(e)?gu(Pe(e)):fu(e)}function hu(e){return typeof e=="function"?e:e==null?pu:typeof e=="object"?E(e)?mu(e[0],e[1]):Rs(e):wu(e)}var yu=Zt(Object.getPrototypeOf,Object);const bu=yu;function Du(e,t,r){var n=E(e),a=n||Ae(e)||He(e);if(t=hu(t),r==null){var s=e&&e.constructor;a?r=n?new s:[]:le(e)?r=Ye(s)?Un(bu(e)):{}:r={}}return(a?Mn:ta)(e,function(u,i,w){return t(r,u,i,w)}),r}function Au(e,t,r,n){var a=-1,s=e==null?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}function vu(e){return function(t){return e==null?void 0:e[t]}}var Tu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Cu=vu(Tu);const _u=Cu;var Pu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Iu="\\u0300-\\u036f",Gu="\\ufe20-\\ufe2f",Su="\\u20d0-\\u20ff",ku=Iu+Gu+Su,Ou="["+ku+"]",Lu=RegExp(Ou,"g");function Mu(e){return e=fe(e),e&&e.replace(Pu,_u).replace(Lu,"")}var Bu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Uu(e){return e.match(Bu)||[]}var Nu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function $u(e){return Nu.test(e)}var cr="\\ud800-\\udfff",xu="\\u0300-\\u036f",Zu="\\ufe20-\\ufe2f",ju="\\u20d0-\\u20ff",Eu=xu+Zu+ju,lr="\\u2700-\\u27bf",dr="a-z\\xdf-\\xf6\\xf8-\\xff",Ku="\\xac\\xb1\\xd7\\xf7",zu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Wu="\\u2000-\\u206f",Xu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mr="A-Z\\xc0-\\xd6\\xd8-\\xde",Ru="\\ufe0e\\ufe0f",pr=Ku+zu+Wu+Xu,gr="['’]",fr="["+pr+"]",Vu="["+Eu+"]",wr="\\d+",Hu="["+lr+"]",hr="["+dr+"]",yr="[^"+cr+pr+wr+lr+dr+mr+"]",Yu="\\ud83c[\\udffb-\\udfff]",Ju="(?:"+Vu+"|"+Yu+")",Qu="[^"+cr+"]",br="(?:\\ud83c[\\udde6-\\uddff]){2}",Dr="[\\ud800-\\udbff][\\udc00-\\udfff]",ue="["+mr+"]",Fu="\\u200d",Ar="(?:"+hr+"|"+yr+")",qu="(?:"+ue+"|"+yr+")",vr="(?:"+gr+"(?:d|ll|m|re|s|t|ve))?",Tr="(?:"+gr+"(?:D|LL|M|RE|S|T|VE))?",Cr=Ju+"?",_r="["+Ru+"]?",ei="(?:"+Fu+"(?:"+[Qu,br,Dr].join("|")+")"+_r+Cr+")*",ti="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ri="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ni=_r+Cr+ei,oi="(?:"+[Hu,br,Dr].join("|")+")"+ni,ai=RegExp([ue+"?"+hr+"+"+vr+"(?="+[fr,ue,"$"].join("|")+")",qu+"+"+Tr+"(?="+[fr,ue+Ar,"$"].join("|")+")",ue+"?"+Ar+"+"+vr,ue+"+"+Tr,ri,ti,wr,oi].join("|"),"g");function si(e){return e.match(ai)||[]}function ui(e,t,r){return e=fe(e),t=r?void 0:t,t===void 0?$u(e)?si(e):Uu(e):e.match(t)||[]}var ii="['’]",ci=RegExp(ii,"g");function Pr(e){return function(t){return Au(ui(Mu(t).replace(ci,"")),e,"")}}var li=Pr(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});const di=li;function mi(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}function pi(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:mi(e,t,r)}var gi="\\ud800-\\udfff",fi="\\u0300-\\u036f",wi="\\ufe20-\\ufe2f",hi="\\u20d0-\\u20ff",yi=fi+wi+hi,bi="\\ufe0e\\ufe0f",Di="\\u200d",Ai=RegExp("["+Di+gi+yi+bi+"]");function Ir(e){return Ai.test(e)}function vi(e){return e.split("")}var Gr="\\ud800-\\udfff",Ti="\\u0300-\\u036f",Ci="\\ufe20-\\ufe2f",_i="\\u20d0-\\u20ff",Pi=Ti+Ci+_i,Ii="\\ufe0e\\ufe0f",Gi="["+Gr+"]",ut="["+Pi+"]",it="\\ud83c[\\udffb-\\udfff]",Si="(?:"+ut+"|"+it+")",Sr="[^"+Gr+"]",kr="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",ki="\\u200d",Lr=Si+"?",Mr="["+Ii+"]?",Oi="(?:"+ki+"(?:"+[Sr,kr,Or].join("|")+")"+Mr+Lr+")*",Li=Mr+Lr+Oi,Mi="(?:"+[Sr+ut+"?",ut,kr,Or,Gi].join("|")+")",Bi=RegExp(it+"(?="+it+")|"+Mi+Li,"g");function Ui(e){return e.match(Bi)||[]}function Ni(e){return Ir(e)?Ui(e):vi(e)}function $i(e){return function(t){t=fe(t);var r=Ir(t)?Ni(t):void 0,n=r?r[0]:t.charAt(0),a=r?pi(r,1).join(""):t.slice(1);return n[e]()+a}}var xi=$i("toUpperCase");const Zi=xi;function ji(e){return Zi(fe(e).toLowerCase())}var Ei=Pr(function(e,t,r){return t=t.toLowerCase(),e+(r?ji(t):t)});const Ki=Ei,Y=(e,t)=>{if(!e||!t||typeof e!="object"||typeof t!="object")return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r)if(typeof e[a]=="object"&&!Y(e[a],t[a])||typeof e[a]!="object"&&e[a]!==t[a])return!1;return!0},we=e=>e&&typeof e=="object"&&!Array.isArray(e),J=(e,...t)=>{if(t.length===0)return e;const r=t.shift();if(we(e)&&we(r))for(const n in r)we(r[n])?(e[n]||Object.assign(e,{[n]:{}}),J(e[n],r[n])):Object.assign(e,{[n]:r[n]});return J(e,...t)},N=(e,t)=>{const r={camel:Ki,snake:di};return Du(e,(n,a,s,u)=>{const i=Array.isArray(u)?s:r[t](s);n[i]=we(a)||Array.isArray(a)?N(a,t):a})};class Br extends Error{constructor(t){super(`Call with topic ${t} failed.`),this.name="FetchError"}}class Ur extends Error{constructor(t){super(`Timeout for call with topic "${t}" expired. Call was aborted.`),this.name="TimeoutReachedError"}}const Nr=3*1e3;function Q(e,t,r){return new Promise((n,a)=>{const s=u=>{const i=u.data;i.token===t&&i.topic===e&&i.success?n(i.data||!0):a(new Br(e)),window.removeEventListener("message",s)};window.addEventListener("message",s),setTimeout(()=>{a(new Ur(e))},(r==null?void 0:r.timeout)||Nr)})}const U=vt(),zi=3*1e3,$r=5*60*1e3;class Wi{getAppState(){return j(L.GetAppState,U),Q(L.GetAppState,U)}async putAppState(t){return j(L.PutAppState,U,t),Q(L.PutAppState,U)}async deleteAppState(){return j(L.DeleteAppState,U),Q(L.DeleteAppState,U)}getAssetById(t){return j(L.GetAssetById,U,{assetId:t}),Q(L.GetAssetById,U)}async postExternalAssets(t){const n=t.filter(a=>a.previewUrl).length>0?$r:zi;return j(L.PostExternalAssets,U,t),Q(L.PostExternalAssets,U,{timeout:n})}getThirdPartyOauth2Tokens(){return j(L.GetThirdPartyOauth2Tokens,U),Q(L.GetThirdPartyOauth2Tokens,U,{timeout:$r})}getRefreshedThirdpartyOauth2Tokens(t){return j(L.GetRefreshedThirdpartyOauth2Token,U,{refreshToken:t}),Q(L.GetRefreshedThirdpartyOauth2Token,U)}closeApp(){j(L.CloseApp,U)}openAssetChooser(){j(L.OpenAssetChooser,U)}}const Xi=e=>({name:"openAssetChooser",payload:e}),Ri=()=>({name:"closeAssetChooser"}),Vi=({token:e})=>({name:"openAssetViewer",payload:{token:e}}),Hi=()=>({name:"openNavigationManager"}),Yi=()=>({name:"openTemplateChooser"}),Ji=()=>({name:"closeTemplateChooser"}),Qi=e=>({openAssetChooser:e.openAssetChooser.bind(e),closeAssetChooser:e.closeAssetChooser.bind(e)}),xr="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2xldCByPVtdLHA9W10sYT1bXSxpPVtdLGY9e2xvYWRlZDowLHRvdGFsOjB9O2NvbnN0IG09W107bGV0IGQ9ITE7ZnVuY3Rpb24geSgpe20ubGVuZ3RoPD0wfHxtLnNoaWZ0KCkuc3RhcnQoKX1mdW5jdGlvbiBiKGUsbyl7Y29uc3Qgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7dHJ5e3MudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24obil7Zi5sb2FkZWQrPW4ubG9hZGVkLWlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkLGlbZS5pbmRleF1bZS5jaHVua10ubG9hZGVkPW4ubG9hZGVkO2xldCB0PTA7aVtlLmluZGV4XS5mb3JFYWNoKGw9Pnt0Kz1sLmxvYWRlZH0pLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzIixsb2FkZWQ6dCx0b3RhbDplLnRvdGFsLGxlbmd0aENvbXB1dGFibGU6bi5sZW5ndGhDb21wdXRhYmxlLGluZGV4OmUuaW5kZXh9KSxzZWxmLnBvc3RNZXNzYWdlKHtldmVudDoib25Qcm9ncmVzc0FsbCIsbG9hZGVkOmYubG9hZGVkLHRvdGFsOmYudG90YWx9KX19Y2F0Y2h7cy5vbnByb2dyZXNzPWZ1bmN0aW9uKHQpe3NlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvblByb2dyZXNzQWxsIixsb2FkZWQ6dC5sb2FkZWQsdG90YWw6dC50b3RhbH0pfX1yZXR1cm4gcy5vcGVuKCJQVVQiLGUudXJsLCEwKSxzLm9ubG9hZD1mdW5jdGlvbigpe2lbZS5pbmRleF1bZS5jaHVua10uZmluaXNoZWQ9ITA7bGV0IG49ITA7Zm9yKGxldCB0PTE7dDxpW2UuaW5kZXhdLmxlbmd0aDt0KyspaVtlLmluZGV4XVt0XS5maW5pc2hlZHx8KG49ITEpO2lmKG4pe3JbZS5pbmRleF0uZmluaXNoZWQ9ITA7Y29uc3QgdD1uZXcgWE1MSHR0cFJlcXVlc3Q7dC5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvcHJvZ3Jlc3NgLCEwKSx0LnNldFJlcXVlc3RIZWFkZXIoImNvbnRlbnQtdHlwZSIsImFwcGxpY2F0aW9uL2pzb24iKSx0Lm9ubG9hZD1mdW5jdGlvbigpe2xldCBsO3RyeXtsPUpTT04ucGFyc2UodC5yZXNwb25zZVRleHQpfWNhdGNoe2w9e319bC5ldmVudD0ib25Eb25lIixsLmluZGV4PWUuaW5kZXgsc2VsZi5wb3N0TWVzc2FnZShsKSx4KCl9LHQuc2VuZChKU09OLnN0cmluZ2lmeShlKSl9eSgpfSx7c3RhcnQoKXtzLnNlbmQobyl9fX1mdW5jdGlvbiBOKCl7Y29uc3QgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKCJQT1NUIixgJHtzZWxmLmxvY2F0aW9uLm9yaWdpbn0vYXBpL2ZpbGUvaW5pdGAsITApLGUuc2V0UmVxdWVzdEhlYWRlcigiY29udGVudC10eXBlIiwiYXBwbGljYXRpb24vanNvbiIpLGUub25sb2FkPWZ1bmN0aW9uKCl7bGV0IG87dHJ5e289SlNPTi5wYXJzZShlLnJlc3BvbnNlVGV4dCl9Y2F0Y2h7bz17c3VjY2VzczohMX19aWYoIW8uc3VjY2Vzc3x8IShvLmZpbGVzJiZvLmZpbGVzLmxlbmd0aD4wKSl7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmFpbCJ9KTtyZXR1cm59cD1wLmNvbmNhdChvLmZpbGVzKSxkfHwoZD0hMCx4KCkpfSxlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2ZpbGVzOmF9KSl9ZnVuY3Rpb24geCgpe2xldCBlPSExO2ZvcihsZXQgbz0wO288ci5sZW5ndGg7bysrKXtjb25zdCBzPXJbb107IWUmJiFzLmZpbmlzaGVkJiYoZT0hMCxrKG8scltvXSxwW29dKSl9ZXx8UCgpfWZ1bmN0aW9uIGsoZSxvLHMpe2lmKHR5cGVvZiBzIT0ib2JqZWN0Iil7UyhlLG8se30pO3JldHVybn1pZighcy5zdWNjZXNzKXtTKGUsbyxzKTtyZXR1cm59aVtlXT1bXTtjb25zdCBuPW8sdD0xNSoxMDI0KjEwMjQsbD1uLnNpemU7bGV0IHU9MCxjPXQsaD0xO2Zvcig7dTxsOyl7Y29uc3QgZz1uLnNsaWNlKHUsYyk7aVtlXVtoXT17ZmluaXNoZWQ6ITEsbG9hZGVkOjB9LG0ucHVzaChiKHtpbmRleDplLHN0YXJ0OnUsdXBsb2FkOnMudXBsb2FkLG9iamVjdDpzLm9iamVjdCx1cmw6cy51cGxvYWQudXJsc1toXSxtb3JlOmM8bCxlbmQ6TWF0aC5taW4oYyxsLTEpLHRvdGFsOmwsY2h1bms6aH0sZykpLHU9YyxjPXUrdCxoKyt9Zm9yKGxldCBnPTA7Zzw0O2crKyl5KCl9ZnVuY3Rpb24gUyhlLG8scyl7Y29uc3Qgbj0ocz09bnVsbD92b2lkIDA6cy5lcnJvcik/PyJVbmFibGUgdG8gcHJvY2VzcyBmaWxlLiI7c2VsZi5wb3N0TWVzc2FnZSh7ZXZlbnQ6Im9uRmlsZUZhaWwiLGluZGV4OmUsZmlsZTpvLGZpbGVfbWV0YWRhdGE6cyxlcnJvcjpufSksZD0hMSxvLmZpbmlzaGVkPSEwLHgoKX1mdW5jdGlvbiBQKCl7cj1bXSxwPVtdLGE9W10saT1bXSxmPXtsb2FkZWQ6MCx0b3RhbDowfSxkPSExLHNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJvbkRvbmVBbGwifSl9c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7YT1bXTtmb3IobGV0IG89MDtvPGUuZGF0YS5maWxlcy5sZW5ndGg7bysrKXtjb25zdCBzPWUuZGF0YS5maWxlc1tvXTtsZXQgbj17bmFtZTpzLm5hbWUsc2l6ZTpzLnNpemUsdHlwZTpzLnR5cGV9O3R5cGVvZiBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZT09ImZ1bmN0aW9uIiYmKG4ubmFtZT1uLm5hbWUubm9ybWFsaXplKCJORkMiKSksZi50b3RhbCs9cy5zaXplLGUuZGF0YS5mb3JtRGF0YSYmKG49ey4uLm4sLi4uZS5kYXRhLmZvcm1EYXRhW29dfSksci5wdXNoKHMpLGEucHVzaChuKX1OKCl9fSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBsb2FkLndvcmtlci05N2NmNDgzYi5qcy5tYXAK",Zr=typeof window<"u"&&window.Blob&&new Blob([atob(xr)],{type:"text/javascript;charset=utf-8"});function Fi(){let e;try{if(e=Zr&&(window.URL||window.webkitURL).createObjectURL(Zr),!e)throw"";return new Worker(e)}catch{return new Worker("data:application/javascript;base64,"+xr)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const jr=e=>{const t=f.useRef([]),[r,n]=f.useState(!1),{onUploadProgress:a,onUploadProgressAll:s,onUploadDone:u,onUploadDoneAll:i,onUploadFail:w,onUploadFileFail:d}=e??{},h=f.useRef();f.useEffect(()=>{const C=new Fi;return h.current=C,C.addEventListener("message",_=>{switch(_.data.event){case"onProgress":p(_);break;case"onProgressAll":m(_);break;case"onDone":y(_);break;case"onDoneAll":D();break;case"onFail":b();break;case"onFileFail":v(_);break;default:throw new Error(`${_.data.event} is not handled`)}}),()=>{C.terminate()}},[]);const p=C=>{a==null||a(C)},m=C=>{s==null||s(C)},y=C=>{u==null||u(C),t.current=[...t.current,C.data]},D=()=>{i==null||i(t.current),n(!0)},b=()=>{throw w==null||w(),new Error("File upload failed")},v=C=>{d==null||d(C)},T=C=>{const _=[];return C instanceof File&&_.push(C),C instanceof FileList&&_.push(...Array.from(C)),_},k=()=>{n(!1),t.current=[]};return[C=>{k();const _=T(C);if(_.length===0)return;const ie={files:_};h!=null&&h.current&&h.current.postMessage(ie)},{results:t.current,doneAll:r}]},qi=async(e,t,r)=>{const{result:n}=await Ct.post("/api/asset",{file_id:e,project_id:t,set_id:r});return{...n.data,...ec(n.data)}},ec=e=>({id:e.id,objectType:e.object_type,extension:e.ext,creatorName:e.creator_name,externalUrl:e.external_url,genericUrl:e.generic_url,previewUrl:e.preview_url,originUrl:e.file_origin_url,fileName:e.file_name,fileSize:e.file_size,fileSizeHumanReadable:e.file_size_formatted,height:e.height,width:e.width,projectId:e.project_id,status:e.status,title:e.title,fileId:e.file_id,token:e.token}),tc=e=>{var ie,Ne,$e,xe,Ze;const t=f.useRef([]),r=f.useRef([]),[n,a]=f.useState(!1),{onUploadProgress:s,onUploadProgressAll:u,onUploadDone:i,onUploadDoneAll:w,onUploadFail:d,onUploadAssetFail:h}=e??{},p=(Ze=(xe=($e=(Ne=(ie=window.application)==null?void 0:ie.sandbox)==null?void 0:Ne.config)==null?void 0:$e.context)==null?void 0:xe.project)==null?void 0:Ze.id,m=x=>{s==null||s(x)},y=x=>{u==null||u(x)},D=async x=>{const je=B(x.data.file_id);r.current.push(je),i==null||i(x),t.current=[...t.current,await je]},b=async()=>{await Promise.all(r.current),w==null||w(t.current),a(!0)},v=()=>{d==null||d()},T=x=>{h==null||h(x)},k=()=>{a(!1),t.current=[]},B=async x=>await qi(x,p),[C]=jr({onUploadProgress:m,onUploadProgressAll:y,onUploadDone:D,onUploadDoneAll:b,onUploadFail:v,onUploadFileFail:T});return[x=>{k(),C(x)},{results:t.current,doneAll:n}]},rc=e=>({open:async({token:r})=>{e.openAssetViewer(r)}}),nc=e=>{const t=e.getBlockId(),[r,n]=f.useState({}),a=d=>{d.blockId===t&&!Y(d.blockAssets,d.prevBlockAssets)&&n(d.blockAssets)};f.useEffect(()=>{let d=!0;return t&&((async()=>{const p=await e.getBlockAssets();d&&n(p)})(),window.emitter.on("AppBridge:BlockAssetsUpdated",a)),()=>{d=!1,window.emitter.off("AppBridge:BlockAssetsUpdated",a)}},[e]);const s=async()=>{window.emitter.emit("AppBridge:BlockAssetsUpdated",{blockId:t,blockAssets:await e.getBlockAssets(),prevBlockAssets:{...r}})};return{blockAssets:r,addAssetIdsToKey:async(d,h)=>{await e.addAssetIdsToBlockAssetKey(d,h),s()},deleteAssetIdsFromKey:async(d,h)=>{await e.deleteAssetIdsFromBlockAssetKey(d,h),s()},updateAssetIdsFromKey:async(d,h)=>{var y;const m=((y=(await e.getBlockAssets())[d])==null?void 0:y.map(D=>D.id))??[];try{await e.deleteAssetIdsFromBlockAssetKey(d,m),await e.addAssetIdsToBlockAssetKey(d,h)}catch(D){console.error(D)}s()}}},oc=e=>{const t=e.getBlockId(),[r,n]=f.useState({}),a=d=>{d.blockId===t&&!Y(d.blockTemplates,d.prevBlockTemplates)&&n(d.blockTemplates)};f.useEffect(()=>{let d=!0;return t&&((async()=>{const p=await e.getBlockTemplates();d&&n(p)})(),window.emitter.on("AppBridge:BlockTemplatesUpdated",a)),()=>{d=!1,window.emitter.off("AppBridge:BlockTemplatesUpdated",a)}},[e]);const s=async()=>{window.emitter.emit("AppBridge:BlockTemplatesUpdated",{blockId:t,blockTemplates:await e.getBlockTemplates(),prevBlockTemplates:{...r}})};return{blockTemplates:r,addTemplateIdsToKey:async(d,h)=>{await e.addTemplateIdsToBlockTemplateKey(d,h),s()},deleteTemplateIdsFromKey:async(d,h)=>{await e.deleteTemplateIdsFromBlockTemplateKey(d,h),s()},updateTemplateIdsFromKey:async(d,h)=>{var y;const m=((y=(await e.getBlockTemplates())[d])==null?void 0:y.map(D=>D.id))??[];try{await e.deleteTemplateIdsFromBlockTemplateKey(d,m),await e.addTemplateIdsToBlockTemplateKey(d,h)}catch(D){console.error(D)}s()}}},ac=e=>{const t=e.getBlockId(),[r,n]=f.useState(structuredClone(window.blockSettings[t]));return f.useEffect(()=>{const s=u=>{u.blockId===t&&n({...u.blockSettings})};return window.emitter.on("AppBridge:BlockSettingsUpdated",s),()=>{window.emitter.off("AppBridge:BlockSettingsUpdated",s)}},[t]),[r,async s=>{try{await e.updateBlockSettings(s),window.emitter.emit("AppBridge:BlockSettingsUpdated",{blockId:t,blockSettings:J(r,s)})}catch(u){console.error(u)}}]},sc={enabled:!1,label:"",url:""},uc=(e,t={enabled:!0})=>{const[r,n]=f.useState(null),[a,s]=f.useState(!0);return f.useEffect(()=>{const u=async()=>{s(!0),n(await e.getBrandportalLink()),s(!1)};t.enabled&&u().catch(console.error)},[e,t.enabled]),f.useEffect(()=>{const u=i=>{n(w=>i.action==="update"?{...sc,...w,...i.brandportalLink}:w)};return window.emitter.on("AppBridge:GuidelineBrandportalLink:Action",u),()=>{window.emitter.off("AppBridge:GuidelineBrandportalLink:Action",u)}},[e]),{brandportalLink:r,isLoading:a}};var Er=(e=>(e.Init="init",e.Started="started",e.Pending="pending",e.Ready="ready",e.Error="error",e))(Er||{});const ic=e=>{const t=f.useRef(null),[r,n]=f.useState("init"),[a,s]=f.useState(null),u=async(d,h)=>{try{n("started");const p=await e.getBulkDownloadToken(d,h);s(null),i(p)}catch(p){n("error"),console.error(p)}},i=async d=>{try{const h=await e.getBulkDownloadByToken(d);h.downloadUrl?(s(h.downloadUrl),n("ready")):(n("pending"),t.current=w(h.signature))}catch(h){n("error"),console.error(h)}},w=d=>window.setInterval(async()=>{try{const h=await e.getBulkDownloadBySignature(d);h.downloadUrl&&(n("ready"),s(h.downloadUrl),t.current&&clearInterval(t.current))}catch(h){n("error"),console.error(h),t.current&&clearInterval(t.current)}},2500);return{generateBulkDownload:u,status:r,downloadUrl:a}},Kr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,cc=(e,t,r={enabled:!0})=>{const[n,a]=f.useState(new Map([])),[s,u]=f.useState(!0),i=f.useCallback(async()=>{u(!0),a(await mc(e,t)),u(!1)},[e,t]);return f.useEffect(()=>{r.enabled&&i()},[r.enabled,i]),f.useEffect(()=>{const w=p=>{for(const m of p.payload.pageIds)if(n.has(m)){i();break}},d=p=>{!n.has(p.documentPage.id)||!p.categoryId||a(G.produce(m=>{lc(m,p.documentPage,p.position)}))},h=({action:p,documentPage:m})=>{p==="update"&&n.has(m.id)||p==="add"&&m.categoryId===t?i():(p==="delete"||p==="move")&&n.has(m.id)&&a(G.produce(y=>{p==="move"?dc(y,m):p==="delete"&&y.delete(m.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",h),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",w),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",d),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",h),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",w),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",d)}},[t,i,n]),{documentPages:Array.from(n.values()),refetch:i,isLoading:s}},lc=(e,t,r)=>{if(!t.sort||!r)return e;const n=e.get(t.id),a=[...e.values()].sort(Kr);e.clear();let s=1,u=!0;for(const i of a)i.id!==t.id&&(n&&s===r&&(e.set(t.id,{...n,sort:r}),u=!1),e.set(i.id,{...i,sort:s}),s++);return n&&u&&e.set(t.id,{...n,sort:s}),e},dc=(e,t)=>{const r=[...e.values()];let n=!0;e.clear();for(const a of r)a.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),n=!1),e.set(a.id,a));return n&&e.set(t.id,t),e},mc=async(e,t)=>{const r=await e.getDocumentPagesByDocumentCategoryId(t);return new Map([...r].sort(Kr).map(n=>[n.id,n]))},pc=(e,t)=>{const r=e.getBlockId(),[n,a]=f.useState([]),s=p=>{p.blockId===r&&!Y(p.colorPalettes,p.prevColorPalettes)&&a(p.colorPalettes)};f.useEffect(()=>{let p=!0;return r&&((async()=>{const y=await e.getColorPalettesWithColors(t);p&&a(y)})(),window.emitter.on("AppBridge:ColorPalettesUpdated",s)),()=>{p=!1,window.emitter.off("AppBridge:ColorPalettesUpdated",s)}},[e,r,t]);const u=async()=>{window.emitter.emit("AppBridge:ColorPalettesUpdated",{blockId:r,colorPalettes:await e.getColorPalettesWithColors(t),prevColorPalettes:{...n}})};return{colorPalettes:n,createColorPalette:async p=>{await e.createColorPalette(p),u()},updateColorPalette:async(p,m)=>{await e.updateColorPalette(p,m),u()},deleteColorPalette:async p=>{await e.deleteColorPalette(p),u()},downloadColorKit:p=>e.downloadColorKit(p)}},gc=(e,t)=>{const r=e.getBlockId(),[n,a]=f.useState([]);f.useEffect(()=>{let d=!0;const h=p=>{if(p.blockId===r&&!Y(p.colors,p.prevColors)){const m=[...p.colors].sort((y,D)=>y.sort-D.sort);a(m)}};return r&&((async()=>{const m=await e.getColorsByColorPaletteId(t);if(d){const y=[...m].sort((D,b)=>D.sort-b.sort);a(y)}})(),window.emitter.on("AppBridge:ColorsUpdated",h)),()=>{d=!1,window.emitter.off("AppBridge:ColorsUpdated",h)}},[e,r,t]);const s=async()=>{window.emitter.emit("AppBridge:ColorsUpdated",{blockId:r,colors:await e.getColorsByColorPaletteId(t),prevColors:{...n}})};return{colorsByPaletteId:n,createColor:async d=>{await e.createColor(d),s()},updateColor:async(d,h)=>{await e.updateColor(d,h),s()},deleteColor:async d=>{await e.deleteColor(d),s()}}},fc=(e,t={enabled:!0})=>{const[r,n]=f.useState(null),[a,s]=f.useState(!0),u=f.useCallback(async()=>{s(!0),n(await e.getCoverPage()),s(!1)},[e]);return f.useEffect(()=>{t.enabled&&u().catch(console.error)},[e,u,t.enabled]),f.useEffect(()=>{const i=w=>{if(w.action==="add"){u().catch(console.error);return}n(d=>w.action==="delete"?null:w.action==="update"&&w.coverPage?{...d,...w.coverPage}:d)};return window.emitter.on("AppBridge:GuidelineCoverPage:Action",i),()=>{window.emitter.off("AppBridge:GuidelineCoverPage:Action",i)}},[e,u]),{coverPage:r,isLoading:a}},zr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,wc=(e,t,r={enabled:!0})=>{const[n,a]=f.useState(new Map([])),[s,u]=f.useState(!0),i=f.useCallback(async()=>{u(!0),a(await yc(e,t)),u(!1)},[e,t]);return f.useEffect(()=>{r.enabled&&i()},[i,r.enabled]),f.useEffect(()=>{const w=p=>{n.has(p.documentPage.categoryId)&&a(G.produce(m=>{const y=`${p.action}-page`;return(Wr[y]||Wr.default)(m,p.documentPage)}))},d=p=>{n.has(p.documentCategory.id)&&a(G.produce(m=>{hc(m,p.documentCategory,p.position)}))},h=({action:p,documentCategory:m})=>{p==="update"&&n.has(m.id)||p==="add"&&m.documentId===t?i():p==="delete"&&n.has(m.id)&&a(G.produce(y=>{y.delete(m.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentCategory:Action",h),window.emitter.on("AppBridge:GuidelineDocumentCategory:DocumentPageAction",w),window.emitter.on("AppBridge:GuidelineDocumentCategory:MoveEvent",d),()=>{window.emitter.off("AppBridge:GuidelineDocumentCategory:Action",h),window.emitter.off("AppBridge:GuidelineDocumentCategory:DocumentPageAction",w),window.emitter.off("AppBridge:GuidelineDocumentCategory:MoveEvent",d)}},[n,t,i]),{documentCategories:Array.from(n.values()),refetch:i,isLoading:s}},hc=(e,t,r)=>{if(!t.sort||!r)return e;const n=e.get(t.id),a=[...e.values()].sort(zr);e.clear();let s=1,u=!0;for(const i of a)i.id!==t.id&&(n&&s===r&&(e.set(t.id,{...n,sort:r}),u=!1),e.set(i.id,{...i,sort:s}),s++);return n&&u&&e.set(t.id,{...n,sort:s}),e},Wr={"add-page":(e,t)=>{if(!t.categoryId)return e;const r=e.get(t.categoryId);if(!r)return e;const n={...r,numberOfDocumentPages:r.numberOfDocumentPages+1};return e.set(r.id,n)},"delete-page":(e,t)=>{if(!t.categoryId)return e;const r=e.get(t.categoryId);if(!r)return e;const n={...r,numberOfDocumentPages:r.numberOfDocumentPages-1};return e.set(r.id,n)},default:e=>e},yc=async(e,t)=>{const r=await e.getDocumentCategoriesByDocumentId(t);return new Map([...r].sort(zr).map(n=>[n.id,n]))},he=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,bc=(e,t={enabled:!0})=>{const[r,n]=f.useState(new Map([])),[a,s]=f.useState(!0),u=f.useCallback(async()=>{s(!0),n(await vc(e)),s(!1)},[e]);return f.useEffect(()=>{t.enabled&&u()},[t.enabled,u]),f.useEffect(()=>{const i=p=>{n(G.produce(m=>{const y=`${p.action}-document`;return(Xr[y]||Xr.default)(m,p.document)}))},w=p=>{((p==null?void 0:p.action)==="move"||(p==null?void 0:p.action)==="add")&&r.size>0&&u()},d=p=>{n(G.produce(m=>Dc(m,p.document,p.position,p.newGroupId)))},h=p=>{n(G.produce(m=>Ac(m,p.documentGroup,p.position)))};return window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",u),window.emitter.on("AppBridge:GuidelineDocumentGroup:DocumentAction",i),window.emitter.on("AppBridge:GuidelineDocument:Action",w),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",d),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",h),()=>{window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",u),window.emitter.off("AppBridge:GuidelineDocumentGroup:DocumentAction",i),window.emitter.off("AppBridge:GuidelineDocument:Action",w),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",d),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",h)}},[r.size,u]),{documentGroups:Array.from(r.values()),refetch:u,isLoading:a}},Dc=(e,t,r,n)=>{if(n||!t.sort)return e;const a=t.sort,s=[...e.values()].sort(he),u=[];e.clear();for(const w of s){const d=w.sort??0;let h=0;r<d?h=a>d||a===0?1:0:h=a<=d?-1:0,u.push({...w,sort:d+h})}const i=[...u].sort(he);for(const w of i)e.set(w.id,w);return e},Ac=(e,t,r)=>{if(!t.sort)return e;const n=t.sort,a=[...e.values()].sort(he),s=[];e.clear();for(const i of a){if(i.id===t.id){s.push({...i,sort:r});continue}const w=i.sort??0;let d=0;r<=w&&(d=n>w?1:0),s.push({...i,sort:w+d})}const u=[...s].sort(he);for(const i of u)e.set(i.id,i);return e},Xr={"add-document":(e,t)=>{if(!t.documentGroupId)return e;const r=e.get(t.documentGroupId);if(!r)return e;const n={...r,numberOfDocuments:r.numberOfDocuments+1};return e.set(r.id,n)},"delete-document":(e,t)=>{if(!t.documentGroupId)return e;const r=e.get(t.documentGroupId);if(!r)return e;const n={...r,numberOfDocuments:r.numberOfDocuments-1};return e.set(r.id,n)},default:e=>e},vc=async e=>{const t=await e.getDocumentGroups();return new Map([...t].sort(he).map(r=>[r.id,r]))},Tc=(e,t)=>{const[r,n]=f.useState(null),[a,s]=f.useState(!0);return f.useEffect(()=>{(async()=>{s(!0),n(await e.getDocumentPageTargets(t)),s(!1)})()},[e,t]),f.useEffect(()=>{const u=i=>{i.payload.pageIds.includes(t)&&n(w=>Cc(w,i.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",u),()=>{window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",u)}},[t]),{documentPageTargets:r,isLoading:a}},Cc=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(r=>({...r,target:{...r.target,checked:t.includes(r.target.id)}}))},_c=(e,t)=>{const[r,n]=f.useState([]);return f.useEffect(()=>{(async s=>{n(await e.getDocumentSectionsByDocumentPageId(s))})(t)},[e,t]),{documentSections:r}},Pc=(e,t)=>{const[r,n]=f.useState(null),[a,s]=f.useState(!0);return f.useEffect(()=>{(async()=>{s(!0),n(await e.getDocumentTargets(t)),s(!1)})()},[e,t]),f.useEffect(()=>{const u=i=>{i.payload.documentIds.includes(t)&&n(w=>Ic(w,i.payload.targets))};return window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",u),()=>{window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",u)}},[t]),{documentTargets:r,isLoading:a}},Ic=(e,t)=>e&&{...e,hasSelectedTargets:t.length>0,targets:e.targets.map(r=>({...r,target:{...r.target,checked:t.includes(r.target.id)}}))},Gc=e=>{const[t,r]=f.useState(e.getEditorState());return f.useEffect(()=>{const n=()=>r(e.getEditorState()),a=new MutationObserver(s=>{for(const u of s)u.attributeName==="class"&&n()});return a.observe(document.body,{attributes:!0}),()=>{a.disconnect()}},[]),t},Sc=({accept:e,multiple:t})=>{const[r,n]=f.useState(null),a=u=>{if(u.target){const i=u.target.files;n(i)}};return[()=>{const u=document.createElement("input");u.type="file",e&&(u.accept=e),u.multiple=!!t,u.addEventListener("change",a),u.dispatchEvent(new MouseEvent("click"))},{selectedFiles:r}]},Rr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,kc=(e,t,r={enabled:!0})=>{const[n,a]=f.useState(new Map([])),[s,u]=f.useState(!0),i=f.useCallback(async()=>{u(!0),a(await Lc(e,t)),u(!1)},[e,t]);return f.useEffect(()=>{r.enabled&&i()},[r.enabled,i]),f.useEffect(()=>{const w=m=>{n.has(m.documentPage.documentId)&&a(G.produce(y=>{const D=`${m.action}-page`;return(Ie[D]||Ie.default)(y,m.documentPage)}))},d=m=>{n.has(m.documentCategory.documentId)&&a(G.produce(y=>{const D=`${m.action}-category`;return(Ie[D]||Ie.default)(y,m.documentCategory)}))},h=m=>{!n.has(m.document.id)||m.newGroupId!==t||a(G.produce(y=>Oc(y,m.document,m.position,m.newGroupId)))},p=({action:m,document:y})=>{(m==="update"||m==="move")&&n.has(y.id)||m==="add"&&y.documentGroupId===t?i():m==="delete"&&n.has(y.id)&&a(G.produce(D=>{m==="delete"&&D.delete(y.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",p),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",w),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",d),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",h),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",p),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",i),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",w),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",d),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",h)}},[t,n,r.enabled,i]),{documents:Array.from(n.values()),refetch:i,isLoading:s}},Oc=(e,t,r,n)=>{if(!t.sort)return e;const a=e.get(t.id),s=[...e.values()].sort(Rr);e.clear();let u=1,i=!0;for(const w of s)w.id===t.id||w.documentGroupId!==n||(a&&u===r&&(e.set(t.id,{...a,sort:r}),i=!1),e.set(w.id,{...w,sort:u}),u++);return a&&i&&e.set(t.id,{...a,sort:u}),e},Ie={"add-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages+1};return e.set(r.id,n)},"delete-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages-1};return e.set(r.id,n)},"add-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories+1};return e.set(r.id,n)},"delete-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories-1};return e.set(r.id,n)},default:e=>e},Lc=async(e,t)=>{const r=await e.getDocumentsByDocumentGroupId(t);return new Map([...r].sort(Rr).map(n=>[n.id,n]))},Mc=e=>{const t=f.useCallback(async g=>{const A=await e.createLink(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"add"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:A.id,documentGroupId:g.documentGroupId},action:"add"}),A},[e]),r=f.useCallback(async g=>{const A=await e.updateLink(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"update"}),A},[e]),n=f.useCallback(async g=>{await e.deleteLink(g.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:g,action:"delete"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...g,documentGroupId:g.documentGroupId},action:"delete"})},[e]),a=f.useCallback(async g=>{const A=await e.createLibrary(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"add"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:A.id,documentGroupId:g.documentGroupId},action:"add"}),A},[e]),s=f.useCallback(async g=>{const A=await e.updateLibrary(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"update"}),A},[e]),u=f.useCallback(async g=>{await e.deleteLibrary(g.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:g,action:"delete"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...g,documentGroupId:g.documentGroupId},action:"delete"})},[e]),i=f.useCallback(async g=>{const A=await e.createStandardDocument(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"add"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{id:A.id,documentGroupId:g.documentGroupId},action:"add"}),A},[e]),w=f.useCallback(async g=>{const A=await e.updateStandardDocument(g);return window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:{...A,...g.documentGroupId&&{documentGroupId:g.documentGroupId}},action:"update"}),A},[e]),d=f.useCallback(async g=>{await e.deleteStandardDocument(g.id),window.emitter.emit("AppBridge:GuidelineDocument:Action",{document:g,action:"delete"}),g.documentGroupId&&window.emitter.emit("AppBridge:GuidelineDocumentGroup:DocumentAction",{document:{...g,documentGroupId:g.documentGroupId},action:"delete"})},[e]),h=f.useCallback(async g=>{const A=await e.createDocumentGroup(g);return window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:A,action:"add"}),A},[e]),p=f.useCallback(async g=>{const A=await e.updateDocumentGroup(g);window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:A,action:"update"})},[e]),m=f.useCallback(async g=>{await e.deleteDocumentGroup(g.id),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:g,action:"delete"})},[e]),y=f.useCallback(async g=>{const A=await e.createDocumentPage(g);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:A,action:"add"}),g.categoryId&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:A.id,categoryId:g.categoryId},action:"add"}),A},[e]),D=f.useCallback(async g=>{const A=await e.updateDocumentPage(g);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:A,action:"update"}),A},[e]),b=f.useCallback(async g=>{await e.deleteDocumentPage(g.id),window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...g,categoryId:g.categoryId??null},action:"delete"}),g.categoryId?window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{...g,categoryId:g.categoryId},action:"delete"}):window.emitter.emit("AppBridge:GuidelineDocument:DocumentPageAction",{documentPage:g,action:"delete"})},[e]),v=f.useCallback(async({id:g,documentId:A,categoryId:S})=>{const Z=await e.duplicateDocumentPage(g);return window.emitter.emit("AppBridge:GuidelineDocumentPage:Action",{documentPage:{...Z,title:Z.name,documentId:A,categoryId:S},action:"add"}),S&&window.emitter.emit("AppBridge:GuidelineDocumentCategory:DocumentPageAction",{documentPage:{id:Z.id,categoryId:S},action:"add"}),Z},[e]),T=f.useCallback(async g=>{const A=await e.createDocumentCategory(g);return window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:A,action:"add"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:A,action:"add"}),A},[e]),k=f.useCallback(async g=>{const A=await e.updateDocumentCategory(g);window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:A,action:"update"})},[e]),B=f.useCallback(async g=>{await e.deleteDocumentCategory(g.id),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:g,action:"delete"}),window.emitter.emit("AppBridge:GuidelineDocument:DocumentCategoryAction",{documentCategory:g,action:"delete"})},[e]),C=f.useCallback(async g=>{const A=await e.createCoverPage(g);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:A,action:"add"}),A},[e]),_=f.useCallback(async g=>{const A=await e.updateCoverPage(g);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:A,action:"update"}),A},[e]),ie=f.useCallback(async g=>{const A={...g.title&&{brandhome_title:g.title},...g.draft!==void 0&&{brandhome_draft:g.draft},...g.hideInNav!==void 0&&{brandhome_hide_in_nav:g.hideInNav}},S=await e.updateLegacyCoverPage(A);return window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{coverPage:g,action:"update"}),S},[e]),Ne=f.useCallback(async()=>{await e.deleteCoverPage(),window.emitter.emit("AppBridge:GuidelineCoverPage:Action",{action:"delete"})},[e]),$e=f.useCallback(async g=>{const A=await e.updateBrandportalLink(g);return A&&window.emitter.emit("AppBridge:GuidelineBrandportalLink:Action",{brandportalLink:A,action:"update"}),A},[e]),xe=f.useCallback(async(g,A,S)=>{const Z="AppBridge:GuidelineDocument:MoveEvent";window.emitter.emit(Z,{document:g,position:A,newGroupId:S,action:"movePreview"});const Ee=await e.moveDocument(g.id,A,S),V="AppBridge:GuidelineDocument:Action";g.documentGroupId===S?window.emitter.emit(V,{document:{...Ee,sort:A},action:"move"}):(window.emitter.emit(V,{document:g,action:"delete"}),window.emitter.emit(V,{document:Ee,action:"add"}))},[e]),Ze=f.useCallback(async(g,A)=>{const S="AppBridge:GuidelineDocumentGroup:MoveEvent";window.emitter.emit(S,{documentGroup:g,position:A,action:"movePreview"}),await e.moveDocumentGroup(g.id,A),window.emitter.emit("AppBridge:GuidelineDocumentGroup:Action",{documentGroup:{...g,sort:A},action:"update"})},[e]),x=f.useCallback(async(g,A,S)=>{const Z="AppBridge:GuidelineDocumentCategory:MoveEvent";window.emitter.emit(Z,{documentCategory:g,documentId:A,position:S,action:"movePreview"}),await e.moveDocumentCategory(g.id,A,S),window.emitter.emit("AppBridge:GuidelineDocumentCategory:Action",{documentCategory:{...g,documentId:A,sort:S},action:"update"})},[e]),je=f.useCallback(async(g,A,S,Z=null)=>{const Ee="AppBridge:GuidelineDocumentPage:MoveEvent";window.emitter.emit(Ee,{documentPage:g,documentId:A,position:S,categoryId:Z,action:"movePreview"});const V=await e.moveDocumentPage(g.id,A,S,Z??void 0),gt="AppBridge:GuidelineDocumentPage:Action";g.categoryId===Z&&g.documentId===A?window.emitter.emit(gt,{documentPage:{...V,sort:S??V.sort},action:"move"}):(window.emitter.emit(gt,{documentPage:{...g,categoryId:g.categoryId??null},action:"delete"}),window.emitter.emit(gt,{documentPage:V,action:"add"}));const Ol=g.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction",Ll=V.categoryId?"AppBridge:GuidelineDocumentCategory:DocumentPageAction":"AppBridge:GuidelineDocument:DocumentPageAction";window.emitter.emit(Ol,{documentPage:g,action:"delete"}),window.emitter.emit(Ll,{documentPage:V,action:"add"})},[e]),Sl=f.useCallback(async(g,A)=>{const S=await e.updateDocumentPageTargets(g,A);return window.emitter.emit("AppBridge:GuidelineDocumentPageTargets:Action",{payload:{targets:g,pageIds:A},action:"update"}),S},[e]),kl=f.useCallback(async(g,A)=>{const S=await e.updateDocumentTargets(g,A);return window.emitter.emit("AppBridge:GuidelineDocumentTargets:Action",{payload:{targets:g,documentIds:A},action:"update"}),S},[e]);return{createLink:t,updateLink:r,deleteLink:n,createDocumentPage:y,updateDocumentPage:D,deleteDocumentPage:b,duplicateDocumentPage:v,moveDocumentPage:je,createLibrary:a,updateLibrary:s,deleteLibrary:u,createDocumentCategory:T,updateDocumentCategory:k,deleteDocumentCategory:B,moveDocumentCategory:x,createCoverPage:C,updateCoverPage:_,deleteCoverPage:Ne,updateLegacyCoverPage:ie,moveDocumentGroup:Ze,createDocumentGroup:h,updateDocumentGroup:p,deleteDocumentGroup:m,updateBrandportalLink:$e,createDocument:i,updateDocument:w,deleteDocument:d,moveDocument:xe,updateDocumentPageTargets:Sl,updateDocumentTargets:kl}},Bc=e=>{const{openNavigationManager:t}=e;return{openNavigationManager:()=>t()}},Uc=(e,t,r)=>{const[n,a]=f.useState(null),[s,u]=f.useState(!0);return f.useEffect(()=>{const w=h=>{a({...h.pageTemplateSettings})};return(async()=>{if(u(!0),t==="cover"){const h=await e.getCoverPageTemplateSettings();a(h)}else if(t==="documentPage")if(r===void 0)console.error("Document ID is required for document page template settings");else{const h=await e.getDocumentPageTemplateSettings(r);a(h)}else if(t==="library")if(r===void 0)console.error("Document ID is required for library template settings");else{const h=await e.getLibraryPageTemplateSettings(r);a(h)}u(!1)})(),window.emitter.on("AppBridge:PageTemplateSettingsUpdated",w),()=>{window.emitter.off("AppBridge:PageTemplateSettingsUpdated",w)}},[e,r,t]),{pageTemplateSettings:n,updatePageTemplateSettings:async w=>{try{if(t==="cover")await e.updateCoverPageTemplateSettings(w);else if(t==="documentPage"){if(r===void 0){console.error("Document ID is required for document page template settings");return}await e.updateDocumentPageTemplateSettings(r,w)}else if(t==="library"){if(r===void 0){console.error("Document ID is required for library template settings");return}await e.updateLibraryPageTemplateSettings(r,w)}window.emitter.emit("AppBridge:PageTemplateSettingsUpdated",{pageTemplateSettings:{...n,...w}})}catch(d){console.error(d)}},isLoading:s}},Nc=e=>{const[t,r]=f.useState(e.getPrivacySettings());return f.useEffect(()=>{const n=a=>r({...t,...a});return window.emitter.on("AppBridge:PrivacySettingsChanged",n),()=>{window.emitter.off("AppBridge:PrivacySettingsChanged",n)}},[t]),t},$c=e=>{const[t,r]=f.useState(!1);return f.useEffect(()=>{const a=document.querySelector(`.block[data-block="${e.getBlockId()}"]`);if(!a){console.error("Could not find block wrapper:",e.getBlockId());return}a.setAttribute("data-ready",t.toString())},[e,t]),{isReadyForPrint:t,setIsReadyForPrint:a=>{r(a)}}},xc=(e,t,r,n)=>{const[a,s]=f.useState({}),u=D=>{D.template===t&&D.documentId===r&&D.documentPageId===n&&!Y(D.templateAssets,D.prevTemplateAssets)&&s(D.templateAssets)},i=async()=>t==="cover"?await e.getCoverPageTemplateAssets():t==="documentPage"&&n?await e.getDocumentPageTemplateAssets(n):t==="library"&&r?await e.getLibraryPageTemplateAssets(r):{},w=async(D,b)=>{t==="cover"?await e.addAssetIdsToCoverPageTemplateAssetKey(D,b):t==="documentPage"&&n?await e.addAssetIdsToDocumentPageTemplateAssetKey(n,D,b):t==="library"&&r&&await e.addAssetIdsToLibraryPageTemplateAssetKey(r,D,b)},d=async(D,b)=>{t==="cover"?await e.deleteAssetIdsFromCoverPageTemplateAssetKey(D,b):t==="documentPage"&&n?await e.deleteAssetIdsFromDocumentPageTemplateAssetKey(n,D,b):t==="library"&&r&&await e.deleteAssetIdsFromLibraryPageTemplateAssetKey(r,D,b)};f.useEffect(()=>{let D=!0;return t&&((async()=>{const v=await i();D&&s(v)})(),window.emitter.on("AppBridge:TemplateAssetsUpdated",u)),()=>{D=!1,window.emitter.off("AppBridge:TemplateAssetsUpdated",u)}},[e,r,n]);const h=async()=>{window.emitter.emit("AppBridge:TemplateAssetsUpdated",{template:t,documentId:r,documentPageId:n,templateAssets:await i(),prevTemplateAssets:{...a}})};return{templateAssets:a,addAssetIdsToKey:async(D,b)=>{await w(D,b),h()},deleteAssetIdsFromKey:async(D,b)=>{await d(D,b),h()},updateAssetIdsFromKey:async(D,b)=>{var k;const T=((k=(await i())[D])==null?void 0:k.map(B=>B.id))??[];try{await d(D,T),await w(D,b)}catch(B){console.error(B)}h()}}},Zc=e=>{const t=e.getPortalId(),[r,n]=f.useState({}),a=m=>{m.portalId===t&&!Y(m.themeAssets,m.prevThemeAssets)&&n(m.themeAssets)},s=async()=>await e.getThemeAssets(),u=async(m,y)=>{await e.addAssetIdsToThemeAssetKey(m,y)},i=async(m,y)=>{await e.deleteAssetIdsFromThemeAssetKey(m,y)};f.useEffect(()=>{let m=!0;return t&&((async()=>{const D=await s();m&&n(D)})(),window.emitter.on("AppBridge:ThemeAssetsUpdated",a)),()=>{m=!1,window.emitter.off("AppBridge:ThemeAssetsUpdated",a)}},[e]);const w=async()=>{window.emitter.emit("AppBridge:ThemeAssetsUpdated",{portalId:t,themeAssets:await s(),prevThemeAssets:{...r}})};return{themeAssets:r,addAssetIdsToKey:async(m,y)=>{await u(m,y),w()},deleteAssetIdsFromKey:async(m,y)=>{await i(m,y),w()},updateAssetIdsFromKey:async(m,y)=>{var v;const b=((v=(await s())[m])==null?void 0:v.map(T=>T.id))??[];try{await i(m,b),await u(m,y)}catch(T){console.error(T)}w()}}},jc=e=>({openTemplateChooser:e.openTemplateChooser.bind(e),closeTemplateChooser:e.closeTemplateChooser.bind(e)}),Vr=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Ec=(e,t,r={enabled:!0})=>{const[n,a]=f.useState(new Map([])),[s,u]=f.useState(!0),i=f.useCallback(async()=>{u(!0),a(await Wc(e,t)),u(!1)},[e,t]);return f.useEffect(()=>{r.enabled&&i()},[r.enabled,i]),f.useEffect(()=>{const w=p=>{for(const m of p.payload.pageIds)if(n.has(m)){i();break}},d=p=>{!n.has(p.documentPage.id)||p.categoryId||a(G.produce(m=>{Kc(m,p.documentPage,p.position)}))},h=({action:p,documentPage:m})=>{p==="update"&&n.has(m.id)||p==="add"&&m.documentId===t&&!m.categoryId?i():(p==="delete"||p==="move")&&n.has(m.id)&&a(G.produce(y=>{p==="move"?zc(y,m):p==="delete"&&y.delete(m.id)}))};return window.emitter.on("AppBridge:GuidelineDocumentPage:Action",h),window.emitter.on("AppBridge:GuidelineDocumentPageTargets:Action",w),window.emitter.on("AppBridge:GuidelineDocumentPage:MoveEvent",d),()=>{window.emitter.off("AppBridge:GuidelineDocumentPage:Action",h),window.emitter.off("AppBridge:GuidelineDocumentPageTargets:Action",w),window.emitter.off("AppBridge:GuidelineDocumentPage:MoveEvent",d)}},[t,i,n]),{documentPages:Array.from(n.values()),refetch:i,isLoading:s}},Kc=(e,t,r)=>{if(!t.sort||!r)return e;const n=e.get(t.id),a=[...e.values()].sort(Vr);e.clear();let s=1,u=!0;for(const i of a)i.id!==t.id&&(n&&s===r&&(e.set(t.id,{...n,sort:r}),u=!1),e.set(i.id,{...i,sort:s}),s++);return n&&u&&e.set(t.id,{...n,sort:s}),e},zc=(e,t)=>{const r=[...e.values()];let n=!0;e.clear();for(const a of r)a.id!==t.id&&(e.size===t.sort-1&&(e.set(t.id,t),n=!1),e.set(a.id,a));return n&&e.set(t.id,t),e},Wc=async(e,t)=>{const r=await e.getUncategorizedDocumentPagesByDocumentId(t);return new Map([...r].sort(Vr).map(n=>[n.id,n]))},ye=(e,t)=>e.sort&&t.sort?e.sort-t.sort:0,Xc=(e,t={enabled:!0})=>{const[r,n]=f.useState(new Map([])),[a,s]=f.useState(!0),u=f.useCallback(async()=>{s(!0),n(await Hc(e)),s(!1)},[e]);return f.useEffect(()=>{t.enabled&&u()},[t.enabled,u]),f.useEffect(()=>{const i=y=>{r.has(y.documentPage.documentId)&&n(G.produce(D=>{const b=`${y.action}-page`;return(Ge[b]||Ge.default)(D,y.documentPage)}))},w=y=>{r.has(y.documentCategory.documentId)&&n(G.produce(D=>{const b=`${y.action}-category`;return(Ge[b]||Ge.default)(D,y.documentCategory)}))},d=y=>{(y==null?void 0:y.action)==="update"&&r.size>0&&u()},h=y=>{!r.has(y.document.id)||y.newGroupId||y.document.documentGroupId||n(G.produce(D=>Rc(D,y.document,y.position)))},p=y=>{n(G.produce(D=>Vc(D,y==null?void 0:y.documentGroup,y.position)))},m=({action:y,document:D})=>{(y==="update"||y==="move")&&r.has(D.id)||y==="add"&&!D.documentGroupId?u():y==="delete"&&r.has(D.id)&&n(G.produce(b=>{y==="delete"&&b.delete(D.id)}))};return window.emitter.on("AppBridge:GuidelineDocument:Action",m),window.emitter.on("AppBridge:GuidelineDocumentTargets:Action",u),window.emitter.on("AppBridge:GuidelineDocument:DocumentPageAction",i),window.emitter.on("AppBridge:GuidelineDocument:DocumentCategoryAction",w),window.emitter.on("AppBridge:GuidelineDocumentGroup:Action",d),window.emitter.on("AppBridge:GuidelineDocument:MoveEvent",h),window.emitter.on("AppBridge:GuidelineDocumentGroup:MoveEvent",p),()=>{window.emitter.off("AppBridge:GuidelineDocument:Action",m),window.emitter.off("AppBridge:GuidelineDocumentTargets:Action",u),window.emitter.off("AppBridge:GuidelineDocument:DocumentPageAction",i),window.emitter.off("AppBridge:GuidelineDocument:DocumentCategoryAction",w),window.emitter.off("AppBridge:GuidelineDocumentGroup:Action",d),window.emitter.off("AppBridge:GuidelineDocument:MoveEvent",h),window.emitter.off("AppBridge:GuidelineDocumentGroup:MoveEvent",p)}},[r,t.enabled,u]),{documents:Array.from(r.values()),refetch:u,isLoading:a}},Rc=(e,t,r)=>{if(!t.sort||!r)return e;const n=t.sort,a=[...e.values()].sort(ye),s=[];e.clear();for(const i of a){if(i.id===t.id){s.push({...i,sort:r});continue}const w=i.sort??0;let d=0;r<=w&&(d=n>w||n===0?1:0),s.push({...i,sort:w+d})}const u=[...s].sort(ye);for(const i of u)e.set(i.id,i);return e},Vc=(e,t,r)=>{if(!t.sort)return e;const n=t.sort,a=[...e.values()].sort(ye),s=[];e.clear();for(const i of a){const w=i.sort??0;let d=0;r<=w&&(d=n>w?1:0),s.push({...i,sort:w+d})}const u=[...s].sort(ye);for(const i of u)e.set(i.id,i);return e},Ge={"add-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages+1};return e.set(r.id,n)},"delete-page":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfUncategorizedDocumentPages:r.numberOfUncategorizedDocumentPages-1};return e.set(r.id,n)},"add-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories+1};return e.set(r.id,n)},"delete-category":(e,t)=>{const r=e.get(t.documentId);if(!r)return e;const n={...r,numberOfDocumentPageCategories:r.numberOfDocumentPageCategories-1};return e.set(r.id,n)},default:e=>e},Hc=async e=>{const t=await e.getUngroupedDocuments();return new Map([...t].sort(ye).map(r=>[r.id,r]))};class Se{static with(t){return{id:t,creatorName:"Creator Name",extension:"png",externalUrl:null,fileName:"fileName.png",title:"A title",status:"FINISHED",objectType:"IMAGE",height:480,width:640,genericUrl:"https://generic.url",previewUrl:"https://preview.url",originUrl:"https://origin.url",projectId:23,fileSize:256,fileSizeHumanReadable:"123.45 MB",fileId:"x1x1x1x1x1x1",token:"--token--"}}}class Hr{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}class M{static red(t=767){return{id:t,name:"Red",sort:1,nameCss:"red",hex:"ff0000",red:255,green:0,blue:0,alpha:255,hue:361,saturation:100,lightness:46,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static yellow(t=768){return{id:t,name:"Yellow",sort:2,nameCss:"yellow",red:255,green:255,blue:0,hex:"ffff00",alpha:255,hue:361,saturation:100,lightness:46,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}static green(t=769){return{id:t,name:"Green",sort:3,nameCss:"green",red:0,green:255,blue:0,hex:"00ff00",alpha:255,hue:361,saturation:100,lightness:46,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class Yc{static red(){return{colorPaletteId:23,red:255,green:0,blue:0,alpha:255}}}class Jc{static red(){return{name:"Red",sort:1,nameCss:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantoneCoated:null,pantoneUncoated:null,cmykCoated:null,cmykUncoated:null,cmykNewspaper:null,ncs:null,pantoneCp:null,pantonePlastics:null,pantoneTextile:null,hks:null,threeM:null,lab:null}}}class ${static with(t,r="Color Palette Name"){return{id:t,name:r,description:"Color Palette Description",colors:[M.red(),M.yellow(),M.green()]}}}class Qc{static with(t="New Color Palette Name",r="New Color Palette Description"){return{name:t,description:r}}}class Fc{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class ct{static default(){return{downloadUrl:"dummy-url",signature:"dummy-signature"}}}class Yr{static with(t){return{id:t,name:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,pages:[N({preview_url:"https://preview.url",width:1024,height:768},"camel")]}}}const qc=3452,el=2341,tl=4561,Jr=345214,Qr=({blockSettings:e={},blockAssets:t={},editorState:r=!1,openAssetChooser:n=()=>null,closeAssetChooser:a=()=>null,blockId:s=qc,sectionId:u=el,projectId:i=Jr,user:w=Hr.with(tl),language:d="en",privacySettings:h={assetViewerEnabled:!1,assetDownloadEnabled:!1},blockTemplates:p={}}={})=>{window.emitter=c.spy(ft()),window.blockSettings??(window.blockSettings={}),window.blockSettings[s]=e;const m={},y={},D={},b={};return{getBlockId:c.stub().returns(s),getSectionId:c.stub().returns(u),getProjectId:c.stub().returns(i),getEditorState:c.stub().returns(r),getBlockSettings:c.stub().resolves(window.blockSettings),getAvailablePalettes:c.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),getColorPalettes:c.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),createColorPalette:c.stub().resolves($.with(678)),updateColorPalette:c.stub().resolves($.with(678)),getColorsByIds:c.stub().resolves([M.red(9834),M.green(342),M.yellow(9314)]),getColorsByColorPaletteId:c.stub().resolves([M.red(9834),M.green(342),M.yellow(9314)]),getColorPalettesWithColors:c.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),deleteColorPalette:c.stub().resolves(),getAvailableColors:c.stub().resolves([]),getCurrentLoggedUser:c.stub().resolves(w),downloadColorKit:c.stub().returns(`/api/color/export/${Jr}/zip/500`),getAssetById:c.stub().callsFake(v=>Promise.resolve(Se.with(v))),closeAssetChooser:c.stub().callsFake(()=>{a()}),openAssetChooser:c.stub().callsFake(v=>{n(v)}),getBlockAssets:c.stub().callsFake(async()=>Object.entries(t).reduce((v,[T,k])=>{const B=y[T]??[],C=m[T]??[];return v[T]=[...k.filter(_=>!C.includes(_.id)),...B.map(_=>Se.with(_))],v},{})),addAssetIdsToBlockAssetKey:c.stub().callsFake(async(v,T)=>{y[v]=[...y[v]??[],...T]}),deleteAssetIdsFromBlockAssetKey:c.stub().callsFake(async(v,T)=>{m[v]=[...m[v]??[],...T]}),getBlockTemplates:c.stub().callsFake(async()=>Object.entries(p).reduce((v,[T,k])=>{const B=b[T]??[],C=D[T]??[];return v[T]=[...k.filter(_=>!C.includes(_.id)),...B.map(_=>Yr.with(_))],v},{})),addTemplateIdsToBlockTemplateKey:c.stub().callsFake(async(v,T)=>{b[v]=[...b[v]??[],...T]}),deleteTemplateIdsFromBlockTemplateKey:c.stub().callsFake(async(v,T)=>{D[v]=[...D[v]??[],...T]}),getTranslationLanguage:c.stub().returns(d),getColors:c.stub().resolves([M.red(9834),M.green(342),M.yellow(9314)]),updateColor:c.stub().callsFake(v=>Promise.resolve(M.red(v))),getBulkDownloadToken:c.stub().resolves("token"),getBulkDownloadBySignature:c.stub().resolves(ct.default()),getBulkDownloadByToken:c.stub().resolves(ct.default()),getPrivacySettings:c.stub().returns(h),closeTemplateChooser:c.stub(),openTemplateChooser:c.stub(),createColor:c.stub().resolves(M.red()),deleteColor:c.stub().resolves(),getTemplateById:c.stub().resolves({}),openAssetViewer:c.stub(),updateBlockSettings:c.stub().resolves(),getAllDocuments:c.stub().resolves(),getUngroupedDocuments:c.stub().resolves(),getDocumentsByDocumentGroupId:c.stub().resolves(),getDocumentGroups:c.stub().resolves(),getDocumentPagesByDocumentId:c.stub().resolves(),getDocumentPagesByDocumentCategoryId:c.stub().resolves(),getDocumentCategoriesByDocumentId:c.stub().resolves(),getUncategorizedDocumentPagesByDocumentId:c.stub().resolves(),getDocumentSectionsByDocumentPageId:c.stub().resolves(),getDocumentTargets:c.stub().resolves(),getDocumentPageTargets:c.stub().resolves(),api:c.stub().resolves(),state:c.stub().resolves(),context:c.stub().resolves(),subscribe:c.stub().resolves(),dispatch:c.stub().resolves()}},rl=({}={})=>({api:c.stub().resolves(),state:c.stub().resolves(),context:c.stub().resolves(),subscribe:c.stub().resolves(),dispatch:c.stub().resolves()});class Fr{static with(t){return{highlights:[t],type:"BLOCK",object_id:1,page_id:1,page_slug:"page-slug",page_title:"Page Title",page_category_slug:"page-category-slug",block_id:1,document_id:1,document_slug:"document-slug",document_title:"Document Title",portal_id:1,portal_token:"portal-token"}}}class ke{static with(t){return N(Fr.with(t),"camel")}}const nl=234551,ol=3452,qr=7777,R=5332,al=95694,sl=345882,Oe=6456,en=34532,tn=3455345,rn=2342,nn=2343445,on=2434,an=552,sn=1145,un=32345,lt=147,ul=258,il=369,Le=23442,cn=235345,ln=12352,dn=55221,mn=24324,pn=3532,gn=98954,cl=3421,ll=65725,dl=95934,ml=2341,fn=653543,wn=23411,hn=56657,yn=({editorState:e=!1,brandId:t=nl,portalId:r=qr,projectId:n=ol,pageTemplateSettings:a={},pageTemplateAssets:s={},themeSettings:u={},language:i="en",openAssetChooser:w=()=>null,closeAssetChooser:d=()=>null}={})=>{window.emitter=c.spy(ft());let h=a,p=u;const m={},y={},D=async()=>Object.entries(s).reduce((b,[v,T])=>{const k=y[v]??[],B=m[v]??[];return b[v]=[...T.filter(C=>!B.includes(C.id)),...k.map(C=>Se.with(C))],b},{});return{getPortalId:c.stub().returns(r),getProjectId:c.stub().returns(n),getEditorState:c.stub().returns(e),getCoverPage:c.stub().resolves(be.with(qr)),getAllDocuments:c.stub().resolves([P.with(Oe),P.with(en),P.with(tn),P.with(rn),P.with(nn),P.withDocumentGroupId(on,R),P.withDocumentGroupId(an,R),P.withDocumentGroupId(sn,R),P.withDocumentGroupId(un,R)]),getUngroupedDocuments:c.stub().resolves([P.with(Oe),P.with(en),P.with(tn),P.with(rn),P.with(nn)]),getDocumentsByDocumentGroupId:c.stub().resolves([P.withDocumentGroupId(on,R),P.withDocumentGroupId(an,R),P.withDocumentGroupId(sn,R),P.withDocumentGroupId(un,R)]),getDocumentGroups:c.stub().resolves([re.with(R,3),re.with(al,0),re.with(sl,2)]),getDocumentPagesByDocumentId:c.stub().resolves([O.with(Le),O.with(cn),O.with(mn),O.with(ln),O.with(pn),O.with(dn),O.with(gn)]),getDocumentPagesByDocumentCategoryId:c.stub().callsFake(b=>Promise.resolve([O.withFields({id:Le,categoryId:b,sort:1}),O.withFields({id:cn,categoryId:b,sort:2}),O.withFields({id:ln,categoryId:b,sort:3}),O.withFields({id:dn,categoryId:b,sort:4})])),getDocumentCategoriesByDocumentId:c.stub().callsFake(b=>Promise.resolve([te.withDocumentIdAndNumberOfDocumentPages(lt,b,2),te.withDocumentIdAndNumberOfDocumentPages(ul,b,0),te.withDocumentIdAndNumberOfDocumentPages(il,b,2)])),getUncategorizedDocumentPagesByDocumentId:c.stub().callsFake(b=>Promise.resolve([O.withFields({id:mn,documentId:b,categoryId:null,sort:1}),O.withFields({id:pn,documentId:b,categoryId:null,sort:2}),O.withFields({id:gn,documentId:b,categoryId:null,sort:3})])),getDocumentSectionsByDocumentPageId:c.stub().resolves([Ue.with(cl),Ue.with(ll),Ue.with(dl)]),getColorPalettes:c.stub().resolves([$.with(678,"Palette 1"),$.with(427,"Palette 2"),$.with(679,"Palette 3")]),getColorsByColorPaletteId:c.stub().resolves([M.red(9834),M.green(342),M.yellow(9314)]),duplicateDocumentPage:c.stub().resolves(Tn.with(ml)),getDocumentTargets:c.stub().resolves(Pn.with(Oe)),getDocumentPageTargets:c.stub().resolves(In.with(Le)),addAssetIdsToCoverPageTemplateAssetKey:c.stub().callsFake(async(b,v)=>(y[b]=[...y[b]??[],...v],s)),addAssetIdsToThemeAssetKey:c.stub().callsFake(async(b,v)=>(y[b]=[...y[b]??[],...v],s)),addAssetIdsToLibraryPageTemplateAssetKey:c.stub().callsFake(async(b,v,T)=>(y[v]=[...y[v]??[],...T],s)),addAssetIdsToDocumentPageTemplateAssetKey:c.stub().callsFake(async(b,v,T)=>(y[v]=[...y[v]??[],...T],s)),getCoverPageTemplateAssets:c.stub().callsFake(D),getThemeAssets:c.stub().callsFake(D),getLibraryPageTemplateAssets:c.stub().callsFake(D),getDocumentPageTemplateAssets:c.stub().callsFake(D),deleteAssetIdsFromCoverPageTemplateAssetKey:c.stub().callsFake(async(b,v)=>{m[b]=[...m[b]??[],...v]}),deleteAssetIdsFromThemeAssetKey:c.stub().callsFake(async(b,v)=>{m[b]=[...m[b]??[],...v]}),deleteAssetIdsFromLibraryPageTemplateAssetKey:c.stub().callsFake(async(b,v,T)=>{m[v]=[...m[v]??[],...T]}),deleteAssetIdsFromDocumentPageTemplateAssetKey:c.stub().callsFake(async(b,v,T)=>{m[v]=[...m[v]??[],...T]}),getCoverPageTemplateSettings:c.stub().resolves(h),getDocumentPageTemplateSettings:c.stub().resolves(h),getLibraryPageTemplateSettings:c.stub().resolves(h),getThemeSettings:c.stub().resolves(p),createLink:c.stub().resolves(P.with(1)),createLibrary:c.stub().resolves(P.with(1)),createStandardDocument:c.stub().resolves(P.with(1)),createDocumentPage:c.stub().resolves(O.with(1)),createDocumentGroup:c.stub().resolves(re.with(1,0)),createDocumentCategory:c.stub().resolves(te.with(1)),createCoverPage:c.stub().resolves(be.with(1)),updateLink:c.stub().resolves(P.with(1)),updateLibrary:c.stub().resolves(P.with(1)),updateStandardDocument:c.stub().resolves(P.with(1)),updateDocumentPage:c.stub().resolves(O.with(1)),updateDocumentGroup:c.stub().resolves(re.with(1,0)),updateDocumentCategory:c.stub().resolves(te.with(1)),updateCoverPage:c.stub().resolves(be.with(1)),updateLegacyCoverPage:c.stub().resolves(be.withLegacy(1)),updateBrandportalLink:c.stub().resolves(dt.with()),updateCoverPageTemplateSettings:c.stub().callsFake(async b=>{h=J(h,b)}),updateDocumentPageTemplateSettings:c.stub().callsFake(async b=>{h=J(h,b)}),updateLibraryPageTemplateSettings:c.stub().callsFake(async b=>{h=J(h,b)}),updateThemeSettings:c.stub().callsFake(async b=>{p=J(p,b)}),deleteCoverPage:c.stub().resolves(),deleteDocumentCategory:c.stub().resolves(),deleteDocumentGroup:c.stub().resolves(),deleteDocumentPage:c.stub().resolves(),deleteLibrary:c.stub().resolves(),deleteLink:c.stub().resolves(),deleteStandardDocument:c.stub().resolves(),getBrandId:c.stub().returns(t),getBrandportalLink:c.stub().resolves(dt.with()),getTranslationLanguage:c.stub().returns(i),moveDocument:c.stub().resolves(P.with(Oe)),moveDocumentCategory:c.stub().resolves(te.with(lt)),moveDocumentGroup:c.stub().resolves(re.with(lt,0)),moveDocumentPage:c.stub().resolves(O.with(Le)),openNavigationManager:c.stub(),updateDocumentPageTargets:c.stub().resolves(pt.with([fn,wn,hn])),updateDocumentTargets:c.stub().resolves(pt.with([fn,wn,hn])),searchInGuideline:c.stub().callsFake(async b=>Promise.resolve([ke.with(`${b}-1`),ke.with(`${b}-1`),ke.with(`${b}-3`)])),closeAssetChooser:c.stub().callsFake(()=>{d()}),openAssetChooser:c.stub().callsFake(b=>{w(b)}),api:c.stub().resolves(),state:c.stub().resolves(),context:c.stub().resolves(),subscribe:c.stub().resolves(),dispatch:c.stub().resolves()}};class pl{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project_id:23,project_name:null,project_type:null,file_size:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--"}}}class gl{static default(){return{projectTypes:Object.values(We),objectTypes:[Xe.Canvas],extensions:[o.Jpg,o.Png,o.Svg],multiSelection:!0,urlContains:"abc.xyz"}}static withSingleSelectedValue(t){return{...this.default(),multiSelection:!1,selectedValueId:t}}static withMultiSelectedValues(t){return{...this.default(),multiSelection:!0,selectedValueIds:t}}}class fl{static with(t){return{id:t,creator_name:"Creator Name",ext:"png",external_url:null,file_id:"x1x1x1x1x1x1",file_name:"fileName.png",generic_url:"https://generic.url",height:480,object_type:"IMAGE",file_origin_url:"https://origin.url",preview_url:"https://preview.url",project:23,project_name:null,project_type:null,filesize:256,file_size_formatted:"123.45 MB",status:"FINISHED",title:"A title",width:640,token:"--token--"}}}class bn{static get(){return{brand_portal:{enabled:!0,label:"Brandportal Link",url:"/url"}}}}class dt{static with(t){return{...N(bn.get().brand_portal,"camel"),...t}}}class Me{static red(t=767){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Red",name_css:"red",sort:1,r:255,g:0,b:0,hex:"ff0000",alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static yellow(t=768){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Yellow",name_css:"yellow",sort:2,hex:"ffff00",r:255,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}static green(t=769){return{id:t,creator:1,created:"2022-06-10T12:35:52.000+00:00",modifier:null,modified:null,valid_from:null,valid_to:null,project:1,reference_color:null,group:null,palette:null,type:null,name:"Green",name_css:"green",sort:3,hex:"00ff00",r:0,g:255,b:0,alpha:255,hue:361,saturation:100,lightness:46,gradient_direction:null,gradient_color_one:null,gradient_color_two:null,gradient_type:null,usage:"USAGE",priority:null,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null,opacity:null,opacity_css:null,css_value:null}}}class wl{static red(){return{project_color_palette_id:23,red:255,green:0,blue:0,alpha:255}}}class hl{static red(){return{name:"Red",sort:1,name_css:"red",red:255,green:0,blue:0,alpha:255,c:0,m:100,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static yellow(){return{name:"Yellow",sort:2,name_css:"yellow",red:255,green:255,blue:0,alpha:255,c:0,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}static green(){return{name:"Green",sort:3,name_css:"green",red:0,green:255,blue:0,alpha:255,c:100,m:0,y:100,k:0,pantone:null,ral:null,oracal:null,pantone_coated:null,pantone_uncoated:null,cmyk_coated:null,cmyk_uncoated:null,cmyk_newspaper:null,ncs:null,pantone_cp:null,pantone_plastics:null,pantone_textile:null,hks:null,three_m:null,lab:null}}}class yl{static with(t,r="Color Palette Name"){return{id:t,name:r,description:"Color Palette Description",colors:[Me.red(),Me.yellow(),Me.green()]}}}class bl{static with(t=322){return{project_id:t,name:"New Color Palette Name",description:"New Color Palette Description"}}}class Dl{static with(){return{name:"Updated Color Palette Name",description:"Updated Color Palette Description"}}}class Dn{static with(t,r="Cover Page Name"){return{template:"hub",document_id:"1",brandhome:{id:t,title:r,active:!0,draft:1,enabled:1,url:`/hub/${t}`,hide_in_nav:!1}}}}class be{static with(t,r="Cover Page Name"){const n=Dn.with(t,r);return{...N(n.brandhome,"camel"),template:n.template,documentId:n.document_id,draft:!!n.brandhome.draft,enabled:!!n.brandhome.enabled}}static withLegacy(t,r="Legacy Cover Page"){return{brandhome_draft:!0,brandhome_title:r,brandhome_hide_in_nav:!1}}}class mt{static with(t){return{id:t,creator:9,created:"2022-03-03t15:41:33.000+00:00",modifier:null,modified:null,project_id:345,valid_from:"2022-03-03t15:41:33.000+00:00",valid_to:null,visibility:"private",portal_id:3495,title:`Document ${t}`,slug:`document-${t}`,heading:"Document Dummy heading",subheading:"Document Dummy subHeading",description:null,logo:null,sort:5,lazy:!0,link_type:Ke.Internal,link_url:null,link_settings:null,view_count:0,mode:"DEFAULT",appearance:null,settings:{},logo_file_id:null,logo_settings:[],background_file_id:null,background_settings:[],change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:[],token:"a-dummy-token",permanent_link:`/r/document-${t}`,number_of_document_page_categories:0,number_of_uncategorized_document_pages:0}}}class De{static with(t,r=[]){return{id:t,creator:9,created:"2022-08-15T11:47:47.000+00:00",modifier:null,modified:null,document_id:456,valid_from:"2022-08-15T11:47:47.000+00:00",valid_to:null,title:`Document Category Dummy ${t}`,slug:`document-category-dummy-${t}`,sort:1,number_of_document_pages:r.length}}static withDocumentIdAndNumberOfDocumentPages(t,r,n){return{...De.with(t),document_id:r,number_of_document_pages:n}}}class te{static with(t){return N(De.with(t),"camel")}static withDocumentIdAndNumberOfDocumentPages(t,r,n){return N(De.withDocumentIdAndNumberOfDocumentPages(t,r,n),"camel")}static withFields(t){return{...t}}}class P{static with(t){return N(mt.with(t),"camel")}static withDocumentGroupId(t,r){return{...N(mt.with(t),"camel"),documentGroupId:r}}static withFields(t){return{...t}}}class An{static with(t,r=0){return{id:t,creator:9,created:"2022-07-11 14:00:49",modified:"2022-08-15 07:59:28",modifier:9,valid_to:null,project_id:113,portal_id:175,name:`Document Group Dummy ${t}`,sort:1,number_of_documents:r}}}class re{static with(t,r=0){return N(An.with(t,r),"camel")}static withFields(t){return{...t}}}class Be{static with(t){return{id:t,creator:9,created:"2022-08-15T11:47:57.000+00:00",modifier:null,modified:null,document_id:145,category_id:29,parent_id:null,valid_from:"2022-08-15T11:47:57.000+00:00",valid_to:null,title:`Document Page Dummy ${t}`,slug:`document-page-dummy-${t}`,sort:1,link_type:"INTERNAL",link_url:null,view_count:0,visibility:ze.Everyone,change_processed:null,change_processed_by:null,change_skipped:null,change_skipped_by:null,change_comment:null,change_comment_by:null,change_title:null,targets:null,permanent_link:`/r/document-page-${t}`}}static withFields(t){return{...Be.with(t.id),...t}}}class vn{static with(t){return{page:{id:t,link_type:"INTERNAL",name:"Document page duplicate dummy",sections:[],url:`document-page-duplicate-dummy-${t}`,visibility:"EVERYONE"}}}}class O{static with(t){return N(Be.with(t),"camel")}static withFields(t){return{...O.with(t.id),...t}}}class Tn{static with(t){return N(vn.with(t).page,"camel")}}class Al{static with(t){return{id:t,creator:9,created:"2022-04-04T15:36:36.000+00:00",modifier:9,modified:"2022-04-04T15:36:43.000+00:00",document_id:1,page_id:6,revision:null,valid_from:"2022-04-04T15:36:36.000+00:00",valid_to:null,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanent_link:`/r/document-section-${t}`}}}class Ue{static with(t){return{id:t,title:`Document Section Dummy ${t}`,slug:`document-section-dummy-${t}`,sort:1,permanentLink:`/r/document-section-${t}`}}}class vl{static successWith(t){return{result:{success:!0,data:t}}}static success(){return{result:{success:!0,data:void 0}}}static failure(){return{result:{success:!1,data:void 0}}}}class ne{static target(t){return{checked:!1,disabled:!1,indeterminate:!1,label:String(t),target:{account_id:1,asset_ids:[],created:"2022-06-10T12:35:52.000+00:00",creator:1,description:"Target description",group_ids:[],id:t,modified:null,modifier:null,name:`Target ${t}`,sort:1,total_groups:null,total_links:null,total_users:null,user_ids:[]},value:t}}}class Cn{static with(t){return{appearance:{},background_file_id:null,background_url:null,heading:null,id:t,link_type:null,link_url:null,logo_file_id:null,logo_url:null,mode:null,portal_title:"Portal title",subheading:null,success:!0,targets:{disabled:[],has_selected_targets:!0,targets:[ne.target(1),ne.target(2),ne.target(3)]},title:"Test document"}}}class Tl{static with(t){return{success:!0,data:!0,targets:t}}}class _n{static with(t){return{default:!1,disabled:[],has_selected_targets:!0,id:t,success:!0,targets:[ne.target(1),ne.target(2),ne.target(3)]}}}class Pn{static with(t){return N(Cn.with(t).targets,"camel")}}class In{static with(t){return N(_n.with(t),"camel")}}class pt{static with(t){return{success:!0,data:!0,targets:t}}}class Cl{static with(t){return{asset_created:"2022-04-06",asset_modified:"2022-04-06",categories:[],description:"A description",height:480,id:t,name:"A template",preview:"https://preview.url",project:23,project_name:"A project",project_type:"A project type",published:1,screen_id:1,sector:"A sector",token:"--token--",unit:"px",width:640}}}class _l{static with(t){return{id:t,title:"A template",description:"A description",previewUrl:"https://preview.url",projectId:23,height:480,width:640,published:!0}}}class Pl{static with(t){return{id:t,name:"Frontify Dummy User",email:"test@frontify.test",created:"2020-01-01T00:00:00.000Z",image:{image:"https://dummy.frontify.test/image.png",original:"https://dummy.frontify.test/original_image.png",x:"10",y:"20",width:"30",height:"40"},organization:"Frontify",role:"user",timezone:"UTC",language:"en"}}}function Il(e,t){const r=Qr(t??{}),n=s=>f.createElement(e,{appBridge:r,...s}),a=e.displayName||e.name||"Component";return n.displayName=`withAppBridgeBlockStubs(${a})`,[n,r]}function Gl(e,t){const r=yn(t??{}),n=s=>f.createElement(e,{appBridge:r,...s}),a=e.displayName||e.name||"Component";return n.displayName=`withAppBridgeThemeStubs(${a})`,[n,r]}G.enableMapSet(),l.AppBridgeCreateAsset=Wi,l.AssetApiDummy=pl,l.AssetChooserObjectType=Xe,l.AssetChooserOptionsDummy=gl,l.AssetChooserProjectType=We,l.AssetChooserResultDummy=fl,l.AssetDummy=Se,l.BrandportalLinkApiDummy=bn,l.BrandportalLinkDummy=dt,l.BulkDownloadDummy=ct,l.BulkDownloadState=Er,l.ColorApiCreateDummy=wl,l.ColorApiDummy=Me,l.ColorApiPatchDummy=hl,l.ColorCreateDummy=Yc,l.ColorDummy=M,l.ColorPaletteApiCreateDummy=bl,l.ColorPaletteApiDummy=yl,l.ColorPaletteApiPatchDummy=Dl,l.ColorPaletteCreateDummy=Qc,l.ColorPaletteDummy=$,l.ColorPalettePatchDummy=Fc,l.ColorPatchDummy=Jc,l.CoverPageApiDummy=Dn,l.CoverPageDummy=be,l.DocumentApiDummy=mt,l.DocumentCategoryApiDummy=De,l.DocumentCategoryDummy=te,l.DocumentDummy=P,l.DocumentGroupApiDummy=An,l.DocumentGroupDummy=re,l.DocumentPageApiDummy=Be,l.DocumentPageDummy=O,l.DocumentPageDuplicateApiDummy=vn,l.DocumentPageDuplicateDummy=Tn,l.DocumentPageTargetsApiDummy=_n,l.DocumentPageTargetsDummy=In,l.DocumentPageVisibility=ze,l.DocumentSectionApiDummy=Al,l.DocumentSectionDummy=Ue,l.DocumentTargetsApiDummy=Cn,l.DocumentTargetsDummy=Pn,l.FetchError=Br,l.FileExtension=o,l.FileExtensionSets=Gn,l.FileType=yt,l.GuidelineSearchResultApiDummy=Fr,l.GuidelineSearchResultDummy=ke,l.HttpClient=Ct,l.HttpClientError=Tt,l.HttpUtilResponseDummy=vl,l.LinkSettingsDisplay=wt,l.LinkSettingsIconPosition=ht,l.LinkType=Ke,l.SUBSCRIBE_TIMEOUT=Nr,l.SingleTargetApiDummy=ne,l.TemplateApiLegacyDummy=Cl,l.TemplateDummy=Yr,l.TemplateLegacyDummy=_l,l.TerrificEvent=bt,l.TimeoutReachedError=Ur,l.Topic=L,l.UpdateTargetsApiDummy=Tl,l.UpdateTargetsDummy=pt,l.UserApiDummy=Pl,l.UserDummy=Hr,l.closeAssetChooser=Ri,l.closeTemplateChooser=Ji,l.compareObjects=Y,l.convertObjectCase=N,l.generateRandomString=vt,l.getAppBridgeBlockStub=Qr,l.getAppBridgePlatformAppStub=rl,l.getAppBridgeThemeStub=yn,l.getDatasetByClassName=On,l.getDatasetByElement=Dt,l.getMimeType=Ln,l.isObject=we,l.mergeDeep=J,l.mimeTypes=At,l.notify=j,l.openAssetChooser=Xi,l.openAssetViewer=Vi,l.openNavigationManager=Hi,l.openTemplateChooser=Yi,l.rgbObjectToRgbString=kn,l.rgbStringToRgbObject=Sn,l.subscribe=Q,l.useAssetChooser=Qi,l.useAssetUpload=tc,l.useAssetViewer=rc,l.useBlockAssets=nc,l.useBlockSettings=ac,l.useBlockTemplates=oc,l.useBrandportalLink=uc,l.useBulkDownload=ic,l.useCategorizedDocumentPages=cc,l.useColorPalettes=pc,l.useColors=gc,l.useCoverPage=fc,l.useDocumentCategories=wc,l.useDocumentGroups=bc,l.useDocumentPageTargets=Tc,l.useDocumentSection=_c,l.useDocumentTargets=Pc,l.useEditorState=Gc,l.useFileInput=Sc,l.useFileUpload=jr,l.useGroupedDocuments=kc,l.useGuidelineActions=Mc,l.useNavigationManager=Bc,l.usePageTemplateSettings=Uc,l.usePrivacySettings=Nc,l.useReadyForPrint=$c,l.useTemplateAssets=xc,l.useTemplateChooser=jc,l.useThemeAssets=Zc,l.useUncategorizedDocumentPages=Ec,l.useUngroupedDocuments=Xc,l.withAppBridgeBlockStubs=Il,l.withAppBridgeThemeStubs=Gl,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
