{"version":3,"file":"transformers.es.js","sources":["../../../../src/components/LinkChooser/utils/transformers.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { MenuItemContentSize, SelectionIndicatorIcon } from '@components/MenuItem';\nimport { generateRandomId } from '@utilities/generateRandomId';\nimport { CUSTOM_LINK_ID, DEFAULT_ICON, MAX_STORED_ITEMS, QUERIES_STORAGE_KEY } from '../LinkChooser';\nimport { SearchResult } from '../types';\nimport { isCustomLink, prependHttps } from './helpers';\n\nexport const createCustomLink = (query: string): SearchResult =>\n    ({\n        id: `${CUSTOM_LINK_ID}-${generateRandomId()}`,\n        title: query,\n        link: prependHttps(query),\n        icon: DEFAULT_ICON,\n        size: MenuItemContentSize.Large,\n        selectionIndicator: SelectionIndicatorIcon.Check,\n    } as SearchResult);\n\nexport const retrieveRecentQueries = (): SearchResult[] => {\n    const recentQueries = JSON.parse(localStorage.getItem(QUERIES_STORAGE_KEY) || 'null');\n    return recentQueries || [];\n};\n\nexport const mergeResultWithRecentQueries = (selectedResult: SearchResult): SearchResult[] => {\n    const isSelectedCustomLink = isCustomLink(selectedResult);\n    const localSelectedResult = { ...selectedResult, local: true };\n\n    const retrievedQueries = retrieveRecentQueries();\n    const retrievedItem = retrievedQueries.find((item: SearchResult) => item.id === selectedResult?.id);\n\n    const parsedQueries = retrievedQueries.filter(\n        (query) => !isSelectedCustomLink || (isSelectedCustomLink && query.title !== selectedResult.title),\n    );\n\n    let updatedQueries;\n    if (retrievedItem) {\n        updatedQueries = [\n            localSelectedResult,\n            ...parsedQueries.filter((item: SearchResult) => item.id !== selectedResult?.id),\n        ];\n    } else if (parsedQueries.length < MAX_STORED_ITEMS) {\n        updatedQueries = [localSelectedResult, ...parsedQueries];\n    } else {\n        updatedQueries = [localSelectedResult, ...parsedQueries.slice(0, -1)];\n    }\n    return updatedQueries;\n};\n"],"names":["createCustomLink","query","CUSTOM_LINK_ID","generateRandomId","prependHttps","DEFAULT_ICON","MenuItemContentSize","SelectionIndicatorIcon","retrieveRecentQueries","QUERIES_STORAGE_KEY","mergeResultWithRecentQueries","selectedResult","isSelectedCustomLink","isCustomLink","localSelectedResult","retrievedQueries","retrievedItem","item","parsedQueries","updatedQueries","MAX_STORED_ITEMS"],"mappings":";;;;AAQa,MAAAA,IAAmB,CAACC,OAC5B;AAAA,EACG,IAAI,GAAGC,KAAkBC,EAAiB;AAAA,EAC1C,OAAOF;AAAA,EACP,MAAMG,EAAaH,CAAK;AAAA,EACxB,MAAMI;AAAA,EACN,MAAMC,EAAoB;AAAA,EAC1B,oBAAoBC,EAAuB;AAC/C,IAESC,IAAwB,MACX,KAAK,MAAM,aAAa,QAAQC,CAAmB,KAAK,MAAM,KAC5D,CAAA,GAGfC,IAA+B,CAACC,MAAiD;AACpF,QAAAC,IAAuBC,EAAaF,CAAc,GAClDG,IAAsB,EAAE,GAAGH,GAAgB,OAAO,GAAK,GAEvDI,IAAmBP,KACnBQ,IAAgBD,EAAiB,KAAK,CAACE,MAAuBA,EAAK,QAAON,KAAA,gBAAAA,EAAgB,GAAE,GAE5FO,IAAgBH,EAAiB;AAAA,IACnC,CAACd,MAAU,CAACW,KAAyBA,KAAwBX,EAAM,UAAUU,EAAe;AAAA,EAAA;AAG5F,MAAAQ;AACJ,SAAIH,IACiBG,IAAA;AAAA,IACbL;AAAA,IACA,GAAGI,EAAc,OAAO,CAACD,MAAuBA,EAAK,QAAON,KAAA,gBAAAA,EAAgB,GAAE;AAAA,EAAA,IAE3EO,EAAc,SAASE,IACbD,IAAA,CAACL,GAAqB,GAAGI,CAAa,IAEvDC,IAAiB,CAACL,GAAqB,GAAGI,EAAc,MAAM,GAAG,EAAE,CAAC,GAEjEC;AACX;"}