{"version":3,"file":"SearchResultOption.es.js","sources":["../../../src/components/LinkChooser/SearchResultOption.tsx"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { MenuItemContentSize } from '@components/MenuItem';\nimport { MenuItem } from '@components/MenuItem/MenuItem';\nimport { getInteractionModality } from '@react-aria/interactions';\nimport { useOption } from '@react-aria/listbox';\nimport { merge } from '@utilities/merge';\nimport { useActor } from '@xstate/react';\nimport React, { ReactElement, useRef } from 'react';\nimport { IconOptions } from './LinkChooser';\nimport { DropdownState, LinkChooserState, SectionState } from './state/types';\nimport { ImageMenuItemProps, SearchResult, SearchResultOptionProps } from './types';\nimport { findSection } from './utils/helpers';\n\nexport const SearchResultOption = ({\n    item,\n    state,\n    keyItemRecord,\n    machineService,\n}: SearchResultOptionProps): ReactElement => {\n    const ref = useRef<HTMLLIElement>(null);\n    const { optionProps, isDisabled, isSelected, isFocused } = useOption(\n        {\n            key: item.key,\n            shouldFocusOnHover: false,\n        },\n        state,\n        ref,\n    );\n    const [\n        {\n            context: { extraSections, currentSectionId },\n            matches,\n        },\n    ] = useActor(machineService);\n\n    const menuItem = keyItemRecord[item.key];\n    const decorator = menuItem.icon ? IconOptions[menuItem.icon] : undefined;\n    const currentSection = findSection(extraSections, currentSectionId);\n    const isLoaded = (currentState: DropdownState) =>\n        matches(`${LinkChooserState.Focused}.${currentState}.${SectionState.Loaded}`);\n\n    const isFocusVisible = getInteractionModality() !== 'pointer';\n\n    const renderExtraSection = (menuItem: SearchResult) =>\n        currentSection?.renderPreview?.(menuItem) || <ImageMenuItem {...menuItem} />;\n\n    return (\n        <li\n            {...optionProps}\n            ref={ref}\n            className={merge([\n                'tw-relative hover:tw-bg-black-10 tw-list-none tw-outline-none',\n                isDisabled && 'tw-pointer-events-none tw-top-px',\n                isFocused && isFocusVisible && 'tw-bg-black-10',\n            ])}\n        >\n            {isLoaded(DropdownState.Default) && (\n                <MenuItem {...menuItem} active={isSelected} decorator={decorator} size={MenuItemContentSize.Large} />\n            )}\n            {isLoaded(DropdownState.ExtraSection) && renderExtraSection(menuItem)}\n        </li>\n    );\n};\n\nconst ImageMenuItem = ({ title, subtitle, preview }: ImageMenuItemProps): ReactElement => (\n    <div className=\"tw-flex tw-px-5 tw-py-1.5 tw-cursor-pointer\">\n        <div className=\"tw-flex tw-flex-shrink-0 tw-w-[75px] tw-h-[75px] tw-max-w-xs tw-bg-black-0 tw-rounded\">\n            {preview && <img className=\"tw-w-full tw-object-contain\" src={preview} alt={title as string} />}\n        </div>\n        <div className=\"tw-flex tw-flex-col tw-justify-center tw-ml-4\">\n            <p className=\"tw-block tw-text-md tw-leading-tight tw-hover:underline tw-text-black-80\">{title}</p>\n            {subtitle && <p className=\"tw-text-[12px] tw-text-black-80\">{subtitle}</p>}\n        </div>\n    </div>\n);\n"],"names":["SearchResultOption","item","state","keyItemRecord","machineService","ref","useRef","optionProps","isDisabled","isSelected","isFocused","useOption","extraSections","currentSectionId","matches","useActor","menuItem","decorator","IconOptions","currentSection","findSection","isLoaded","currentState","LinkChooserState","SectionState","isFocusVisible","getInteractionModality","renderExtraSection","_a","React","ImageMenuItem","merge","DropdownState","MenuItem","MenuItemContentSize","title","subtitle","preview"],"mappings":";;;;;;;;;;AAcO,MAAMA,IAAqB,CAAC;AAAA,EAC/B,MAAAC;AAAA,EACA,OAAAC;AAAA,EACA,eAAAC;AAAA,EACA,gBAAAC;AACJ,MAA6C;AACnC,QAAAC,IAAMC,EAAsB,IAAI,GAChC,EAAE,aAAAC,GAAa,YAAAC,GAAY,YAAAC,GAAY,WAAAC,EAAc,IAAAC;AAAA,IACvD;AAAA,MACI,KAAKV,EAAK;AAAA,MACV,oBAAoB;AAAA,IACxB;AAAA,IACAC;AAAA,IACAG;AAAA,EAAA,GAEE;AAAA,IACF;AAAA,MACI,SAAS,EAAE,eAAAO,GAAe,kBAAAC,EAAiB;AAAA,MAC3C,SAAAC;AAAA,IACJ;AAAA,EAAA,IACAC,EAASX,CAAc,GAErBY,IAAWb,EAAcF,EAAK,GAAG,GACjCgB,IAAYD,EAAS,OAAOE,EAAYF,EAAS,IAAI,IAAI,QACzDG,IAAiBC,EAAYR,GAAeC,CAAgB,GAC5DQ,IAAW,CAACC,MACdR,EAAQ,GAAGS,EAAiB,WAAWD,KAAgBE,EAAa,QAAQ,GAE1EC,IAAiBC,EAA6B,MAAA,WAE9CC,IAAqB,CAACX;;AACxB,aAAAY,IAAAT,KAAA,gBAAAA,EAAgB,kBAAhB,gBAAAS,EAAA,KAAAT,GAAgCH,OAAa,gBAAAa,EAAA,cAACC,GAAe,EAAA,GAAGd,EAAU,CAAA;AAAA;AAG1E,SAAA,gBAAAa,EAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACI,GAAGtB;AAAA,MACJ,KAAAF;AAAA,MACA,WAAW0B,EAAM;AAAA,QACb;AAAA,QACAvB,KAAc;AAAA,QACdE,KAAae,KAAkB;AAAA,MAAA,CAClC;AAAA,IAAA;AAAA,IAEAJ,EAASW,EAAc,OAAO,KAC1B,gBAAAH,EAAA,cAAAI,GAAA,EAAU,GAAGjB,GAAU,QAAQP,GAAY,WAAAQ,GAAsB,MAAMiB,EAAoB,OAAO;AAAA,IAEtGb,EAASW,EAAc,YAAY,KAAKL,EAAmBX,CAAQ;AAAA,EAAA;AAGhF,GAEMc,IAAgB,CAAC,EAAE,OAAAK,GAAO,UAAAC,GAAU,SAAAC,QACrC,gBAAAR,EAAA,cAAA,OAAA,EAAI,WAAU,8CACX,GAAA,gBAAAA,EAAA,cAAC,SAAI,WAAU,wFAAA,GACVQ,KAAY,gBAAAR,EAAA,cAAA,OAAA,EAAI,WAAU,+BAA8B,KAAKQ,GAAS,KAAKF,EAAiB,CAAA,CACjG,GACA,gBAAAN,EAAA,cAAC,SAAI,WAAU,gDAAA,mCACV,KAAE,EAAA,WAAU,8EAA4EM,CAAM,GAC9FC,KAAa,gBAAAP,EAAA,cAAA,KAAA,EAAE,WAAU,qCAAmCO,CAAS,CAC1E,CACJ;"}