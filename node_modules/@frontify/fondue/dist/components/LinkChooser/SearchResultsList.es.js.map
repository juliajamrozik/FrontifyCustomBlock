{"version":3,"file":"SearchResultsList.es.js","sources":["../../../src/components/LinkChooser/SearchResultsList.tsx"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { getKeyItemRecord, getMenuItems } from '@components/ActionMenu/Aria/helper';\nimport { useListBox } from '@react-aria/listbox';\nimport { useActor } from '@xstate/react';\nimport React, { ReactElement, useMemo, useRef } from 'react';\nimport BackgroundIcon from './assets/background.svg';\nimport NoResultsIcon from './assets/no-results.svg';\nimport FetchingIcon from './assets/nook-animated.png';\nimport { NavigationMenuItem } from './NavigationMenu';\nimport { SearchResultSection } from './SearchResultSection';\nimport { defaultSection } from './sections';\nimport { SearchResultListProps } from './types';\nimport { findSection } from './utils/helpers';\nimport { isFetching, isUnsuccessful, shouldGoBack } from './utils/state';\n\nexport const SearchResultsList = (props: SearchResultListProps): ReactElement => {\n    const ref = useRef<HTMLUListElement>(null);\n    const { listBoxRef = ref, state, menuBlocks, machineService } = props;\n    const { listBoxProps } = useListBox(props, state, listBoxRef);\n    const items = getMenuItems(menuBlocks);\n    const keyItemRecord = getKeyItemRecord(items);\n\n    const [\n        {\n            context: { extraSections, currentSectionId, searchResults, query },\n            matches,\n        },\n        send,\n    ] = useActor(machineService);\n\n    const currentSection = useMemo(\n        () => findSection(extraSections, currentSectionId) || defaultSection,\n        [currentSectionId, extraSections],\n    );\n\n    if (isFetching(matches)) {\n        return <FetchingAnimation />;\n    }\n\n    if (isUnsuccessful(matches)) {\n        return <FetchingError />;\n    }\n\n    return (\n        <div>\n            {shouldGoBack(matches) && (\n                <div className=\"tw-mt-2\">\n                    <NavigationMenuItem\n                        state={state}\n                        section={currentSection}\n                        onPress={() => {\n                            send({\n                                type: 'BACK_TO_DEFAULT',\n                                data: { getExtraResultsByQuery: null },\n                            });\n                        }}\n                        direction=\"left\"\n                    />\n                </div>\n            )}\n            <ul\n                {...listBoxProps}\n                data-test-id=\"link-chooser-results-list\"\n                ref={listBoxRef}\n                className=\"tw-list-none tw-p-0 tw-m-0 tw-bg-white tw-z-20 focus-visible:tw-outline-none\"\n            >\n                {searchResults.length > 0 ? (\n                    [...state.collection]\n                        .filter((section) => section.key === 'search')\n                        .map((item) => (\n                            <SearchResultSection\n                                key={item.key}\n                                heading={item}\n                                state={state}\n                                keyItemRecord={keyItemRecord}\n                                machineService={machineService}\n                            />\n                        ))\n                ) : (\n                    <EmptyResults\n                        prompt={\n                            query\n                                ? `We could not find any results for \"${query}\".`\n                                : 'Use the search above to discover your brand assets, or enter a URL'\n                        }\n                        icon={query ? NoResultsIcon : BackgroundIcon}\n                    />\n                )}\n            </ul>\n        </div>\n    );\n};\n\nconst EmptyResults = ({ prompt, icon }: { prompt: string; icon: string }): ReactElement => (\n    <div\n        data-test-id=\"link-chooser-empty-results\"\n        className=\"tw-flex tw-flex-col tw-justify-center tw-items-center tw-h-[278px] tw-p-3\"\n    >\n        <img className=\"tw-w-[150px] tw-mb-5\" src={icon} alt=\"Icon\" />\n        <p className=\"tw-text-black-60 tw-text-center\">{prompt}</p>\n    </div>\n);\n\nconst FetchingError = ({\n    error = 'An error occurred while fetching the results',\n}: {\n    error?: string;\n}): ReactElement => (\n    <div\n        data-test-id=\"link-chooser-error\"\n        className=\"tw-flex tw-flex-col tw-justify-center tw-items-center tw-h-[278px] tw-p-3\"\n    >\n        <img className=\"tw-w-[75px] tw-mb-5\" src={NoResultsIcon} alt=\"Error\" />\n        <p className=\"tw-text-black-60 tw-text-center\">{error}</p>\n    </div>\n);\n\nconst FetchingAnimation = (): ReactElement => (\n    <div\n        data-test-id=\"link-chooser-loader\"\n        className=\"tw-flex tw-flex-col tw-justify-center tw-items-center tw-h-[278px] tw-p-3\"\n    >\n        <img className=\"tw-w-[50px]\" src={FetchingIcon} alt=\"Fetching\" />\n    </div>\n);\n"],"names":["SearchResultsList","props","ref","useRef","listBoxRef","state","menuBlocks","machineService","listBoxProps","useListBox","items","getMenuItems","keyItemRecord","getKeyItemRecord","extraSections","currentSectionId","searchResults","query","matches","send","useActor","currentSection","useMemo","findSection","defaultSection","isFetching","FetchingAnimation","isUnsuccessful","FetchingError","React","shouldGoBack","NavigationMenuItem","section","item","SearchResultSection","EmptyResults","NoResultsIcon","BackgroundIcon","prompt","icon","error","FetchingIcon"],"mappings":"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"}