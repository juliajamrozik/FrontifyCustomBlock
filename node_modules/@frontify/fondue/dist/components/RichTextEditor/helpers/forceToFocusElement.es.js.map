{"version":3,"file":"forceToFocusElement.es.js","sources":["../../../../src/components/RichTextEditor/helpers/forceToFocusElement.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nconst TABBABLE_ELEMENTS = [\n    'input',\n    'select',\n    'textarea',\n    'button',\n    'a[href]',\n    'area[href]',\n    'summary',\n    'iframe',\n    'object',\n    'embed',\n    'audio[controls]',\n    'video[controls]',\n    '[contenteditable=\"true\"]',\n    '[tabindex]',\n].join(':not([hidden]):not([tabindex=\"-1\"]):not([disabled]),');\n\nexport const forceToFocusNextElement = (event: React.KeyboardEvent, forwards: boolean) => {\n    if (!document.activeElement) {\n        return;\n    }\n    event.preventDefault();\n    const focusableElements = Array.from(document.querySelectorAll(TABBABLE_ELEMENTS)).filter((focusableElement) =>\n        isElementVisible(focusableElement as HTMLElement),\n    );\n    const currentIndex = focusableElements.indexOf(document.activeElement);\n    const indexOfNextFocus =\n        (forwards ? currentIndex + 1 : currentIndex - 1 + focusableElements.length) % focusableElements.length;\n    const nextFocusable = focusableElements[indexOfNextFocus] as HTMLElement;\n    if (nextFocusable) {\n        nextFocusable.focus();\n    }\n};\n\nconst isElementVisible = (element: HTMLElement) => {\n    let currentElement: HTMLElement | null = element;\n    while (currentElement) {\n        const style = window.getComputedStyle(currentElement);\n        if (style.display === 'none' || style.visibility === 'hidden') {\n            return false;\n        }\n        currentElement = currentElement.parentElement;\n    }\n    return true;\n};\n"],"names":["TABBABLE_ELEMENTS","forceToFocusNextElement","event","forwards","focusableElements","focusableElement","isElementVisible","currentIndex","indexOfNextFocus","nextFocusable","element","currentElement","style"],"mappings":"AAEA,MAAMA,IAAoB;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,EAAE,KAAK,sDAAsD,GAEhDC,IAA0B,CAACC,GAA4BC,MAAsB;AAClF,MAAA,CAAC,SAAS;AACV;AAEJ,EAAAD,EAAM,eAAe;AACrB,QAAME,IAAoB,MAAM,KAAK,SAAS,iBAAiBJ,CAAiB,CAAC,EAAE;AAAA,IAAO,CAACK,MACvFC,EAAiBD,CAA+B;AAAA,EAAA,GAE9CE,IAAeH,EAAkB,QAAQ,SAAS,aAAa,GAC/DI,KACDL,IAAWI,IAAe,IAAIA,IAAe,IAAIH,EAAkB,UAAUA,EAAkB,QAC9FK,IAAgBL,EAAkBI,CAAgB;AACxD,EAAIC,KACAA,EAAc,MAAM;AAE5B,GAEMH,IAAmB,CAACI,MAAyB;AAC/C,MAAIC,IAAqCD;AACzC,SAAOC,KAAgB;AACb,UAAAC,IAAQ,OAAO,iBAAiBD,CAAc;AACpD,QAAIC,EAAM,YAAY,UAAUA,EAAM,eAAe;AAC1C,aAAA;AAEX,IAAAD,IAAiBA,EAAe;AAAA,EACpC;AACO,SAAA;AACX;"}