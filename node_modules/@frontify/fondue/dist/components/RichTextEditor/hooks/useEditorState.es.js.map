{"version":3,"file":"useEditorState.es.js","sources":["../../../../src/components/RichTextEditor/hooks/useEditorState.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { useCallback, useMemo, useRef } from 'react';\nimport { useDebounce } from '@hooks/useDebounce';\nimport { ON_SAVE_DELAY_IN_MS, parseRawValue } from '../utils';\nimport { GeneratePlugins, PluginComposer } from '../Plugins';\nimport { TreeOfNodes } from '../types';\n\ntype useEditorStateProps = {\n    editorId: string;\n    plugins: PluginComposer;\n    initialValue?: string;\n    onTextChange?: (value: string) => void;\n    onValueChanged?: (value: TreeOfNodes | null) => void;\n};\n\nexport const useEditorState = ({\n    editorId,\n    initialValue,\n    plugins,\n    onTextChange,\n    onValueChanged,\n}: useEditorStateProps) => {\n    const localValue = useRef<TreeOfNodes | null>(null);\n\n    const debouncedOnChange = useDebounce((value: TreeOfNodes) => {\n        onTextChange && onTextChange(JSON.stringify(value));\n    }, ON_SAVE_DELAY_IN_MS);\n\n    const onChange = useCallback(\n        (value: TreeOfNodes) => {\n            debouncedOnChange(value);\n            localValue.current = value;\n            onValueChanged && onValueChanged(value);\n        },\n        [debouncedOnChange, localValue, onValueChanged],\n    );\n\n    const memoizedValue = useMemo(\n        () => parseRawValue({ editorId, raw: initialValue, plugins }),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [editorId],\n    );\n\n    const config = GeneratePlugins(editorId, plugins);\n\n    return { localValue, onChange, memoizedValue, config };\n};\n"],"names":["useEditorState","editorId","initialValue","plugins","onTextChange","onValueChanged","localValue","useRef","debouncedOnChange","useDebounce","value","ON_SAVE_DELAY_IN_MS","onChange","useCallback","memoizedValue","useMemo","parseRawValue","config","GeneratePlugins"],"mappings":";;;;;AAgBO,MAAMA,IAAiB,CAAC;AAAA,EAC3B,UAAAC;AAAA,EACA,cAAAC;AAAA,EACA,SAAAC;AAAA,EACA,cAAAC;AAAA,EACA,gBAAAC;AACJ,MAA2B;AACjB,QAAAC,IAAaC,EAA2B,IAAI,GAE5CC,IAAoBC,EAAY,CAACC,MAAuB;AAC1D,IAAAN,KAAgBA,EAAa,KAAK,UAAUM,CAAK,CAAC;AAAA,KACnDC,CAAmB,GAEhBC,IAAWC;AAAA,IACb,CAACH,MAAuB;AACpB,MAAAF,EAAkBE,CAAK,GACvBJ,EAAW,UAAUI,GACrBL,KAAkBA,EAAeK,CAAK;AAAA,IAC1C;AAAA,IACA,CAACF,GAAmBF,GAAYD,CAAc;AAAA,EAAA,GAG5CS,IAAgBC;AAAA,IAClB,MAAMC,EAAc,EAAE,UAAAf,GAAU,KAAKC,GAAc,SAAAC,GAAS;AAAA;AAAA,IAE5D,CAACF,CAAQ;AAAA,EAAA,GAGPgB,IAASC,EAAgBjB,GAAUE,CAAO;AAEhD,SAAO,EAAE,YAAAG,GAAY,UAAAM,GAAU,eAAAE,GAAe,QAAAG,EAAO;AACzD;"}