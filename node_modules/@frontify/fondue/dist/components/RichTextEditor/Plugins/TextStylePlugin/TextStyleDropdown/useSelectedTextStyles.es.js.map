{"version":3,"file":"useSelectedTextStyles.es.js","sources":["../../../../../../src/components/RichTextEditor/Plugins/TextStylePlugin/TextStyleDropdown/useSelectedTextStyles.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport {\n    ELEMENT_LI,\n    ELEMENT_LIC,\n    ELEMENT_OL,\n    ELEMENT_PARAGRAPH,\n    ELEMENT_UL,\n    ENode,\n    PlateEditor,\n    Value,\n    getNodeEntries,\n    isNode,\n    isText,\n} from '@udecode/plate';\nimport { ELEMENT_CHECK_ITEM } from '../../CheckboxListPlugin';\nimport { MARK_TEXT_STYLE } from '../../ListPlugin';\n\nconst getTextStyle = (node: ENode<Value>): string => {\n    if (Array.isArray(node.children)) {\n        const textNode = node.children.find((node) => isText(node)) ?? {};\n\n        return textNode[MARK_TEXT_STYLE];\n    }\n\n    return ELEMENT_PARAGRAPH;\n};\n\nconst excludeStyles = [ELEMENT_LI, ELEMENT_UL, ELEMENT_OL];\n\nexport const useSelectedTextStyles = (editor: PlateEditor): string[] => {\n    if (!editor || !editor.selection) {\n        return [];\n    }\n\n    const nodeEntries = Array.from(\n        getNodeEntries(editor, {\n            unhang: true,\n            at: editor.selection,\n            reverse: true,\n        }),\n    );\n\n    return nodeEntries.reduce<string[]>((styles, [node]) => {\n        if (!isNode(node)) {\n            return styles;\n        }\n\n        const styleToAdd =\n            node.type === ELEMENT_LIC || node.type === ELEMENT_CHECK_ITEM\n                ? getTextStyle(node)\n                : (node.textStyle as string);\n\n        if (styleToAdd && !styles.includes(styleToAdd) && !excludeStyles.includes(styleToAdd)) {\n            styles.push(styleToAdd);\n        }\n\n        return styles;\n    }, []);\n};\n"],"names":["getTextStyle","node","isText","MARK_TEXT_STYLE","ELEMENT_PARAGRAPH","excludeStyles","ELEMENT_LI","ELEMENT_UL","ELEMENT_OL","useSelectedTextStyles","editor","getNodeEntries","styles","isNode","styleToAdd","ELEMENT_LIC","ELEMENT_CHECK_ITEM"],"mappings":";;;AAkBA,MAAMA,IAAe,CAACC,MACd,MAAM,QAAQA,EAAK,QAAQ,KACVA,EAAK,SAAS,KAAK,CAACA,MAASC,EAAOD,CAAI,CAAC,KAAK,IAE/CE,CAAe,IAG5BC,GAGLC,IAAgB,CAACC,GAAYC,GAAYC,CAAU,GAE5CC,IAAwB,CAACC,MAC9B,CAACA,KAAU,CAACA,EAAO,YACZ,KAGS,MAAM;AAAA,EACtBC,EAAeD,GAAQ;AAAA,IACnB,QAAQ;AAAA,IACR,IAAIA,EAAO;AAAA,IACX,SAAS;AAAA,EAAA,CACZ;AAAA,EAGc,OAAiB,CAACE,GAAQ,CAACX,CAAI,MAAM;AAChD,MAAA,CAACY,EAAOZ,CAAI;AACL,WAAAW;AAGL,QAAAE,IACFb,EAAK,SAASc,KAAed,EAAK,SAASe,IACrChB,EAAaC,CAAI,IAChBA,EAAK;AAEZ,SAAAa,KAAc,CAACF,EAAO,SAASE,CAAU,KAAK,CAACT,EAAc,SAASS,CAAU,KAChFF,EAAO,KAAKE,CAAU,GAGnBF;AACX,GAAG,CAAE,CAAA;"}