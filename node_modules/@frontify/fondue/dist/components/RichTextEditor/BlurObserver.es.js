import { useEditorRef as S, useFloatingLinkSelectors as T, floatingLinkActions as y } from "@udecode/plate";
import { useCallback as u, useEffect as b } from "react";
const I = ({
  hideExternalFloatingModals: n
}) => {
  const t = S(), d = T().isOpen(t.id), e = u(() => {
    d && y.reset(), n && n(t.id);
  }, [d, n, t]), l = u(() => {
    t.collapse(), e();
  }, [t, e]);
  return b(() => {
    const o = (f) => {
      const m = `[data-editor-id='${t.id}']`, g = "[data-selector='toolbar-floating']", v = "[data-is-underlay]", i = document.querySelector(m), s = document.querySelector(g), c = document.querySelector(v), r = f.target, E = c == null ? void 0 : c.contains(r), L = i == null ? void 0 : i.contains(r), a = s == null ? void 0 : s.contains(r);
      a && e(), !L && !a && !E && l();
    };
    return document.addEventListener("pointerdown", o), document.addEventListener("focusin", o), () => {
      document.removeEventListener("focusin", o), document.removeEventListener("pointerdown", o);
    };
  }, [l, e, t.id]), null;
};
export {
  I as BlurObserver
};
//# sourceMappingURL=BlurObserver.es.js.map
