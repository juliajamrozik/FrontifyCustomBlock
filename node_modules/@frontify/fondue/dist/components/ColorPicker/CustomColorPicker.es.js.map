{"version":3,"file":"CustomColorPicker.es.js","sources":["../../../src/components/ColorPicker/CustomColorPicker.tsx"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { Dropdown } from '@components/Dropdown/Dropdown';\nimport { TextInputType } from '@components/TextInput/TextInput';\nimport { toLongRgb, toShortRgb } from '@utilities/colors';\nimport React, { ReactElement, useEffect, useState } from 'react';\nimport { RgbaColorPicker } from 'react-colorful';\nimport tinycolor from 'tinycolor2';\nimport { Color, ColorFormat } from '../../types';\nimport { ColorInput, DecoratorPosition } from './ColorInput';\nimport { ColorPickerProps } from './ColorPicker';\n\nconst convertToHex = (color: Color) => tinycolor(toShortRgb(color)).toHex();\n\nexport const CustomColorPicker = ({\n    currentColor,\n    currentFormat,\n    setFormat,\n    onSelect,\n}: Omit<ColorPickerProps, 'palette'>): ReactElement => {\n    const formatMenuBlock = [\n        {\n            id: 'color-picker-format-dropdown-block',\n            menuItems: Object.values(ColorFormat).map((id) => ({ id, title: id.toLocaleUpperCase() })),\n        },\n    ];\n    const { red, green, blue, alpha = 1 } = currentColor;\n    const [hexInput, setHexInput] = useState(convertToHex(currentColor));\n    const [alphaValue, setAlphaValue] = useState(alpha);\n\n    const handleHexChange = () => {\n        const parsedHex = tinycolor(hexInput);\n        if (parsedHex.isValid()) {\n            onSelect(toLongRgb(parsedHex.toRgb()));\n        }\n    };\n\n    useEffect(() => {\n        setAlphaValue(alpha);\n        setHexInput(convertToHex(currentColor));\n    }, [alpha, currentColor]);\n\n    return (\n        <div className=\"tw-flex tw-flex-col tw-gap-4\" data-test-id=\"custom-color-picker\" id=\"custom-color-picker\">\n            <div className=\"tw-flex tw-flex-col md:tw-flex-row tw-gap-2 tw-max-w-full\">\n                <div className=\"tw-min-w-[84px]\">\n                    <Dropdown\n                        menuBlocks={formatMenuBlock}\n                        activeItemId={currentFormat}\n                        onChange={(id) => id && setFormat && setFormat(id as ColorFormat)}\n                    />\n                </div>\n                {currentFormat === ColorFormat.Hex ? (\n                    <div className=\"tw-flex-1\">\n                        <ColorInput\n                            value={hexInput}\n                            decorator=\"#\"\n                            size={6}\n                            onChange={setHexInput}\n                            onEnterPressed={handleHexChange}\n                            onBlur={handleHexChange}\n                        />\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"tw-flex-1\">\n                            <ColorInput\n                                min={0}\n                                max={255}\n                                size={3}\n                                type={TextInputType.Number}\n                                value={red.toString()}\n                                onChange={(value) => onSelect({ ...currentColor, red: parseInt(value) })}\n                            />\n                        </div>\n                        <div className=\"tw-flex-1\">\n                            <ColorInput\n                                min={0}\n                                max={255}\n                                size={3}\n                                type={TextInputType.Number}\n                                value={green.toString()}\n                                onChange={(value) => onSelect({ ...currentColor, green: parseInt(value) })}\n                            />\n                        </div>\n                        <div className=\"tw-flex-1\">\n                            <ColorInput\n                                min={0}\n                                max={255}\n                                size={3}\n                                type={TextInputType.Number}\n                                value={blue.toString()}\n                                onChange={(value) => onSelect({ ...currentColor, blue: parseInt(value) })}\n                            />\n                        </div>\n                    </>\n                )}\n                <ColorInput\n                    min={0}\n                    max={100}\n                    size={3}\n                    type={TextInputType.Number}\n                    value={Math.trunc(alphaValue * 100).toString()}\n                    decorator=\"%\"\n                    decoratorPosition={DecoratorPosition.Right}\n                    onChange={(value) => {\n                        const a = parseInt(value || '0', 10) / 100;\n                        setAlphaValue(a);\n                        onSelect({ ...currentColor, alpha: a });\n                    }}\n                />\n            </div>\n            <div className=\"tw-flex tw-gap-2 tw-w-full tw-h-[200px]\">\n                <div className=\"tw-relative tw-grow tw-rounded\">\n                    <RgbaColorPicker\n                        color={{ r: red, g: green, b: blue, a: alpha }}\n                        onChange={(color) =>\n                            onSelect({\n                                red: color.r,\n                                green: color.g,\n                                blue: color.b,\n                                alpha: color.a,\n                            })\n                        }\n                        style={{ width: '100%' }}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\nCustomColorPicker.displayName = 'FondueCustomColorPicker';\n"],"names":["convertToHex","color","tinycolor","toShortRgb","CustomColorPicker","currentColor","currentFormat","setFormat","onSelect","formatMenuBlock","ColorFormat","id","red","green","blue","alpha","hexInput","setHexInput","useState","alphaValue","setAlphaValue","handleHexChange","parsedHex","toLongRgb","useEffect","React","Dropdown","ColorInput","TextInputType","value","DecoratorPosition","a","RgbaColorPicker"],"mappings":"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"}