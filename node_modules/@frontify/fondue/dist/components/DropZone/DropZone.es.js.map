{"version":3,"file":"DropZone.es.js","sources":["../../../src/components/DropZone/DropZone.tsx"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport React from 'react';\nimport { useDrop } from 'react-dnd';\nimport { merge } from '@utilities/merge';\nimport { OrderableListItem } from '@components/OrderableList/types';\nimport { DraggableItem } from '@utilities/dnd';\n\nimport { CollisionPosition } from '..';\n\nexport type OnDropCallback<T> = (\n    targetItem: DraggableItem<T>,\n    sourceItem: DraggableItem<T>,\n    position: CollisionPosition,\n    direction?: 'up' | 'down',\n) => void;\n\nexport type DropZoneData<T> = {\n    targetItem: DraggableItem<T>;\n    position: CollisionPosition;\n};\n\nexport type DropZoneProps<T> = {\n    data: DropZoneData<T>;\n    onDrop?: OnDropCallback<T>;\n    accept: string | string[];\n    children?: JSX.Element;\n    'data-test-id'?: string;\n};\n\nexport const DropZone = <T extends object>({\n    data,\n    onDrop,\n    accept,\n    children,\n    'data-test-id': dataTestId = 'drop-zone',\n}: DropZoneProps<T>) => {\n    const [{ isOver, canDrop }, drop] = useDrop({\n        accept: accept || '',\n        drop: (item: OrderableListItem<T>) => {\n            onDrop?.(data.targetItem, item, data.position);\n        },\n        canDrop: (item: OrderableListItem<T>) => {\n            // can't drop an item on itself\n            if (item.id === data.targetItem.id) {\n                return false;\n            }\n            // otherwise anything can be dropped anywhere ATM\n            return true;\n        },\n        collect: (monitor) => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    });\n\n    const isActive = isOver && canDrop;\n    const bgColorClassName = 'tw-bg-violet-20';\n    const outerDropZoneClassNames = 'tw-my-[-4px] tw-h-[10px] tw-py-1 tw-outline-none tw-relative tw-z-20';\n    const activeOuterDropZoneClassNames = 'tw-border-violet-60 tw-border-2 tw-h-7 tw-bg-clip-content';\n\n    return (\n        <div\n            role=\"row\"\n            aria-hidden={!isActive}\n            data-test-id={dataTestId}\n            className={merge([\n                'tw-w-full tw-transition-height',\n                data.position !== 'within' ? outerDropZoneClassNames : 'tw-h-auto',\n                isActive && data.position !== 'within' ? activeOuterDropZoneClassNames : '',\n                isActive && data.position === 'within' ? bgColorClassName : '',\n            ])}\n            ref={drop}\n        >\n            {children}\n        </div>\n    );\n};\n\nDropZone.displayName = 'FondueDropZone';\n"],"names":["DropZone","data","onDrop","accept","children","dataTestId","isOver","canDrop","drop","useDrop","item","monitor","isActive","bgColorClassName","outerDropZoneClassNames","activeOuterDropZoneClassNames","React","merge"],"mappings":";;;AA8BO,MAAMA,IAAW,CAAmB;AAAA,EACvC,MAAAC;AAAA,EACA,QAAAC;AAAA,EACA,QAAAC;AAAA,EACA,UAAAC;AAAA,EACA,gBAAgBC,IAAa;AACjC,MAAwB;AACpB,QAAM,CAAC,EAAE,QAAAC,GAAQ,SAAAC,EAAW,GAAAC,CAAI,IAAIC,EAAQ;AAAA,IACxC,QAAQN,KAAU;AAAA,IAClB,MAAM,CAACO,MAA+B;AAClC,MAAAR,KAAA,QAAAA,EAASD,EAAK,YAAYS,GAAMT,EAAK;AAAA,IACzC;AAAA,IACA,SAAS,CAACS,MAEFA,EAAK,OAAOT,EAAK,WAAW;AAAA,IAMpC,SAAS,CAACU,OAAa;AAAA,MACnB,QAAQA,EAAQ,OAAO;AAAA,MACvB,SAASA,EAAQ,QAAQ;AAAA,IAAA;AAAA,EAC7B,CACH,GAEKC,IAAWN,KAAUC,GACrBM,IAAmB,mBACnBC,IAA0B,wEAC1BC,IAAgC;AAGlC,SAAA,gBAAAC,EAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACG,MAAK;AAAA,MACL,eAAa,CAACJ;AAAA,MACd,gBAAcP;AAAA,MACd,WAAWY,EAAM;AAAA,QACb;AAAA,QACAhB,EAAK,aAAa,WAAWa,IAA0B;AAAA,QACvDF,KAAYX,EAAK,aAAa,WAAWc,IAAgC;AAAA,QACzEH,KAAYX,EAAK,aAAa,WAAWY,IAAmB;AAAA,MAAA,CAC/D;AAAA,MACD,KAAKL;AAAA,IAAA;AAAA,IAEJJ;AAAA,EAAA;AAGb;AAEAJ,EAAS,cAAc;"}