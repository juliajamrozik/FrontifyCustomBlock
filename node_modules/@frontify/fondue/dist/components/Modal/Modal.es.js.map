{"version":3,"file":"Modal.es.js","sources":["../../../src/components/Modal/Modal.tsx"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport React, { ReactElement, memo, useRef } from 'react';\nimport { merge } from '@utilities/merge';\nimport { ModalProps, ModalWidth } from './types';\nimport { ModalVisual } from './ModalVisual';\nimport { OverlayContainer, useModal, useOverlay, usePreventScroll } from '@react-aria/overlays';\nimport { FocusScope } from '@react-aria/focus';\nimport { useDialog } from '@react-aria/dialog';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { ModalTitle } from './context/ModalTitle';\nimport { ModalHeader } from './ModalHeader';\nimport { ModalBody } from './ModalBody';\nimport { ModalFooter } from './ModalFooter';\nimport { MODAL_PADDING, ModalLayout } from './context/ModalLayout';\n\nconst UNDERLAY_VARIANTS = {\n    initial: {\n        opacity: 0,\n    },\n    show: {\n        opacity: 1,\n        transition: {\n            duration: 0.15,\n        },\n    },\n    exit: {\n        opacity: 0,\n        transition: {\n            duration: 0.15,\n        },\n    },\n};\n\nconst MODAL_VARIANTS = {\n    initial: { y: -200 },\n    show: { y: 0, transition: { duration: 0.3 } },\n    exit: { y: 0 },\n};\n\nconst widthMap: Record<ModalWidth, string> = {\n    [ModalWidth.Default]: 'tw-max-w-[800px]',\n    [ModalWidth.Small]: 'tw-max-w-[600px]',\n    [ModalWidth.Large]: 'tw-max-w-[1200px]',\n};\n\nconst DEFAULT_ZINDEX = 50;\n\nconst ModalComponent = memo((props: ModalProps): ReactElement => {\n    const { visual, children, width = ModalWidth.Default, zIndex = DEFAULT_ZINDEX, compact = false } = props;\n    const ref = useRef<HTMLDivElement>(null);\n    const {\n        overlayProps,\n        underlayProps: { onPointerDown },\n    } = useOverlay(props, ref);\n\n    usePreventScroll();\n    const { modalProps } = useModal();\n\n    const { dialogProps, titleProps } = useDialog(props, ref);\n\n    const padding = compact ? MODAL_PADDING.compact : MODAL_PADDING.default;\n\n    return (\n        <motion.div\n            variants={UNDERLAY_VARIANTS}\n            initial=\"initial\"\n            animate=\"show\"\n            exit=\"exit\"\n            style={{\n                background: 'rgba(0, 0, 0, .5)',\n                zIndex,\n            }}\n            onPointerDown={onPointerDown}\n            data-is-underlay={true}\n            className={\n                'tw-fixed tw-top-0 tw-left-0 tw-bottom-0 tw-right-0 tw-flex tw-justify-center tw-items-center tw-p-4'\n            }\n        >\n            {/* eslint-disable-next-line jsx-a11y/no-autofocus */}\n            <FocusScope contain restoreFocus autoFocus>\n                <motion.div\n                    variants={MODAL_VARIANTS}\n                    className={merge([widthMap[width], 'tw-w-full tw-max-h-full tw-h-contents tw-flex tw-flex-col'])}\n                >\n                    <div\n                        {...overlayProps}\n                        {...dialogProps}\n                        {...modalProps}\n                        ref={ref}\n                        data-test-id=\"modal-container\"\n                        className=\"tw-flex-initial tw-min-h-0 tw-w-full tw-flex tw-bg-white tw-overflow-hidden tw-border tw-border-solid tw-border-line-strong tw-rounded tw-shadow-2xl\"\n                    >\n                        {visual?.pattern && (\n                            <div className=\"tw-w-[260px] tw-relative tw-flex-shrink-0 tw-overflow-hidden\">\n                                <ModalVisual {...visual} />\n                            </div>\n                        )}\n                        <div className=\"tw-flex tw-flex-col tw-flex-1 tw-space-y-6 tw-overflow-hidden\">\n                            <ModalLayout.Provider value={{ compact, padding }}>\n                                <ModalTitle.Provider value={titleProps}>{children}</ModalTitle.Provider>\n                            </ModalLayout.Provider>\n                        </div>\n                    </div>\n                </motion.div>\n            </FocusScope>\n        </motion.div>\n    );\n});\n\nModalComponent.displayName = 'Modal';\n\nexport const Modal = ({ isOpen, ...modalProps }: ModalProps) => (\n    <OverlayContainer>\n        <AnimatePresence>{isOpen && <ModalComponent {...modalProps} isOpen />}</AnimatePresence>\n    </OverlayContainer>\n);\n\nModal.displayName = 'FondueModal';\n\nModal.Header = ModalHeader;\nModal.Body = ModalBody;\nModal.Footer = ModalFooter;\n"],"names":["UNDERLAY_VARIANTS","MODAL_VARIANTS","widthMap","ModalWidth","DEFAULT_ZINDEX","ModalComponent","memo","props","visual","children","width","zIndex","compact","ref","useRef","overlayProps","onPointerDown","useOverlay","usePreventScroll","modalProps","useModal","dialogProps","titleProps","useDialog","padding","MODAL_PADDING","React","motion","FocusScope","merge","ModalVisual","ModalLayout","ModalTitle","Modal","isOpen","OverlayContainer","AnimatePresence","ModalHeader","ModalBody","ModalFooter"],"mappings":";;;;;;;;;;;;;AAgBA,MAAMA,IAAoB;AAAA,EACtB,SAAS;AAAA,IACL,SAAS;AAAA,EACb;AAAA,EACA,MAAM;AAAA,IACF,SAAS;AAAA,IACT,YAAY;AAAA,MACR,UAAU;AAAA,IACd;AAAA,EACJ;AAAA,EACA,MAAM;AAAA,IACF,SAAS;AAAA,IACT,YAAY;AAAA,MACR,UAAU;AAAA,IACd;AAAA,EACJ;AACJ,GAEMC,IAAiB;AAAA,EACnB,SAAS,EAAE,GAAG,KAAK;AAAA,EACnB,MAAM,EAAE,GAAG,GAAG,YAAY,EAAE,UAAU,MAAM;AAAA,EAC5C,MAAM,EAAE,GAAG,EAAE;AACjB,GAEMC,IAAuC;AAAA,EACzC,CAACC,EAAW,OAAO,GAAG;AAAA,EACtB,CAACA,EAAW,KAAK,GAAG;AAAA,EACpB,CAACA,EAAW,KAAK,GAAG;AACxB,GAEMC,IAAiB,IAEjBC,IAAiBC,EAAK,CAACC,MAAoC;AACvD,QAAA,EAAE,QAAAC,GAAQ,UAAAC,GAAU,OAAAC,IAAQP,EAAW,SAAS,QAAAQ,IAASP,GAAgB,SAAAQ,IAAU,GAAA,IAAUL,GAC7FM,IAAMC,EAAuB,IAAI,GACjC;AAAA,IACF,cAAAC;AAAA,IACA,eAAe,EAAE,eAAAC,EAAc;AAAA,EAAA,IAC/BC,EAAWV,GAAOM,CAAG;AAER,EAAAK;AACX,QAAA,EAAE,YAAAC,MAAeC,KAEjB,EAAE,aAAAC,GAAa,YAAAC,EAAA,IAAeC,EAAUhB,GAAOM,CAAG,GAElDW,IAAUZ,IAAUa,EAAc,UAAUA,EAAc;AAG5D,SAAA,gBAAAC,EAAA;AAAA,IAACC,EAAO;AAAA,IAAP;AAAA,MACG,UAAU3B;AAAA,MACV,SAAQ;AAAA,MACR,SAAQ;AAAA,MACR,MAAK;AAAA,MACL,OAAO;AAAA,QACH,YAAY;AAAA,QACZ,QAAAW;AAAA,MACJ;AAAA,MACA,eAAAK;AAAA,MACA,oBAAkB;AAAA,MAClB,WACI;AAAA,IAAA;AAAA,oCAIHY,GAAW,EAAA,SAAO,IAAC,cAAY,IAAC,WAAS,GACtC,GAAA,gBAAAF,EAAA;AAAA,MAACC,EAAO;AAAA,MAAP;AAAA,QACG,UAAU1B;AAAA,QACV,WAAW4B,EAAM,CAAC3B,EAASQ,CAAK,GAAG,2DAA2D,CAAC;AAAA,MAAA;AAAA,MAE/F,gBAAAgB,EAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACI,GAAGX;AAAA,UACH,GAAGM;AAAA,UACH,GAAGF;AAAA,UACJ,KAAAN;AAAA,UACA,gBAAa;AAAA,UACb,WAAU;AAAA,QAAA;AAAA,SAETL,KAAA,gBAAAA,EAAQ,YACL,gBAAAkB,EAAA,cAAC,OAAI,EAAA,WAAU,kEACV,gBAAAA,EAAA,cAAAI,GAAA,EAAa,GAAGtB,EAAQ,CAAA,CAC7B;AAAA,QAEJ,gBAAAkB,EAAA,cAAC,SAAI,WAAU,mGACVK,EAAY,UAAZ,EAAqB,OAAO,EAAE,SAAAnB,GAAS,SAAAY,EAAQ,EAAA,mCAC3CQ,EAAW,UAAX,EAAoB,OAAOV,KAAab,CAAS,CACtD,CACJ;AAAA,MACJ;AAAA,IAAA,CAER;AAAA,EAAA;AAGZ,CAAC;AAEDJ,EAAe,cAAc;AAEtB,MAAM4B,IAAQ,CAAC,EAAE,QAAAC,GAAQ,GAAGf,QAC9B,gBAAAO,EAAA,cAAAS,GAAA,sCACIC,GAAiB,MAAAF,qCAAW7B,GAAgB,EAAA,GAAGc,GAAY,QAAM,GAAC,CAAA,CAAG,CAC1E;AAGJc,EAAM,cAAc;AAEpBA,EAAM,SAASI;AACfJ,EAAM,OAAOK;AACbL,EAAM,SAASM;"}