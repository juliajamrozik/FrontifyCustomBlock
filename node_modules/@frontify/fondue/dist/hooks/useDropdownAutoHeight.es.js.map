{"version":3,"file":"useDropdownAutoHeight.es.js","sources":["../../src/hooks/useDropdownAutoHeight.ts"],"sourcesContent":["/* (c) Copyright Frontify Ltd., all rights reserved. */\n\nimport { MutableRefObject, useLayoutEffect, useState } from 'react';\n\nexport const DEFAULT_DROPDOWN_MAX_HEIGHT = 'auto';\n\ntype DropdownAutoHeightProps = {\n    isOpen: boolean;\n    autoResize?: boolean;\n    isDialog?: boolean;\n};\n\nexport const getInnerOverlayHeight = (triggerRef: MutableRefObject<HTMLElement | null>) => {\n    let maxHeight = 'auto';\n    if (triggerRef.current) {\n        const { innerHeight } = window;\n        const { bottom } = triggerRef.current.getBoundingClientRect();\n        const viewportPadding = 33;\n        const triggerMargin = 8;\n        maxHeight = `${Math.max(innerHeight - (bottom + viewportPadding + triggerMargin), 130)}px`;\n    }\n    return maxHeight;\n};\n\nexport const useDropdownAutoHeight = (\n    triggerRef: MutableRefObject<HTMLElement | null>,\n    { isOpen, autoResize }: DropdownAutoHeightProps,\n) => {\n    const [maxHeight, setMaxHeight] = useState(DEFAULT_DROPDOWN_MAX_HEIGHT);\n    useLayoutEffect(() => {\n        const updateMaxHeight = () => setMaxHeight(getInnerOverlayHeight(triggerRef));\n        if (autoResize && isOpen) {\n            updateMaxHeight();\n            window.addEventListener('resize', updateMaxHeight);\n        } else if (autoResize && !isOpen) {\n            setMaxHeight(DEFAULT_DROPDOWN_MAX_HEIGHT);\n        }\n\n        return () => {\n            if (isOpen && autoResize) {\n                window.removeEventListener('resize', updateMaxHeight);\n            }\n        };\n    }, [isOpen, autoResize, triggerRef]);\n\n    return { maxHeight };\n};\n"],"names":["DEFAULT_DROPDOWN_MAX_HEIGHT","getInnerOverlayHeight","triggerRef","maxHeight","innerHeight","bottom","viewportPadding","triggerMargin","useDropdownAutoHeight","isOpen","autoResize","setMaxHeight","useState","useLayoutEffect","updateMaxHeight"],"mappings":";AAIO,MAAMA,IAA8B,QAQ9BC,IAAwB,CAACC,MAAqD;AACvF,MAAIC,IAAY;AAChB,MAAID,EAAW,SAAS;AACd,UAAA,EAAE,aAAAE,EAAgB,IAAA,QAClB,EAAE,QAAAC,EAAW,IAAAH,EAAW,QAAQ,sBAAsB,GACtDI,IAAkB,IAClBC,IAAgB;AACtB,IAAAJ,IAAY,GAAG,KAAK,IAAIC,KAAeC,IAASC,IAAkBC,IAAgB,GAAG;AAAA,EACzF;AACO,SAAAJ;AACX,GAEaK,IAAwB,CACjCN,GACA,EAAE,QAAAO,GAAQ,YAAAC,QACT;AACD,QAAM,CAACP,GAAWQ,CAAY,IAAIC,EAASZ,CAA2B;AACtE,SAAAa,EAAgB,MAAM;AAClB,UAAMC,IAAkB,MAAMH,EAAaV,EAAsBC,CAAU,CAAC;AAC5E,WAAIQ,KAAcD,KACEK,KACT,OAAA,iBAAiB,UAAUA,CAAe,KAC1CJ,KAAc,CAACD,KACtBE,EAAaX,CAA2B,GAGrC,MAAM;AACT,MAAIS,KAAUC,KACH,OAAA,oBAAoB,UAAUI,CAAe;AAAA,IACxD;AAAA,EAEL,GAAA,CAACL,GAAQC,GAAYR,CAAU,CAAC,GAE5B,EAAE,WAAAC,EAAU;AACvB;"}